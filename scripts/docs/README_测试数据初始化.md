# é’ç¾½å†™ä½œç³»ç»Ÿ - æµ‹è¯•æ•°æ®å¿«é€Ÿåˆå§‹åŒ–

## ğŸ¯ ä¸€é”®åˆå§‹åŒ–

### Windows ç³»ç»Ÿ

```bash
scripts\setup_local_test_data.bat
```

### Linux/Mac ç³»ç»Ÿ

```bash
# æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
chmod +x scripts/setup_local_test_data.sh

# è¿è¡Œè„šæœ¬
./scripts/setup_local_test_data.sh
```

---

## ğŸ“¦ åˆå§‹åŒ–å†…å®¹

è¿è¡Œè„šæœ¬åå°†è‡ªåŠ¨å®Œæˆï¼š

### âœ… 1. å¯¼å…¥å°è¯´æ•°æ®
- ğŸ“š 100 æœ¬å°è¯´
- ğŸ“„ çº¦ 3000 ç« èŠ‚
- ğŸ·ï¸ å¤šç§åˆ†ç±»ï¼ˆç„å¹»ã€è¨€æƒ…ã€éƒ½å¸‚ã€æ­¦ä¾ ç­‰ï¼‰
- ğŸ’¯ å®Œæ•´çš„è¯„åˆ†æ•°æ®

### âœ… 2. åˆ›å»ºå†…æµ‹ç”¨æˆ·
- ğŸ‘¨â€ğŸ’¼ 3 ä¸ªç®¡ç†å‘˜è´¦å·
- ğŸ’ 5 ä¸ª VIP ç”¨æˆ·
- âœï¸ 5 ä¸ªå†™ä½œç”¨æˆ·
- ğŸ“– 5 ä¸ªé˜…è¯»ç”¨æˆ·
- ğŸ§ª 2 ä¸ªæµ‹è¯•ç”¨æˆ·
- **æ€»è®¡ 20 ä¸ªæµ‹è¯•è´¦å·**

---

## ğŸ”‘ å¿«é€Ÿç™»å½•

| ç±»å‹ | ç”¨æˆ·å | å¯†ç  | ç”¨é€” |
|------|--------|------|------|
| ç®¡ç†å‘˜ | `admin` | `Admin@123456` | ç³»ç»Ÿç®¡ç† |
| VIPä½œå®¶ | `vip_writer01` | `Vip@123456` | é«˜çº§å†™ä½œ |
| VIPè¯»è€… | `vip_reader01` | `Vip@123456` | ä»˜è´¹é˜…è¯» |
| æ™®é€šä½œå®¶ | `writer_xuanhuan` | `Writer@123456` | ç„å¹»åˆ›ä½œ |
| æ™®é€šè¯»è€… | `reader01` | `Reader@123456` | åŸºç¡€é˜…è¯» |

**å®Œæ•´è´¦å·åˆ—è¡¨**: æŸ¥çœ‹ [å†…æµ‹è´¦å·å¿«é€Ÿå‚è€ƒ](doc/testing/å†…æµ‹è´¦å·å¿«é€Ÿå‚è€ƒ.md)

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- ğŸ“– [æœ¬åœ°æµ‹è¯•æ•°æ®åˆå§‹åŒ–æŒ‡å—](doc/testing/æœ¬åœ°æµ‹è¯•æ•°æ®åˆå§‹åŒ–æŒ‡å—.md) - å®Œæ•´ä½¿ç”¨è¯´æ˜
- ğŸ”‘ [å†…æµ‹è´¦å·å¿«é€Ÿå‚è€ƒ](doc/testing/å†…æµ‹è´¦å·å¿«é€Ÿå‚è€ƒ.md) - æ‰€æœ‰æµ‹è¯•è´¦å·åˆ—è¡¨
- ğŸ“š [å°è¯´å¯¼å…¥è¯¦ç»†æŒ‡å—](migration/seeds/README_å°è¯´å¯¼å…¥æŒ‡å—.md) - æ•°æ®å¯¼å…¥ç»†èŠ‚

---

## âš¡ å‰ç½®è¦æ±‚

### å¿…é¡»æ»¡è¶³ï¼š
- âœ… Go 1.21+
- âœ… MongoDB å·²å¯åŠ¨ï¼ˆç«¯å£ 27017ï¼‰
- âœ… é…ç½®æ–‡ä»¶æ­£ç¡®ï¼ˆ`config/config.local.yaml`ï¼‰

### å¯é€‰ï¼š
- Python 3.7+ï¼ˆä»…åœ¨éœ€è¦ç”Ÿæˆæ–°æ•°æ®æ—¶ï¼‰

---

## ğŸš€ å¯åŠ¨æœåŠ¡å™¨

åˆå§‹åŒ–å®Œæˆåï¼Œå¯åŠ¨æœåŠ¡å™¨ï¼š

```bash
go run cmd/server/main.go
```

æœåŠ¡å™¨å°†è¿è¡Œåœ¨ï¼š`http://localhost:8080`

---

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

### 1. API ç™»å½•æµ‹è¯•

```bash
curl -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"Admin@123456"}'
```

### 2. è·å–ä¹¦åŸæ•°æ®

```bash
curl -X GET "http://localhost:8080/api/v1/bookstore/books?page=1&page_size=20"
```

### 3. æœç´¢ä¹¦ç±

```bash
curl -X GET "http://localhost:8080/api/v1/bookstore/search?keyword=ç„å¹»"
```

---

## ğŸ”§ è¿›é˜¶æ“ä½œ

### ä»…å¯¼å…¥å°è¯´æ•°æ®

```bash
go run cmd/migrate/main.go -command=import-novels -file=data/novels_100.json
```

### ä»…åˆ›å»ºå†…æµ‹ç”¨æˆ·

```bash
go run cmd/create_beta_users/main.go
```

### æ¸…ç†æµ‹è¯•æ•°æ®

```bash
go run cmd/migrate/main.go -command=clean-novels
```

### å¯¼å…¥æ›´å¤šå°è¯´

```bash
# ç”Ÿæˆ 500 æœ¬å°è¯´
python scripts/import_novels.py --max-novels 500 --output data/novels_500.json

# å¯¼å…¥åˆ°æ•°æ®åº“
go run cmd/migrate/main.go -command=import-novels -file=data/novels_500.json
```

---

## â“ å¸¸è§é—®é¢˜

### Q: MongoDB è¿æ¥å¤±è´¥ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# Windows
net start MongoDB

# Linux/Mac
sudo systemctl start mongod
```

### Q: æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨ï¼Ÿ

é¡¹ç›®å·²åŒ…å« `data/novels_100.json`ï¼Œå¦‚æœç¼ºå¤±å¯ä»¥é‡æ–°ç”Ÿæˆï¼š

```bash
python scripts/import_novels.py --max-novels 100 --output data/novels_100.json
```

### Q: å¦‚ä½•é‡ç½®æ‰€æœ‰æ•°æ®ï¼Ÿ

```bash
# 1. æ¸…ç†å°è¯´æ•°æ®
go run cmd/migrate/main.go -command=clean-novels

# 2. é‡æ–°è¿è¡Œåˆå§‹åŒ–è„šæœ¬
scripts\setup_local_test_data.bat
```

---

## âš ï¸ å®‰å…¨æé†’

### âœ… å¼€å‘ç¯å¢ƒ
- å¯ä»¥ä½¿ç”¨æµ‹è¯•è´¦å·
- å®šæœŸæ¸…ç†æµ‹è¯•æ•°æ®

### âŒ ç”Ÿäº§ç¯å¢ƒ
- **ç»å¯¹ä¸è¦**ä½¿ç”¨è¿™äº›æµ‹è¯•è´¦å·
- ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘ 16 ä½ï¼‰
- å¯ç”¨åŒå› ç´ è®¤è¯

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
Qingyu_backend/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ novels_100.json           # 100æœ¬å°è¯´æ•°æ®
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup_local_test_data.bat # Windows åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ setup_local_test_data.sh  # Linux/Mac åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ import_novels.py          # Python æ•°æ®ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ migration/
â”‚   â””â”€â”€ seeds/
â”‚       â”œâ”€â”€ create_beta_users.go  # å†…æµ‹ç”¨æˆ·åˆ›å»ºè„šæœ¬
â”‚       â””â”€â”€ import_novels.go      # å°è¯´å¯¼å…¥è„šæœ¬
â”œâ”€â”€ doc/
â”‚   â””â”€â”€ testing/
â”‚       â”œâ”€â”€ æœ¬åœ°æµ‹è¯•æ•°æ®åˆå§‹åŒ–æŒ‡å—.md
â”‚       â””â”€â”€ å†…æµ‹è´¦å·å¿«é€Ÿå‚è€ƒ.md
â””â”€â”€ README_æµ‹è¯•æ•°æ®åˆå§‹åŒ–.md      # æœ¬æ–‡æ¡£
```

---

## ğŸ“ å­¦ä¹ èµ„æº

- [é¡¹ç›®æ¶æ„æ–‡æ¡£](doc/architecture/)
- [API æ¥å£æ–‡æ¡£](doc/api/)
- [æµ‹è¯•è§„èŒƒ](doc/testing/)

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹ [è¯¦ç»†æ–‡æ¡£](doc/testing/æœ¬åœ°æµ‹è¯•æ•°æ®åˆå§‹åŒ–æŒ‡å—.md)
2. æ£€æŸ¥æ—¥å¿— `startup.log`
3. æäº¤ Issue

---

**æœ€åæ›´æ–°**: 2025-10-24  
**ç»´æŠ¤è€…**: é’ç¾½åç«¯å¼€å‘å›¢é˜Ÿ  
**ç‰ˆæœ¬**: v1.0

