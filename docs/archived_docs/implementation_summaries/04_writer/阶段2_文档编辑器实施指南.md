# é˜¶æ®µ2ï¼šæ–‡æ¡£ç¼–è¾‘å™¨å®æ–½æŒ‡å—

> **å®æ–½å‘¨æœŸ**: 5å¤©ï¼ˆ2025.10.22 - 2025.10.26ï¼‰  
> **å‰ç½®ä¾èµ–**: é˜¶æ®µ1å®Œæˆ  
> **çŠ¶æ€**: â¸ï¸ å¾…å¼€å§‹

## å®æ–½æ¦‚è§ˆ

æœ¬é˜¶æ®µå®æ–½æ–‡æ¡£ç¼–è¾‘åŠŸèƒ½ï¼ŒåŒ…æ‹¬å†…å®¹ç¼–è¾‘ã€è‡ªåŠ¨ä¿å­˜ã€ç‰ˆæœ¬æ§åˆ¶ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### ç›®æ ‡æˆæœ

- âœ… æ–‡æ¡£å†…å®¹å­˜å‚¨ï¼ˆæ”¯æŒå¤§æ–‡ä»¶ï¼‰
- âœ… Markdownå’Œå¯Œæ–‡æœ¬åŒæ¨¡å¼ç¼–è¾‘
- âœ… è‡ªåŠ¨ä¿å­˜æœºåˆ¶
- âœ… å®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
- âœ… 6ä¸ªç¼–è¾‘ç›¸å…³API
- âœ… å‰ç«¯ç¼–è¾‘å™¨ç»„ä»¶é›†æˆ

---

## ä»»åŠ¡2.1ï¼šæ–‡æ¡£å†…å®¹å­˜å‚¨è®¾è®¡ï¼ˆDay 1ï¼Œ8å°æ—¶ï¼‰

### ğŸ“‹ ä»»åŠ¡æ¸…å•

#### 2.1.1 åˆ›å»ºDocumentContentæ¨¡å‹

**æ–‡ä»¶**: `models/document/document_content.go`

**å®æ–½æ­¥éª¤**:

```go
// models/document/document_content.go
package document

import "time"

// DocumentContent æ–‡æ¡£å†…å®¹
type DocumentContent struct {
    ID           string    `bson:"_id,omitempty" json:"id"`
    DocumentID   string    `bson:"document_id" json:"documentId" validate:"required"`
    Content      string    `bson:"content" json:"content"`
    ContentType  string    `bson:"content_type" json:"contentType"` // markdown | richtext
    WordCount    int       `bson:"word_count" json:"wordCount"`
    CharCount    int       `bson:"char_count" json:"charCount"`
    GridFSID     string    `bson:"gridfs_id,omitempty" json:"gridfsId,omitempty"`
    Version      int       `bson:"version" json:"version"`
    LastSavedAt  time.Time `bson:"last_saved_at" json:"lastSavedAt"`
    LastEditedBy string    `bson:"last_edited_by" json:"lastEditedBy"`
    UpdatedAt    time.Time `bson:"updated_at" json:"updatedAt"`
    CreatedAt    time.Time `bson:"created_at" json:"createdAt"`
}

// IsLargeDocument åˆ¤æ–­æ˜¯å¦ä¸ºå¤§æ–‡æ¡£ï¼ˆ>1MBï¼‰
func (d *DocumentContent) IsLargeDocument() bool {
    return len(d.Content) > 1024*1024
}

// GetDisplayWordCount è·å–æ˜¾ç¤ºç”¨çš„å­—æ•°
func (d *DocumentContent) GetDisplayWordCount() int {
    if d.WordCount > 0 {
        return d.WordCount
    }
    return len([]rune(d.Content))
}
```

**éªŒè¯**:
- [ ] æ¨¡å‹å®šä¹‰å®Œæ•´
- [ ] ä¸šåŠ¡æ–¹æ³•æ­£ç¡®

#### 2.1.2 åˆ›å»ºVersionæ¨¡å‹

**æ–‡ä»¶**: `models/document/version.go`

**å®æ–½æ­¥éª¤**:

```go
// models/document/version.go
package document

import (
    "fmt"
    "time"
)

// Version æ–‡æ¡£ç‰ˆæœ¬
type Version struct {
    ID          string    `bson:"_id,omitempty" json:"id"`
    DocumentID  string    `bson:"document_id" json:"documentId" validate:"required"`
    VersionNum  int       `bson:"version_num" json:"versionNum"`
    Content     string    `bson:"content" json:"content"`
    GridFSID    string    `bson:"gridfs_id,omitempty" json:"gridfsId,omitempty"`
    ContentType string    `bson:"content_type" json:"contentType"`
    WordCount   int       `bson:"word_count" json:"wordCount"`
    Comment     string    `bson:"comment,omitempty" json:"comment,omitempty"`
    CreatedBy   string    `bson:"created_by" json:"createdBy"`
    CreatedAt   time.Time `bson:"created_at" json:"createdAt"`
    IsAutoSave  bool      `bson:"is_auto_save" json:"isAutoSave"`
}

// GetVersionLabel è·å–ç‰ˆæœ¬æ ‡ç­¾
func (v *Version) GetVersionLabel() string {
    if v.IsAutoSave {
        return fmt.Sprintf("v%d (è‡ªåŠ¨ä¿å­˜)", v.VersionNum)
    }
    return fmt.Sprintf("v%d", v.VersionNum)
}
```

**éªŒè¯**:
- [ ] ç‰ˆæœ¬æ¨¡å‹å®šä¹‰æ­£ç¡®
- [ ] è‡ªåŠ¨ä¿å­˜æ ‡è®°å®Œæ•´

#### 2.1.3 åˆ›å»ºDocumentContentRepositoryæ¥å£

**æ–‡ä»¶**: `repository/interfaces/document/document_content_repository.go`

**å…³é”®æ–¹æ³•**:
- Create/GetByDocumentID/Update/Delete
- SaveContent/GetContent
- SaveToGridFS/LoadFromGridFS/DeleteFromGridFS
- UpdateWordCount
- Health

**éªŒè¯**:
- [ ] æ¥å£å®šä¹‰å®Œæ•´
- [ ] GridFSæ“ä½œæ–¹æ³•é½å…¨

#### 2.1.4 åˆ›å»ºVersionRepositoryæ¥å£

**æ–‡ä»¶**: `repository/interfaces/document/version_repository.go`

**å…³é”®æ–¹æ³•**:
- Create/GetByID/GetByDocumentID/Delete
- GetByVersionNum
- DeleteOldVersions/GetVersionCount

**éªŒè¯**:
- [ ] ç‰ˆæœ¬æ“ä½œæ–¹æ³•å®Œæ•´

#### 2.1.5 å®ç°MongoDB Repository

**æ–‡ä»¶**: 
- `repository/mongodb/document/document_content_repository_mongo.go`
- `repository/mongodb/document/version_repository_mongo.go`

**å…³é”®å®ç°**:
1. DocumentContent Repository:
   - è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦ä½¿ç”¨GridFSï¼ˆ>1MBï¼‰
   - GridFSæ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½
   - å­—æ•°ç»Ÿè®¡æ›´æ–°

2. Version Repository:
   - ç‰ˆæœ¬å·è‡ªåŠ¨é€’å¢
   - ç‰ˆæœ¬æ¸…ç†ï¼ˆä¿ç•™30å¤©ï¼‰
   - GridFSç‰ˆæœ¬å†…å®¹å­˜å‚¨

**éªŒè¯**:
- [ ] GridFSæ“ä½œæ­£ç¡®
- [ ] ç‰ˆæœ¬ç®¡ç†é€»è¾‘å®Œæ•´

---

### ğŸ§ª æµ‹è¯•2.1ï¼šRepositoryæµ‹è¯•ï¼ˆ2å°æ—¶ï¼‰

**æ–‡ä»¶**: 
- `test/repository/document_content_repository_test.go`
- `test/repository/version_repository_test.go`

**æµ‹è¯•é‡ç‚¹**:
- å°æ–‡ä»¶å’Œå¤§æ–‡ä»¶å­˜å‚¨
- GridFSä¸Šä¼ ä¸‹è½½
- ç‰ˆæœ¬åˆ›å»ºå’ŒæŸ¥è¯¢
- ç‰ˆæœ¬æ¸…ç†

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] è¦†ç›–ç‡â‰¥90%
- [ ] GridFSæ“ä½œæ­£å¸¸

---

## ä»»åŠ¡2.2ï¼šæ–‡æ¡£ç¼–è¾‘APIå®ç°ï¼ˆDay 2ï¼Œ8å°æ—¶ï¼‰

### ğŸ“‹ ä»»åŠ¡æ¸…å•

#### 2.2.1 å®ç°DocumentContentService

**æ–‡ä»¶**: `service/document/document_content_service.go`

**å…³é”®æ–¹æ³•**:

```go
// SaveContent ä¿å­˜æ–‡æ¡£å†…å®¹
func (s *DocumentContentService) SaveContent(ctx context.Context, req *SaveContentRequest) (*SaveContentResponse, error) {
    // 1. éªŒè¯æ–‡æ¡£æƒé™
    // 2. è·å–å½“å‰å†…å®¹
    // 3. æ£€æŸ¥å¹¶å‘å†²çªï¼ˆä¹è§‚é”ï¼‰
    // 4. è®¡ç®—å­—æ•°
    // 5. åˆ¤æ–­æ˜¯å¦ä½¿ç”¨GridFS
    // 6. ä¿å­˜æˆ–æ›´æ–°å†…å®¹
    // 7. åˆ›å»ºç‰ˆæœ¬ï¼ˆéè‡ªåŠ¨ä¿å­˜æ‰åˆ›å»ºï¼‰
    // 8. æ›´æ–°æ–‡æ¡£ç»Ÿè®¡
    // 9. å‘å¸ƒäº‹ä»¶
    // 10. è¿”å›å“åº”
}

// GetContent è·å–æ–‡æ¡£å†…å®¹
func (s *DocumentContentService) GetContent(ctx context.Context, documentID string) (*DocumentContent, error)

// AutoSave è‡ªåŠ¨ä¿å­˜
func (s *DocumentContentService) AutoSave(ctx context.Context, req *AutoSaveRequest) error
```

**éªŒè¯**:
- [ ] å¹¶å‘å†²çªæ£€æµ‹æ­£ç¡®
- [ ] GridFSåˆ‡æ¢æ­£å¸¸
- [ ] å­—æ•°ç»Ÿè®¡å‡†ç¡®

#### 2.2.2 å®ç°VersionService

**æ–‡ä»¶**: `service/document/version_service.go`

**å…³é”®æ–¹æ³•**:

```go
// ListVersions è·å–ç‰ˆæœ¬å†å²
func (s *VersionService) ListVersions(ctx context.Context, documentID string, limit int) ([]*Version, error)

// GetVersion è·å–æŒ‡å®šç‰ˆæœ¬
func (s *VersionService) GetVersion(ctx context.Context, documentID string, versionNum int) (*Version, error)

// CompareVersions å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬
func (s *VersionService) CompareVersions(ctx context.Context, documentID string, version1, version2 int) (*VersionCompareResponse, error)

// RestoreVersion æ¢å¤åˆ°æŒ‡å®šç‰ˆæœ¬
func (s *VersionService) RestoreVersion(ctx context.Context, documentID string, versionNum int) error

// CleanOldVersions æ¸…ç†æ—§ç‰ˆæœ¬
func (s *VersionService) CleanOldVersions(ctx context.Context, documentID string, keepDays int) error
```

**éªŒè¯**:
- [ ] ç‰ˆæœ¬æŸ¥è¯¢æ­£ç¡®
- [ ] ç‰ˆæœ¬æ¢å¤åŠŸèƒ½æ­£å¸¸
- [ ] ç‰ˆæœ¬æ¸…ç†é€»è¾‘æ­£ç¡®

#### 2.2.3 åˆ›å»ºDTOæ¨¡å‹

**æ–‡ä»¶**: `service/document/document_content_dto.go`

```go
// SaveContentRequest ä¿å­˜å†…å®¹è¯·æ±‚
type SaveContentRequest struct {
    DocumentID  string `json:"documentId" validate:"required"`
    Content     string `json:"content"`
    ContentType string `json:"contentType" validate:"required,oneof=markdown richtext"`
    Version     int    `json:"version"`
    Comment     string `json:"comment,omitempty"`
    IsAutoSave  bool   `json:"isAutoSave"`
}

// SaveContentResponse ä¿å­˜å†…å®¹å“åº”
type SaveContentResponse struct {
    DocumentID string    `json:"documentId"`
    Version    int       `json:"version"`
    WordCount  int       `json:"wordCount"`
    SavedAt    time.Time `json:"savedAt"`
}

// AutoSaveRequest è‡ªåŠ¨ä¿å­˜è¯·æ±‚
type AutoSaveRequest struct {
    DocumentID  string `json:"documentId"`
    Content     string `json:"content"`
    ContentType string `json:"contentType"`
    Version     int    `json:"version"`
}

// VersionCompareResponse ç‰ˆæœ¬å¯¹æ¯”å“åº”
type VersionCompareResponse struct {
    Version1      *Version `json:"version1"`
    Version2      *Version `json:"version2"`
    WordCountDiff int      `json:"wordCountDiff"`
}
```

**éªŒè¯**:
- [ ] DTOå®šä¹‰å®Œæ•´
- [ ] éªŒè¯è§„åˆ™æ­£ç¡®

---

### ğŸ§ª æµ‹è¯•2.2ï¼šServiceæµ‹è¯•ï¼ˆ2å°æ—¶ï¼‰

**æ–‡ä»¶**: 
- `test/service/document_content_service_test.go`
- `test/service/version_service_test.go`

**æµ‹è¯•é‡ç‚¹**:
- ä¿å­˜å†…å®¹ï¼ˆå°æ–‡ä»¶å’Œå¤§æ–‡ä»¶ï¼‰
- è‡ªåŠ¨ä¿å­˜
- å¹¶å‘å†²çªæ£€æµ‹
- ç‰ˆæœ¬åˆ›å»ºå’Œæ¢å¤
- ç‰ˆæœ¬å¯¹æ¯”

**éªŒæ”¶æ ‡å‡†**:
- [ ] ä¸šåŠ¡é€»è¾‘æµ‹è¯•é€šè¿‡
- [ ] è¦†ç›–ç‡â‰¥85%
- [ ] Mockä½¿ç”¨æ­£ç¡®

---

## ä»»åŠ¡2.3ï¼šMarkdownç¼–è¾‘å™¨é›†æˆï¼ˆDay 3ï¼Œ8å°æ—¶ï¼‰

### ğŸ“‹ ä»»åŠ¡æ¸…å•

#### 2.3.1 å®ç°DocumentContentApi

**æ–‡ä»¶**: `api/v1/writer/document_content_api.go`

**APIæ–¹æ³•**:

```go
// GetContent è·å–æ–‡æ¡£å†…å®¹
func (api *DocumentContentApi) GetContent(c *gin.Context)

// SaveContent ä¿å­˜æ–‡æ¡£å†…å®¹
func (api *DocumentContentApi) SaveContent(c *gin.Context)

// AutoSave è‡ªåŠ¨ä¿å­˜
func (api *DocumentContentApi) AutoSave(c *gin.Context)

// GetVersions è·å–ç‰ˆæœ¬å†å²
func (api *DocumentContentApi) GetVersions(c *gin.Context)

// GetVersion è·å–æŒ‡å®šç‰ˆæœ¬
func (api *DocumentContentApi) GetVersion(c *gin.Context)

// RestoreVersion æ¢å¤ç‰ˆæœ¬
func (api *DocumentContentApi) RestoreVersion(c *gin.Context)
```

**å®æ–½è¦ç‚¹**:
- å‚æ•°éªŒè¯å®Œæ•´
- é”™è¯¯å¤„ç†ç»Ÿä¸€
- å“åº”æ ¼å¼è§„èŒƒ

**éªŒè¯**:
- [ ] APIå®ç°å®Œæ•´
- [ ] å‚æ•°éªŒè¯æ­£ç¡®

#### 2.3.2 é…ç½®è·¯ç”±

**æ–‡ä»¶**: `router/writer/document_content.go`

```go
func InitDocumentContentRouter(r *gin.RouterGroup, contentApi *writer.DocumentContentApi) {
    docGroup := r.Group("/documents")
    docGroup.Use(middleware.JWTAuth())
    {
        // å†…å®¹ç®¡ç†
        docGroup.GET("/:id/content", contentApi.GetContent)
        docGroup.PUT("/:id/content", contentApi.SaveContent)
        docGroup.POST("/:id/autosave", contentApi.AutoSave)
        
        // ç‰ˆæœ¬ç®¡ç†
        docGroup.GET("/:id/versions", contentApi.GetVersions)
        docGroup.GET("/:id/versions/:version", contentApi.GetVersion)
        docGroup.POST("/:id/restore/:version", contentApi.RestoreVersion)
    }
}
```

**éªŒè¯**:
- [ ] è·¯ç”±é…ç½®æ­£ç¡®
- [ ] ä¸­é—´ä»¶åº”ç”¨æ­£å¸¸

#### 2.3.3 ç¼–å†™APIæ–‡æ¡£

**æ–‡ä»¶**: `doc/api/document/æ–‡æ¡£ç¼–è¾‘API.md`

**å†…å®¹åŒ…æ‹¬**:
- æ¥å£åˆ—è¡¨
- è¯·æ±‚å‚æ•°
- å“åº”æ ¼å¼
- é”™è¯¯ç è¯´æ˜
- ç¤ºä¾‹ä»£ç 

**éªŒè¯**:
- [ ] APIæ–‡æ¡£å®Œæ•´
- [ ] ç¤ºä¾‹ä»£ç æ­£ç¡®

---

### ğŸ§ª æµ‹è¯•2.3ï¼šAPIæµ‹è¯•ï¼ˆ2å°æ—¶ï¼‰

**æ–‡ä»¶**: `test/api/document_content_api_test.go`

**æµ‹è¯•ç”¨ä¾‹**:
- è·å–å†…å®¹æµ‹è¯•
- ä¿å­˜å†…å®¹æµ‹è¯•ï¼ˆå°æ–‡ä»¶å’Œå¤§æ–‡ä»¶ï¼‰
- è‡ªåŠ¨ä¿å­˜æµ‹è¯•
- ç‰ˆæœ¬å†å²æµ‹è¯•
- ç‰ˆæœ¬æ¢å¤æµ‹è¯•
- å¹¶å‘ä¿å­˜æµ‹è¯•

**Postmanæµ‹è¯•é›†**: `test/postman/å†™ä½œç«¯-æ–‡æ¡£ç¼–è¾‘.postman_collection.json`

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰APIæµ‹è¯•é€šè¿‡
- [ ] Postmanæµ‹è¯•é›†å®Œæ•´
- [ ] å¹¶å‘æµ‹è¯•é€šè¿‡

---

## ä»»åŠ¡2.4ï¼šå¯Œæ–‡æœ¬ç¼–è¾‘å™¨é›†æˆï¼ˆDay 4ï¼Œ8å°æ—¶ï¼‰

### ğŸ“‹ ä»»åŠ¡æ¸…å•

#### 2.4.1 æ ¼å¼è½¬æ¢å·¥å…·

**æ–‡ä»¶**: `pkg/converter/markdown_converter.go`

**å®æ–½æ­¥éª¤**:

```go
package converter

// MarkdownToHTML Markdownè½¬HTML
func MarkdownToHTML(markdown string) (string, error) {
    // ä½¿ç”¨markedåº“æˆ–goldmark
}

// HTMLToMarkdown HTMLè½¬Markdown
func HTMLToMarkdown(html string) (string, error) {
    // ä½¿ç”¨turndownæˆ–ç±»ä¼¼åº“
}

// ValidateMarkdown éªŒè¯Markdownæ ¼å¼
func ValidateMarkdown(markdown string) error
```

**éªŒè¯**:
- [ ] è½¬æ¢åŠŸèƒ½æ­£å¸¸
- [ ] æ ¼å¼ä¿ç•™å®Œæ•´

#### 2.4.2 å‰ç«¯ç¼–è¾‘å™¨ç»„ä»¶ï¼ˆå‚è€ƒï¼‰

**Markdownç¼–è¾‘å™¨**:
```vue
<template>
  <div class="editor-container">
    <v-md-editor
      v-model="content"
      height="600px"
      @save="handleSave"
      @change="handleChange"
    />
    
    <div class="editor-status">
      <span>å­—æ•°: {{ wordCount }}</span>
      <span>{{ saveStatus }}</span>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      content: '',
      wordCount: 0,
      saveStatus: 'å·²ä¿å­˜',
      autoSaveTimer: null,
      version: 0
    }
  },
  
  mounted() {
    this.loadContent()
    this.startAutoSave()
  },
  
  methods: {
    async loadContent() {
      const res = await this.$api.getDocumentContent(this.documentId)
      this.content = res.data.content
      this.version = res.data.version
      this.wordCount = res.data.wordCount
    },
    
    async handleSave() {
      try {
        const res = await this.$api.saveDocumentContent(this.documentId, {
          content: this.content,
          contentType: 'markdown',
          version: this.version
        })
        this.version = res.data.version
        this.saveStatus = 'å·²ä¿å­˜'
        this.$message.success('ä¿å­˜æˆåŠŸ')
      } catch (error) {
        this.$message.error('ä¿å­˜å¤±è´¥')
      }
    },
    
    handleChange() {
      this.saveStatus = 'æœªä¿å­˜'
      this.wordCount = this.content.length
    },
    
    startAutoSave() {
      this.autoSaveTimer = setInterval(() => {
        if (this.saveStatus === 'æœªä¿å­˜') {
          this.autoSave()
        }
      }, 30000) // 30ç§’è‡ªåŠ¨ä¿å­˜
    },
    
    async autoSave() {
      try {
        await this.$api.autoSaveDocumentContent(this.documentId, {
          content: this.content,
          contentType: 'markdown',
          version: this.version
        })
        this.saveStatus = 'è‡ªåŠ¨ä¿å­˜äº ' + new Date().toLocaleTimeString()
      } catch (error) {
        console.error('è‡ªåŠ¨ä¿å­˜å¤±è´¥', error)
      }
    }
  },
  
  beforeUnmount() {
    if (this.autoSaveTimer) {
      clearInterval(this.autoSaveTimer)
    }
  }
}
</script>
```

**éªŒè¯**:
- [ ] å‰ç«¯ç»„ä»¶å‚è€ƒæ–‡æ¡£å®Œæ•´

---

### ğŸ§ª æµ‹è¯•2.4ï¼šåŠŸèƒ½æµ‹è¯•ï¼ˆ2å°æ—¶ï¼‰

**æµ‹è¯•å†…å®¹**:
- æ ¼å¼è½¬æ¢æµ‹è¯•
- å­—æ•°ç»Ÿè®¡æµ‹è¯•
- å¤§æ–‡ä»¶å¤„ç†æµ‹è¯•

**éªŒæ”¶æ ‡å‡†**:
- [ ] è½¬æ¢åŠŸèƒ½æ­£å¸¸
- [ ] ç»Ÿè®¡å‡†ç¡®

---

## ä»»åŠ¡2.5ï¼šç‰ˆæœ¬æ§åˆ¶ç•Œé¢ï¼ˆDay 5ï¼Œ8å°æ—¶ï¼‰

### ğŸ“‹ ä»»åŠ¡æ¸…å•

#### 2.5.1 ç‰ˆæœ¬å†å²ç»„ä»¶ï¼ˆå‚è€ƒï¼‰

**æ–‡ä»¶**: å‰ç«¯ç»„ä»¶å‚è€ƒ

```vue
<template>
  <div class="version-history">
    <el-timeline>
      <el-timeline-item
        v-for="version in versions"
        :key="version.id"
        :timestamp="formatTime(version.createdAt)"
      >
        <div class="version-item">
          <div class="version-info">
            <span class="version-num">v{{ version.versionNum }}</span>
            <span class="version-comment">{{ version.comment }}</span>
            <span class="word-count">{{ version.wordCount }}å­—</span>
          </div>
          <div class="version-actions">
            <el-button size="small" @click="previewVersion(version)">
              é¢„è§ˆ
            </el-button>
            <el-button size="small" @click="compareVersion(version)">
              å¯¹æ¯”
            </el-button>
            <el-button size="small" type="primary" @click="restoreVersion(version)">
              æ¢å¤
            </el-button>
          </div>
        </div>
      </el-timeline-item>
    </el-timeline>
  </div>
</template>
```

#### 2.5.2 Diffå¯¹æ¯”åŠŸèƒ½

**å·¥å…·åº“**: diff-match-patch

**å®æ–½è¦ç‚¹**:
- é€è¡Œå¯¹æ¯”
- å·®å¼‚é«˜äº®
- ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¢åˆ å­—æ•°ï¼‰

**éªŒè¯**:
- [ ] å¯¹æ¯”åŠŸèƒ½æ­£å¸¸
- [ ] é«˜äº®æ˜¾ç¤ºæ­£ç¡®

#### 2.5.3 å®Œæ•´åŠŸèƒ½æµ‹è¯•

**æµ‹è¯•åœºæ™¯**:
1. åˆ›å»ºæ–‡æ¡£å¹¶ç¼–è¾‘
2. å¤šæ¬¡ä¿å­˜ç”Ÿæˆç‰ˆæœ¬
3. æŸ¥çœ‹ç‰ˆæœ¬å†å²
4. å¯¹æ¯”ä¸åŒç‰ˆæœ¬
5. æ¢å¤åˆ°å†å²ç‰ˆæœ¬
6. è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
7. å¤§æ–‡æ¡£å¤„ç†

**éªŒè¯**:
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
- [ ] æ€§èƒ½ç¬¦åˆè¦æ±‚

---

## é˜¶æ®µ2å®ŒæˆéªŒè¯

### âœ… åŠŸèƒ½éªŒè¯æ¸…å•

#### ç¼–è¾‘åŠŸèƒ½
- [ ] Markdownç¼–è¾‘å™¨æ­£å¸¸
- [ ] å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ­£å¸¸
- [ ] æ ¼å¼è½¬æ¢åŠŸèƒ½æ­£å¸¸
- [ ] å­—æ•°ç»Ÿè®¡å‡†ç¡®

#### ä¿å­˜åŠŸèƒ½
- [ ] æ‰‹åŠ¨ä¿å­˜æˆåŠŸ
- [ ] è‡ªåŠ¨ä¿å­˜æ­£å¸¸ï¼ˆ30ç§’ï¼‰
- [ ] å¤§æ–‡ä»¶GridFSä¿å­˜æˆåŠŸ
- [ ] å¹¶å‘å†²çªæ£€æµ‹æœ‰æ•ˆ

#### ç‰ˆæœ¬æ§åˆ¶
- [ ] ç‰ˆæœ¬è‡ªåŠ¨åˆ›å»º
- [ ] ç‰ˆæœ¬å†å²æŸ¥è¯¢æ­£å¸¸
- [ ] ç‰ˆæœ¬å¯¹æ¯”åŠŸèƒ½æ­£å¸¸
- [ ] ç‰ˆæœ¬æ¢å¤åŠŸèƒ½æ­£å¸¸
- [ ] ç‰ˆæœ¬æ¸…ç†åŠŸèƒ½æ­£å¸¸

#### æ€§èƒ½æŒ‡æ ‡
- [ ] æ–‡æ¡£åŠ è½½ <500ms
- [ ] è‡ªåŠ¨ä¿å­˜ <200ms
- [ ] ç‰ˆæœ¬æŸ¥è¯¢ <300ms
- [ ] ç‰ˆæœ¬å¯¹æ¯” <1s

### ğŸ“Š è´¨é‡æŒ‡æ ‡

- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 90%
- [ ] Serviceæµ‹è¯•è¦†ç›–ç‡ â‰¥ 85%
- [ ] APIæµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡
- [ ] ä»£ç å®¡æŸ¥é€šè¿‡

### ğŸ“ äº¤ä»˜æ–‡æ¡£

- [ ] æ›´æ–°å®æ–½è¿›åº¦
- [ ] ç¼–å†™APIä½¿ç”¨æ–‡æ¡£
- [ ] å‰ç«¯é›†æˆæ–‡æ¡£
- [ ] æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

---

## å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### Q1: å¤§æ–‡æ¡£ä¿å­˜ç¼“æ…¢å¦‚ä½•ä¼˜åŒ–ï¼Ÿ

**A**: 
1. ä½¿ç”¨GridFSåˆ†å—å­˜å‚¨
2. å‹ç¼©å†…å®¹åå­˜å‚¨
3. å¼‚æ­¥å¤„ç†å¤§æ–‡ä»¶
4. å‰ç«¯åˆ†å—ä¸Šä¼ 

### Q2: è‡ªåŠ¨ä¿å­˜å¤±è´¥å¦‚ä½•å¤„ç†ï¼Ÿ

**A**:
1. å‰ç«¯LocalStorageç¼“å­˜
2. ä¿å­˜å¤±è´¥é‡è¯•3æ¬¡
3. æ˜ç¡®æç¤ºä¿å­˜çŠ¶æ€
4. æä¾›æ‰‹åŠ¨ä¿å­˜æŒ‰é’®

### Q3: ç‰ˆæœ¬è¿‡å¤šå¦‚ä½•ç®¡ç†ï¼Ÿ

**A**:
1. å®šæœŸæ¸…ç†30å¤©å‰ç‰ˆæœ¬
2. é‡è¦ç‰ˆæœ¬æ‰“æ ‡ç­¾ä¿ç•™
3. åˆå¹¶è¿ç»­å°æ”¹åŠ¨
4. é™åˆ¶ç‰ˆæœ¬æ€»æ•°ï¼ˆ100ä¸ªï¼‰

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

å®Œæˆé˜¶æ®µ2åï¼Œè¿›å…¥**é˜¶æ®µ3ï¼šè®¾å®šç™¾ç§‘ç³»ç»Ÿ**å¼€å‘ï¼ŒåŒ…æ‹¬ï¼š
- è§’è‰²å¡ç®¡ç†
- ä¸–ç•Œè§‚è®¾å®š
- è®¾å®šæ¨¡æ¿åº“
- å…³ç³»å›¾è°±

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-16  
**æœ€åæ›´æ–°**: 2025-10-16  
**çŠ¶æ€**: â¸ï¸ å¾…å¼€å§‹  
**å‰ç½®ä¾èµ–**: é˜¶æ®µ1å®Œæˆ

