# Scripts ä½¿ç”¨è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ init/           # åˆå§‹åŒ–å’Œç¯å¢ƒè®¾ç½®
â”œâ”€â”€ testing/        # æµ‹è¯•ç›¸å…³è„šæœ¬
â”œâ”€â”€ deployment/     # éƒ¨ç½²ç›¸å…³è„šæœ¬
â”œâ”€â”€ data/           # æ•°æ®å¤„ç†è„šæœ¬
â”œâ”€â”€ utils/          # å·¥å…·è„šæœ¬
â”œâ”€â”€ docs/           # æ–‡æ¡£
â”œâ”€â”€ README.md       # è¯¦ç»†æ–‡æ¡£
â””â”€â”€ QUICKSTART.md   # å¿«é€Ÿå¼€å§‹æŒ‡å—
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–æœ¬åœ°æµ‹è¯•ç¯å¢ƒ

```bash
# æ¨èï¼šä½¿ç”¨ Python è„šæœ¬ï¼ˆè·¨å¹³å°ï¼‰
python scripts/init/setup_local_test_data.py

# Windows
scripts\init\setup_local_test_data.bat

# Linux/Mac
./scripts/init/setup_local_test_data.sh
```

### 2. è¿è¡Œæµ‹è¯•

```bash
# å¿«é€ŸéªŒè¯
python scripts/testing/quick_verify.py

# å®Œæ•´æµ‹è¯•å¥—ä»¶
python scripts/testing/run_tests.py

# é›†æˆæµ‹è¯•å‡†å¤‡
python scripts/testing/setup_integration_tests.py
```

### 3. æ•°æ®å¯¼å…¥

```bash
# å¯¼å…¥æµ‹è¯•ç”¨æˆ·
go run scripts/testing/import_test_users.go

# å¯¼å…¥å°è¯´æ•°æ®
python scripts/data/import_novels.py --file data/novels_100.json
```

---

## ğŸ“‚ ç›®å½•è¯¦ç»†è¯´æ˜

### init/ - åˆå§‹åŒ–è„šæœ¬

| è„šæœ¬ | è¯´æ˜ | å¹³å° |
|------|------|------|
| `setup_local_test_data.py` | ä¸€é”®åˆå§‹åŒ–æµ‹è¯•æ•°æ® | è·¨å¹³å° |
| `setup_local_test_data.bat` | Windows æ‰¹å¤„ç†ç‰ˆæœ¬ | Windows |
| `setup_local_test_data.sh` | Shell è„šæœ¬ç‰ˆæœ¬ | Linux/Mac |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# å®Œæ•´åˆå§‹åŒ–
python scripts/init/setup_local_test_data.py

# ä»…å¯¼å…¥å°è¯´ï¼Œè·³è¿‡ç”¨æˆ·
python scripts/init/setup_local_test_data.py --skip-users

# è‡ªå®šä¹‰æ•°æ®æ–‡ä»¶
python scripts/init/setup_local_test_data.py --novels-file data/novels_500.json
```

---

### testing/ - æµ‹è¯•è„šæœ¬

#### å¿«é€ŸéªŒè¯

| è„šæœ¬ | è¯´æ˜ |
|------|------|
| `quick_verify.py` | å¿«é€ŸéªŒè¯é¡¹ç›®çŠ¶æ€ |
| `quick_verify.bat/sh` | å¹³å°ç‰¹å®šç‰ˆæœ¬ |

#### é›†æˆæµ‹è¯•

| è„šæœ¬ | è¯´æ˜ |
|------|------|
| `setup_integration_tests.py` | å‡†å¤‡é›†æˆæµ‹è¯•ç¯å¢ƒ |
| `run_tests.py` | è¿è¡Œé›†æˆæµ‹è¯•å¥—ä»¶ |
| `run_all_scenarios.bat` | è¿è¡Œæ‰€æœ‰åœºæ™¯æµ‹è¯• |
| `run_single_scenario.bat` | è¿è¡Œå•ä¸ªåœºæ™¯æµ‹è¯• |

#### ç”¨æˆ·ç®¡ç†

| è„šæœ¬ | è¯´æ˜ |
|------|------|
| `import_test_users.go` | å¯¼å…¥æµ‹è¯•ç”¨æˆ·ï¼ˆGo ç‰ˆæœ¬ï¼‰|
| `import_users_direct.py` | ç›´æ¥å¯¼å…¥ç”¨æˆ·ï¼ˆPython ç‰ˆæœ¬ï¼‰|
| `check_users.py` | æ£€æŸ¥ç”¨æˆ·æ•°æ® |

#### æ•°æ®åº“æ¸…ç†

| è„šæœ¬ | è¯´æ˜ |
|------|------|
| `cleanup_database.py` | æ¸…ç†æµ‹è¯•æ•°æ® |
| `clean_and_reimport.py` | æ¸…ç†å¹¶é‡æ–°å¯¼å…¥ |

#### åŠŸèƒ½æµ‹è¯•

| è„šæœ¬ | è¯´æ˜ |
|------|------|
| `test_login_direct.py` | ç›´æ¥æµ‹è¯•ç™»å½• API |
| `test_reading_features.py` | æµ‹è¯•é˜…è¯»åŠŸèƒ½ |
| `test_bcrypt.py` | æµ‹è¯•å¯†ç åŠ å¯†å…¼å®¹æ€§ |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# 1. å‡†å¤‡æµ‹è¯•ç¯å¢ƒ
python scripts/testing/setup_integration_tests.py

# 2. è¿è¡Œæµ‹è¯•
python scripts/testing/run_tests.py

# 3. æµ‹è¯•ç‰¹å®šåŠŸèƒ½
python scripts/testing/test_login_direct.py
```

---

### data/ - æ•°æ®å¤„ç†è„šæœ¬

| è„šæœ¬ | è¯´æ˜ |
|------|------|
| `import_novels.py` | å¯¼å…¥å°è¯´æ•°æ® |
| `test_novel_import.py` | æµ‹è¯•å°è¯´å¯¼å…¥åŠŸèƒ½ |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# å¯¼å…¥å°è¯´
python scripts/data/import_novels.py --file data/novels_100.json

# è¯•è¿è¡Œï¼ˆä¸å®é™…å¯¼å…¥ï¼‰
python scripts/data/import_novels.py --file data/novels_100.json --dry-run
```

---

### deployment/ - éƒ¨ç½²è„šæœ¬

| è„šæœ¬ | è¯´æ˜ |
|------|------|
| `quick_deploy_mvp.sh` | å¿«é€Ÿéƒ¨ç½² MVP ç‰ˆæœ¬ |
| `deployment_check.sh` | éƒ¨ç½²å‰æ£€æŸ¥ |

---

## ğŸ’¡ å¸¸è§åœºæ™¯

### åœºæ™¯ 1ï¼šé¦–æ¬¡è®¾ç½®å¼€å‘ç¯å¢ƒ

```bash
# 1. åˆå§‹åŒ–æµ‹è¯•æ•°æ®
python scripts/init/setup_local_test_data.py

# 2. å¯åŠ¨æœåŠ¡å™¨
go run cmd/server/main.go

# 3. éªŒè¯ç¯å¢ƒ
python scripts/testing/quick_verify.py
```

### åœºæ™¯ 2ï¼šè¿è¡Œé›†æˆæµ‹è¯•

```bash
# 1. ç¡®ä¿æœåŠ¡å™¨è¿è¡Œ
go run cmd/server/main.go

# 2. å‡†å¤‡æµ‹è¯•ï¼ˆå¦‚æœéœ€è¦ï¼‰
python scripts/testing/setup_integration_tests.py

# 3. è¿è¡Œæµ‹è¯•
python scripts/testing/run_tests.py
```

### åœºæ™¯ 3ï¼šé‡ç½®æµ‹è¯•æ•°æ®

```bash
# 1. æ¸…ç†æ•°æ®åº“
python scripts/testing/cleanup_database.py

# 2. é‡æ–°å¯¼å…¥
python scripts/init/setup_local_test_data.py
```

### åœºæ™¯ 4ï¼šæµ‹è¯•ç‰¹å®šåŠŸèƒ½

```bash
# æµ‹è¯•ç™»å½•
python scripts/testing/test_login_direct.py

# æµ‹è¯•é˜…è¯»åŠŸèƒ½
python scripts/testing/test_reading_features.py

# æµ‹è¯•å¯†ç å…¼å®¹æ€§
python scripts/testing/test_bcrypt.py
```

---

## ğŸ”§ è„šæœ¬å¼€å‘è§„èŒƒ

### Python è„šæœ¬

- ä½¿ç”¨ UTF-8 ç¼–ç 
- æ”¯æŒå‘½ä»¤è¡Œå‚æ•°
- æä¾› `--help` é€‰é¡¹
- åŒ…å«æ¸…æ™°çš„è¾“å‡ºå’Œé”™è¯¯å¤„ç†

### æ‰¹å¤„ç†è„šæœ¬

- Windowsï¼š`.bat` æ–‡ä»¶
- Linux/Macï¼š`.sh` æ–‡ä»¶ï¼Œæ·»åŠ æ‰§è¡Œæƒé™
- æä¾›ä¸ Python ç‰ˆæœ¬å¯¹ç­‰çš„åŠŸèƒ½

### Go è„šæœ¬

- å¯ä»¥ç›´æ¥ç”¨ `go run` è¿è¡Œ
- æä¾›æ¸…æ™°çš„è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†æ–‡æ¡£**ï¼š`scripts/README.md`
- **å¿«é€Ÿå¼€å§‹**ï¼š`scripts/QUICKSTART.md`
- **æµ‹è¯•æŒ‡å—**ï¼š`doc/testing/é›†æˆæµ‹è¯•ä½¿ç”¨æŒ‡å—.md`
- **API æ–‡æ¡£**ï¼š`doc/api/`
- **å®æ–½æ–‡æ¡£**ï¼š`doc/implement/`

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒè¦æ±‚**ï¼š
   - Python 3.7+
   - Go 1.21+
   - MongoDB è¿è¡Œä¸­
   - Redis è¿è¡Œä¸­ï¼ˆå¦‚éœ€è¦ï¼‰

2. **æ•°æ®åº“**ï¼š
   - æµ‹è¯•ä½¿ç”¨ `qingyu_test` æ•°æ®åº“
   - ç”Ÿäº§ä½¿ç”¨ `qingyu` æ•°æ®åº“
   - ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒè¿è¡Œæµ‹è¯•è„šæœ¬ï¼

3. **é…ç½®æ–‡ä»¶**ï¼š
   - å¼€å‘ç¯å¢ƒï¼š`config/config.yaml`
   - æµ‹è¯•ç¯å¢ƒï¼š`config/config.test.yaml`

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šè„šæœ¬æ‰¾ä¸åˆ°æ¨¡å—

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### é—®é¢˜ï¼šMongoDB è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥ MongoDB æ˜¯å¦è¿è¡Œ
mongosh --eval "db.version()"

# Windows å¯åŠ¨ MongoDB
net start MongoDB
```

### é—®é¢˜ï¼šæ•°æ®å¯¼å…¥å¤±è´¥

```bash
# æ£€æŸ¥æ•°æ®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls data/novels_100.json

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆæ·»åŠ  -v å‚æ•°ï¼‰
python scripts/data/import_novels.py -v
```

---

**æœ€åæ›´æ–°**ï¼š2025-10-25  
**ç»´æŠ¤è€…**ï¼šé’ç¾½åç«¯å¼€å‘å›¢é˜Ÿ

