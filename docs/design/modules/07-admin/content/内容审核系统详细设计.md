# å†…å®¹å®¡æ ¸ç³»ç»Ÿè¯¦ç»†è®¾è®¡

> **æ¨¡å—**: 07 - ç®¡ç†
> **åŠŸèƒ½**: å†…å®¹å®¡æ ¸ç³»ç»Ÿ
> **å®Œæˆåº¦**: ğŸŸ¢ 80%

## ğŸ“‹ æ¦‚è¿°

å†…å®¹å®¡æ ¸ç³»ç»Ÿä¸ºç®¡ç†å‘˜æä¾›ä½œå“ã€è¯„è®ºç­‰å†…å®¹å®¡æ ¸åŠŸèƒ½ï¼Œæ”¯æŒè‡ªåŠ¨å®¡æ ¸å’Œäººå·¥å®¡æ ¸ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. å¾…å®¡æ ¸å†…å®¹

- **å¾…å®¡æ ¸åˆ—è¡¨**: æŸ¥çœ‹å¾…å®¡æ ¸å†…å®¹
- **å†…å®¹è¯¦æƒ…**: æŸ¥çœ‹å†…å®¹è¯¦æƒ…
- **å¿«é€Ÿå®¡æ ¸**: é€šè¿‡/æ‹’ç»å¿«æ·æ“ä½œ

### 2. å®¡æ ¸æ“ä½œ

- **å®¡æ ¸é€šè¿‡**: å†…å®¹å®¡æ ¸é€šè¿‡
- **å®¡æ ¸æ‹’ç»**: å†…å®¹å®¡æ ¸æ‹’ç»ï¼ˆéœ€è¯´æ˜åŸå› ï¼‰
- **é€€å›ä¿®æ”¹**: é€€å›ä½œè€…ä¿®æ”¹

### 3. æ•æ„Ÿè¯ç®¡ç†

- **æ•æ„Ÿè¯åˆ—è¡¨**: ç®¡ç†æ•æ„Ÿè¯åº“
- **æ·»åŠ æ•æ„Ÿè¯**: æ·»åŠ æ–°çš„æ•æ„Ÿè¯
- **åˆ é™¤æ•æ„Ÿè¯**: åˆ é™¤æ•æ„Ÿè¯

### 4. ä¸¾æŠ¥å¤„ç†

- **ä¸¾æŠ¥åˆ—è¡¨**: æŸ¥çœ‹ä¸¾æŠ¥åˆ—è¡¨
- **å¤„ç†ä¸¾æŠ¥**: å¤„ç†ç”¨æˆ·ä¸¾æŠ¥

## ğŸ“Š æ•°æ®æ¨¡å‹

### ContentReview (å†…å®¹å®¡æ ¸)

```go
type ContentReview struct {
    ID              primitive.ObjectID   `bson:"_id,omitempty" json:"id"`
    ContentType     ContentType         `bson:"content_type" json:"contentType"`
    ContentID       primitive.ObjectID   `bson:"content_id" json:"contentId"`
    AuthorID        primitive.ObjectID   `bson:"author_id" json:"authorId"`

    // å®¡æ ¸ä¿¡æ¯
    Status          ReviewStatus         `bson:"status" json:"status"`
    ReviewerID      *primitive.ObjectID  `bson:"reviewer_id,omitempty" json:"reviewerId,omitempty"`
    ReviewResult    string               `bson:"review_result,omitempty" json:"reviewResult,omitempty"`
    ReviewedAt      *time.Time           `bson:"reviewed_at,omitempty" json:"reviewedAt,omitempty"`

    // æ•æ„Ÿè¯æ£€æµ‹
    SensitiveWords  []string             `bson:"sensitive_words,omitempty" json:"sensitiveWords,omitempty"`

    // æäº¤ä¿¡æ¯
    SubmittedAt     time.Time            `bson:"submitted_at" json:"submittedAt"`

    CreatedAt       time.Time            `bson:"created_at" json:"createdAt"`
    UpdatedAt       time.Time            `bson:"updated_at" json:"updatedAt"`
}

type ContentType string
const (
    ContentTypeBook      ContentType = "book"
    ContentTypeChapter   ContentType = "chapter"
    ContentTypeComment   ContentType = "comment"
    ContentTypeReview    ContentType = "review"
)

type ReviewStatus string
const (
    ReviewStatusPending   ReviewStatus = "pending"
    ReviewStatusApproved  ReviewStatus = "approved"
    ReviewStatusRejected  ReviewStatus = "rejected"
    ReviewStatusReturned  ReviewStatus = "returned"  // é€€å›ä¿®æ”¹
)
```

### SensitiveWord (æ•æ„Ÿè¯)

```go
type SensitiveWord struct {
    ID              primitive.ObjectID   `bson:"_id,omitempty" json:"id"`
    Word            string               `bson:"word" json:"word"`
    Category        WordCategory         `bson:"category" json:"category"`
    Level           WordLevel            `bson:"level" json:"level"`
    IsEnabled       bool                 `bson:"is_enabled" json:"isEnabled"`
    CreatedAt       time.Time            `bson:"created_at" json:"createdAt"`
    UpdatedAt       time.Time            `bson:"updated_at" json:"updatedAt"`
}

type WordCategory string
const (
    CategoryPolitics  WordCategory = "politics"
    CategoryPorn      WordCategory = "porn"
    CategoryViolence  WordCategory = "violence"
    CategorySpam      WordCategory = "spam"
)

type WordLevel string
const (
    LevelLow      WordLevel = "low"      // è­¦å‘Š
    LevelMedium   WordLevel = "medium"   // éšè—
    LevelHigh     WordLevel = "high"     // åˆ é™¤
)
```

## ğŸŒ APIç«¯ç‚¹

### å†…å®¹å®¡æ ¸

| æ–¹æ³• | è·¯å¾„ | æè¿° | è®¤è¯ |
|------|------|------|------|
| GET | /api/v1/admin/reviews/pending | è·å–å¾…å®¡æ ¸åˆ—è¡¨ | æ˜¯(ç®¡ç†å‘˜) |
| GET | /api/v1/admin/reviews/:id | è·å–å®¡æ ¸è¯¦æƒ… | æ˜¯(ç®¡ç†å‘˜) |
| PUT | /api/v1/admin/reviews/:id/approve | å®¡æ ¸é€šè¿‡ | æ˜¯(ç®¡ç†å‘˜) |
| PUT | /api/v1/admin/reviews/:id/reject | å®¡æ ¸æ‹’ç» | æ˜¯(ç®¡ç†å‘˜) |
| PUT | /api/v1/admin/reviews/:id/return | é€€å›ä¿®æ”¹ | æ˜¯(ç®¡ç†å‘˜) |

### æ•æ„Ÿè¯ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° | è®¤è¯ |
|------|------|------|------|
| GET | /api/v1/admin/sensitive-words | è·å–æ•æ„Ÿè¯åˆ—è¡¨ | æ˜¯(ç®¡ç†å‘˜) |
| POST | /api/v1/admin/sensitive-words | æ·»åŠ æ•æ„Ÿè¯ | æ˜¯(ç®¡ç†å‘˜) |
| PUT | /api/v1/admin/sensitive-words/:id | æ›´æ–°æ•æ„Ÿè¯ | æ˜¯(ç®¡ç†å‘˜) |
| DELETE | /api/v1/admin/sensitive-words/:id | åˆ é™¤æ•æ„Ÿè¯ | æ˜¯(ç®¡ç†å‘˜) |

### ä¸¾æŠ¥å¤„ç†

| æ–¹æ³• | è·¯å¾„ | æè¿° | è®¤è¯ |
|------|------|------|------|
| GET | /api/v1/admin/reports | è·å–ä¸¾æŠ¥åˆ—è¡¨ | æ˜¯(ç®¡ç†å‘˜) |
| GET | /api/v1/admin/reports/:id | è·å–ä¸¾æŠ¥è¯¦æƒ… | æ˜¯(ç®¡ç†å‘˜) |
| PUT | /api/v1/admin/reports/:id/handle | å¤„ç†ä¸¾æŠ¥ | æ˜¯(ç®¡ç†å‘˜) |

## ğŸ”„ æ ¸å¿ƒæµç¨‹

### å†…å®¹å®¡æ ¸æµç¨‹

```
1. ä½œè€…æäº¤å†…å®¹
   â†“
2. è‡ªåŠ¨å®¡æ ¸ï¼ˆæ•æ„Ÿè¯æ£€æµ‹ï¼‰
   â†“
3a. å¦‚æœé€šè¿‡æ•æ„Ÿè¯æ£€æµ‹ï¼Œç›´æ¥å‘å¸ƒ
   â†“
3b. å¦‚æœæœªé€šè¿‡ï¼Œè¿›å…¥å¾…å®¡æ ¸é˜Ÿåˆ—
   â†“
4. ç®¡ç†å‘˜å®¡æ ¸
   â†“
5a. å®¡æ ¸é€šè¿‡ï¼Œå‘å¸ƒå†…å®¹
   â†“
5b. å®¡æ ¸æ‹’ç»ï¼Œé€šçŸ¥ä½œè€…
   â†“
5c. é€€å›ä¿®æ”¹ï¼Œé€šçŸ¥ä½œè€…
```

### æ•æ„Ÿè¯æ£€æµ‹æµç¨‹

```
1. å†…å®¹æäº¤
   â†“
2. åˆ†è¯
   â†“
3. åŒ¹é…æ•æ„Ÿè¯åº“
   â†“
4. è®¡ç®—æ•æ„Ÿåº¦åˆ†æ•°
   â†“
5. åˆ¤æ–­æ˜¯å¦è¿è§„
   â†“
6. è®°å½•æ£€æµ‹æ—¥å¿—
```

## ğŸ”§ ä¸šåŠ¡è§„åˆ™

### å®¡æ ¸è§„åˆ™

- æ–°ä½œå“éœ€è¦å®¡æ ¸
- ä¿®æ”¹ä½œå“éœ€è¦é‡æ–°å®¡æ ¸
- è¯„è®ºå®æ—¶å®¡æ ¸ï¼ˆæ•æ„Ÿè¯æ£€æµ‹ï¼‰

### æ•æ„Ÿè¯è§„åˆ™

- é«˜çº§åˆ«æ•æ„Ÿè¯ï¼šç›´æ¥æ‹’ç»
- ä¸­çº§åˆ«æ•æ„Ÿè¯ï¼šè¿›å…¥äººå·¥å®¡æ ¸
- ä½çº§åˆ«æ•æ„Ÿè¯ï¼šè­¦å‘Š

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

- æ—¥å‡å®¡æ ¸é‡
- å®¡æ ¸é€šè¿‡ç‡
- å®¡æ ¸å¹³å‡æ—¶é•¿
- ä¸¾æŠ¥å¤„ç†ç‡

---

**æ–‡æ¡£ç»´æŠ¤**: é’ç¾½åç«¯æ¶æ„å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-01-06
