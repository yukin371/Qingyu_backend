# 测试环境配置模板
# 使用方法：复制此文件为 config.test.yaml 并填入真实的API密钥

server:
  port: "8080"
  mode: debug  # 测试环境使用debug模式
  timeout: 30s

mongodb:
  uri: "mongodb://localhost:27017"
  database: "qingyu_test"
  timeout: 30

redis:
  addr: "localhost:6379"
  password: ""
  db: 1  # 使用不同的DB避免与开发环境冲突
  poolsize: 10

jwt:
  secret: "test-secret-key-do-not-use-in-production"
  expire: 7200  # 2小时
  issuer: "qingyu-test"

log:
  level: "debug"
  format: "json"
  output: "stdout"
  mode: "strict"
  request:
    enable_body: true
    max_body_size: 4096
    skip_paths:
      - "/health"
      - "/metrics"
      - "/swagger"
    body_allow_paths: []
  redact_keys:
    - "authorization"
    - "password"
    - "token"
    - "cookie"

# 测试特定配置
test:
  cleanup_after_test: true
  parallel_tests: true
  timeout: 300  # 5分钟测试超时

# 审核配置（测试）
audit:
  enabled: true
  realtime_check: true
  auto_review_threshold: 0.8

# 存储配置（测试）
storage:
  type: "local"
  local_path: "./test_uploads"
  max_size: 10485760  # 10MB

# 性能配置（测试）
performance:
  max_goroutines: 100
  request_timeout: 30s
  db_timeout: 10s

# 外部API配置（AI提供商 - 测试）
external_api:
  default_provider: "deepseek"  # 使用DeepSeek作为默认提供商
  providers:
    deepseek:
      name: "deepseek"
      api_key: "YOUR_DEEPSEEK_API_KEY_HERE"  # 请在 https://platform.deepseek.com 申请API Key
      base_url: "https://api.deepseek.com"
      enabled: true
      priority: 1
      supported_models:
        - "deepseek-chat"        # DeepSeek-V3.2-Exp 非思考模式
        - "deepseek-reasoner"    # DeepSeek-V3.2-Exp 思考模式
    gemini:
      name: "gemini"
      api_key: "YOUR_GEMINI_API_KEY_HERE"  # 备用提供商
      base_url: "https://generativelanguage.googleapis.com"
      enabled: false
      priority: 2
      supported_models:
        - "gemini-1.5-flash"
        - "gemini-1.5-pro"
        - "gemini-1.0-pro"

