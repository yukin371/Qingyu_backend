# 青羽写作系统配置文件

# 数据库配置
database:
  # Docker环境使用服务名，本地开发使用localhost
  uri: "mongodb://localhost:27017"  # Docker: mongodb | 本地: localhost
  name: "Qingyu_backend"
  connect_timeout: 10s
  max_pool_size: 100
  min_pool_size: 10
  max_conn_idle_time: 60s
  retry_writes: true
  retry_reads: true

# 服务器配置
server:
  port: "8080"
  mode: "debug"  # debug or release

# JWT配置
jwt:
  secret: "qingyu_secret_key"  # 生产环境请修改为强密钥
  expiration_hours: 24

# AI配置（测试）
ai:
  api_key: "${OPENAI_API_KEY}"  # 开发环境测试密钥，支持环境变量
  base_url: "https://api.openai.com/v1"  # 与Python一致
  model: "gpt-4-turbo-preview"
  max_tokens: 2000
  temperature: 0.7

  # Python AI服务配置
  python_service:
    host: "localhost"  # 或Docker服务名如"python-ai-service"
    grpc_port: 50052   # Python gRPC端口 (Go端口+1)
    embedding_model: "BAAI/bge-large-zh-v1.5"
    milvus_host: "localhost"  # Docker: milvus
    milvus_port: 19530
    redis_host: "localhost"  # Docker: redis
    redis_port: 6379

# Redis配置
redis:
  host: "localhost"  # Docker: redis | 本地: localhost
  port: 6379
  password: ""
  db: 0
  pool_size: 10
  min_idle_conns: 5
  max_idle_conns: 10
  dial_timeout: 5s
  read_timeout: 3s
  write_timeout: 3s
  pool_timeout: 4s
  max_retries: 3
  min_retry_backoff: 8ms
  max_retry_backoff: 512ms
