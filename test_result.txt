?   	Qingyu_backend	[no test files]
?   	Qingyu_backend/api/v1/admin	[no test files]
?   	Qingyu_backend/api/v1/ai	[no test files]
?   	Qingyu_backend/api/v1/bookstore	[no test files]
?   	Qingyu_backend/api/v1/reader	[no test files]
?   	Qingyu_backend/api/v1/recommendation	[no test files]
?   	Qingyu_backend/api/v1/shared	[no test files]
?   	Qingyu_backend/api/v1/system	[no test files]
?   	Qingyu_backend/api/v1/user	[no test files]
?   	Qingyu_backend/api/v1/writer	[no test files]
?   	Qingyu_backend/cmd/init_test_data	[no test files]
?   	Qingyu_backend/cmd/server	[no test files]
?   	Qingyu_backend/cmd/test_quota_in_service	[no test files]
ok  	Qingyu_backend/config	(cached)
go : # Qingyu_backend/core [Qingyu_backend/core.test]
所在位置 C:\Users\yukin\AppData\Local\Temp\ps-script-24bb3a68-1af0-4b0f-bb59-b6b3bb3f75ce.ps1:95 字符: 1
+ go test ./... -timeout 20m 2>&1 | Out-File test_result.txt -Encoding  ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (# Qingyu_backen...kend/core.test]:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
core\db_test.go:37:22: container.MongoClient undefined (type *container.ServiceContainer has no field or method MongoCl
ient, but does have unexported field mongoClient)
FAIL	Qingyu_backend/core [build failed]
?   	Qingyu_backend/docs	[no test files]
?   	Qingyu_backend/global	[no test files]
ok  	Qingyu_backend/middleware	(cached)
?   	Qingyu_backend/migration	[no test files]
?   	Qingyu_backend/migration/examples	[no test files]
?   	Qingyu_backend/migration/seeds	[no test files]
?   	Qingyu_backend/models/ai	[no test files]
?   	Qingyu_backend/models/audit	[no test files]
?   	Qingyu_backend/models/bookstore	[no test files]
?   	Qingyu_backend/models/reader	[no test files]
?   	Qingyu_backend/models/recommendation	[no test files]
?   	Qingyu_backend/models/shared	[no test files]
?   	Qingyu_backend/models/shared/admin	[no test files]
?   	Qingyu_backend/models/shared/auth	[no test files]
?   	Qingyu_backend/models/shared/messaging	[no test files]
?   	Qingyu_backend/models/shared/recommendation	[no test files]
?   	Qingyu_backend/models/shared/storage	[no test files]
?   	Qingyu_backend/models/shared/wallet	[no test files]
?   	Qingyu_backend/models/stats	[no test files]
?   	Qingyu_backend/models/users	[no test files]
?   	Qingyu_backend/models/writer	[no test files]
?   	Qingyu_backend/pkg/audit	[no test files]
ok  	Qingyu_backend/pkg/cache	(cached)
?   	Qingyu_backend/pkg/errors	[no test files]
?   	Qingyu_backend/pkg/grpc	[no test files]
?   	Qingyu_backend/pkg/grpc/pb	[no test files]
?   	Qingyu_backend/pkg/metrics	[no test files]
ok  	Qingyu_backend/pkg/response	(cached)
ok  	Qingyu_backend/pkg/validator	(cached)
?   	Qingyu_backend/repository/interfaces	[no test files]
?   	Qingyu_backend/repository/interfaces/ai	[no test files]
?   	Qingyu_backend/repository/interfaces/audit	[no test files]
?   	Qingyu_backend/repository/interfaces/bookstore	[no test files]
?   	Qingyu_backend/repository/interfaces/infrastructure	[no test files]
?   	Qingyu_backend/repository/interfaces/reading	[no test files]
?   	Qingyu_backend/repository/interfaces/recommendation	[no test files]
?   	Qingyu_backend/repository/interfaces/shared	[no test files]
?   	Qingyu_backend/repository/interfaces/shared/mocks	[no test files]
?   	Qingyu_backend/repository/interfaces/stats	[no test files]
?   	Qingyu_backend/repository/interfaces/user	[no test files]
?   	Qingyu_backend/repository/interfaces/writing	[no test files]
?   	Qingyu_backend/repository/mongodb	[no test files]
?   	Qingyu_backend/repository/mongodb/ai	[no test files]
?   	Qingyu_backend/repository/mongodb/bookstore	[no test files]
?   	Qingyu_backend/repository/mongodb/reading	[no test files]
?   	Qingyu_backend/repository/mongodb/recommendation	[no test files]
?   	Qingyu_backend/repository/mongodb/shared	[no test files]
?   	Qingyu_backend/repository/mongodb/stats	[no test files]
?   	Qingyu_backend/repository/mongodb/user	[no test files]
?   	Qingyu_backend/repository/mongodb/writing	[no test files]
?   	Qingyu_backend/repository/querybuilder	[no test files]
?   	Qingyu_backend/router	[no test files]
?   	Qingyu_backend/router/admin	[no test files]
?   	Qingyu_backend/router/ai	[no test files]
?   	Qingyu_backend/router/bookstore	[no test files]
?   	Qingyu_backend/router/project	[no test files]
?   	Qingyu_backend/router/reader	[no test files]
?   	Qingyu_backend/router/recommendation	[no test files]
?   	Qingyu_backend/router/shared	[no test files]
?   	Qingyu_backend/router/system	[no test files]
?   	Qingyu_backend/router/user	[no test files]
?   	Qingyu_backend/router/writer	[no test files]
?   	Qingyu_backend/scripts	[no test files]
?   	Qingyu_backend/scripts/testing	[no test files]
?   	Qingyu_backend/service	[no test files]
ok  	Qingyu_backend/service/ai	(cached)
ok  	Qingyu_backend/service/ai/adapter	(cached)
?   	Qingyu_backend/service/ai/dto	[no test files]
?   	Qingyu_backend/service/audit	[no test files]
?   	Qingyu_backend/service/base	[no test files]
?   	Qingyu_backend/service/bookstore	[no test files]
?   	Qingyu_backend/service/container	[no test files]
?   	Qingyu_backend/service/document	[no test files]
?   	Qingyu_backend/service/events	[no test files]
?   	Qingyu_backend/service/interfaces	[no test files]
?   	Qingyu_backend/service/interfaces/ai	[no test files]
?   	Qingyu_backend/service/interfaces/audit	[no test files]
?   	Qingyu_backend/service/interfaces/base	[no test files]
?   	Qingyu_backend/service/interfaces/user	[no test files]
?   	Qingyu_backend/service/project	[no test files]
?   	Qingyu_backend/service/reading	[no test files]
?   	Qingyu_backend/service/reading/stats	[no test files]
?   	Qingyu_backend/service/recommendation	[no test files]
?   	Qingyu_backend/service/shared	[no test files]
ok  	Qingyu_backend/service/shared/admin	(cached)
ok  	Qingyu_backend/service/shared/auth	(cached)
ok  	Qingyu_backend/service/shared/messaging	(cached)
?   	Qingyu_backend/service/shared/metrics	[no test files]
ok  	Qingyu_backend/service/shared/recommendation	(cached)
?   	Qingyu_backend/service/shared/search	[no test files]
?   	Qingyu_backend/service/shared/stats	[no test files]
ok  	Qingyu_backend/service/shared/storage	(cached)
ok  	Qingyu_backend/service/shared/wallet	(cached)
ok  	Qingyu_backend/service/user	(cached)
?   	Qingyu_backend/service/user/mocks	[no test files]
?   	Qingyu_backend/service/writer	[no test files]
ok  	Qingyu_backend/test	(cached)
--- FAIL: TestProjectApi_CreateProject (0.00s)
    --- FAIL: TestProjectApi_CreateProject/鎴愬姛鍒涘缓椤圭洰 (0.00s)
        project_api_test.go:136: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/api/project_api_test.go:136
            	Error:      	Not equal: 
            	            	expected: 201
            	            	actual  : 500
            	Test:       	TestProjectApi_CreateProject/鎴愬姛鍒涘缓椤圭洰
        project_api_test.go:72: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/api/project_api_test.go:72
            	            				E:/Github/Qingyu/Qingyu_backend/test/api/project_api_test.go:142
            	Error:      	Not equal: 
            	            	expected: 201
            	            	actual  : 500
            	Test:       	TestProjectApi_CreateProject/鎴愬姛鍒涘缓椤圭洰
        project_api_test.go:73: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/api/project_api_test.go:73
            	            				E:/Github/Qingyu/Qingyu_backend/test/api/project_api_test.go:142
            	Error:      	Not equal: 
            	            	expected: "鍒涘缓鎴愬姛"
            	            	actual  : "鍒涘缓澶辫触"
            	            	
            	            	Diff:
            	            	--- Expected
            	            	+++ Actual
            	            	@@ -1 +1 @@
            	            	-鍒涘缓鎴愬姛
            	            	+鍒涘缓澶辫触
            	Test:       	TestProjectApi_CreateProject/鎴愬姛鍒涘缓椤圭洰
panic: interface conversion: interface {} is nil, not map[string]interface {} [recovered, repanicked]

goroutine 167 [running]:
testing.tRunner.func1.2({0x7ff7be5cbae0, 0xc00058aab0})
	C:/Program Files/Go/src/testing/testing.go:1872 +0x239
testing.tRunner.func1()
	C:/Program Files/Go/src/testing/testing.go:1875 +0x35b
panic({0x7ff7be5cbae0?, 0xc00058aab0?})
	C:/Program Files/Go/src/runtime/panic.go:783 +0x132
Qingyu_backend/test/api.TestProjectApi_CreateProject.func2(0xc00016d880, 0xc0003a8390)
	E:/Github/Qingyu/Qingyu_backend/test/api/project_api_test.go:74 +0x18a
Qingyu_backend/test/api.TestProjectApi_CreateProject.func7(0xc00016d880)
	E:/Github/Qingyu/Qingyu_backend/test/api/project_api_test.go:142 +0x567
testing.tRunner(0xc00016d880, 0xc0003d97f0)
	C:/Program Files/Go/src/testing/testing.go:1934 +0xc3
created by testing.(*T).Run in goroutine 166
	C:/Program Files/Go/src/testing/testing.go:1997 +0x44b
FAIL	Qingyu_backend/test/api	0.794s
?   	Qingyu_backend/test/examples	[no test files]
?   	Qingyu_backend/test/fixtures	[no test files]
[Config] Using test config: ../../config/config.test.yaml
[Config] Using test config: ../../config/config.test.yaml
InitDB: MongoDB鍒濆鍖栧凡杩佺Щ鍒癝erviceContainer
[Config] Using test config: ../../config/config.test.yaml
InitDB: MongoDB鍒濆鍖栧凡杩佺Щ鍒癝erviceContainer
--- FAIL: TestRedisServiceContainerIntegration (0.00s)
    --- FAIL: TestRedisServiceContainerIntegration/閰嶇疆鍔犺浇 (0.00s)
        redis_integration_test.go:256: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/integration/redis_integration_test.go:256
            	Error:      	Not equal: 
            	            	expected: "localhost"
            	            	actual  : ""
            	            	
            	            	Diff:
            	            	--- Expected
            	            	+++ Actual
            	            	@@ -1 +1 @@
            	            	-localhost
            	            	+
            	Test:       	TestRedisServiceContainerIntegration/閰嶇疆鍔犺浇
        redis_integration_test.go:257: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/integration/redis_integration_test.go:257
            	Error:      	Not equal: 
            	            	expected: 6379
            	            	actual  : 0
            	Test:       	TestRedisServiceContainerIntegration/閰嶇疆鍔犺浇
[Config] Using test config: ../../config/config.test.yaml
InitDB: MongoDB鍒濆鍖栧凡杩佺Щ鍒癝erviceContainer
璀﹀憡: Redis瀹㈡埛绔垵濮嬪寲澶辫触: 鍒涘缓Redis瀹㈡埛绔け璐? redis: connection failed: dial tcp :0: connectex: The requested address is not valid in its context.
璀﹀憡: Redis瀹㈡埛绔湭鍒濆鍖栵紝璺宠繃AuthService鍒涘缓
璀﹀憡: Redis瀹㈡埛绔湭鍒濆鍖栵紝璺宠繃RecommendationService鍒涘缓
鍒濆鍖?StorageService...
  鉁?StorageService 宸叉敞鍐?  鉁?StorageService瀹屾暣鍒濆鍖栧畬鎴愶紙LocalBackend锛?鎻愮ず: AdminService銆丮essagingService灏嗗湪Phase2鍚庣画浠诲姟涓畬鏁村疄鐜板苟娉ㄥ唽
Successfully initialized all services
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.748+0800","caller":"router/enter.go:41","msg":"鉁?鏈嶅姟瀹瑰櫒宸插垵濮嬪寲锛屽紑濮嬫敞鍐岃矾鐢?.."}
{"level":"\u001b[33mWARN\u001b[0m","timestamp":"2025-10-30T20:49:11.748+0800","caller":"router/enter.go:62","msg":"鈿?鍏变韩鏈嶅姟璺敱鏈敞鍐岋紙鏈嶅姟鏈厤缃級"}
{"level":"\u001b[33mWARN\u001b[0m","timestamp":"2025-10-30T20:49:11.748+0800","caller":"router/enter.go:64","msg":"  - AuthService","error":"AuthService鏈垵濮嬪寲"}
[GIN-debug] GET    /api/v1/bookstore/homepage --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetHomepage-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/books/search --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).SearchBooks-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/books/recommended --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetRecommendedBooks-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/books/featured --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetFeaturedBooks-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/books/:id --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetBookByID-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/categories/tree --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetCategoryTree-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/categories/:id/books --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetBooksByCategory-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/categories/:id --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetCategoryByID-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/banners --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetActiveBanners-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/realtime --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetRealtimeRanking-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/weekly --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetWeeklyRanking-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/monthly --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetMonthlyRanking-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/newbie --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetNewbieRanking-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/:type --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetRankingByType-fm (4 handlers)
[GIN-debug] POST   /api/v1/bookstore/books/:id/view --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).IncrementBookView-fm (5 handlers)
[GIN-debug] POST   /api/v1/bookstore/banners/:id/click --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).IncrementBannerClick-fm (5 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.748+0800","caller":"router/enter.go:93","msg":"鉁?涔﹀簵璺敱宸叉敞鍐屽埌: /api/v1/bookstore/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.748+0800","caller":"router/enter.go:94","msg":"  - /api/v1/bookstore/homepage (涔﹀煄棣栭〉)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.748+0800","caller":"router/enter.go:95","msg":"  - /api/v1/bookstore/books/* (涔︾睄鍒楄〃銆佹悳绱€佽鎯?"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.748+0800","caller":"router/enter.go:96","msg":"  - /api/v1/bookstore/categories/* (鍒嗙被)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.748+0800","caller":"router/enter.go:97","msg":"  - /api/v1/bookstore/rankings/* (鎺掕姒?"}
[GIN-debug] GET    /api/v1/reader/collections/public --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetPublicCollections-fm (4 handlers)
[GIN-debug] GET    /api/v1/reader/books      --> Qingyu_backend/api/v1/reader.(*BooksAPI).GetBookshelf-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/books/recent --> Qingyu_backend/api/v1/reader.(*BooksAPI).GetRecentReading-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/books/unfinished --> Qingyu_backend/api/v1/reader.(*BooksAPI).GetUnfinishedBooks-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/books/finished --> Qingyu_backend/api/v1/reader.(*BooksAPI).GetFinishedBooks-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/books/:bookId --> Qingyu_backend/api/v1/reader.(*BooksAPI).AddToBookshelf-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/books/:bookId --> Qingyu_backend/api/v1/reader.(*BooksAPI).RemoveFromBookshelf-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/books/:bookId/like --> Qingyu_backend/api/v1/reader.(*LikeAPI).LikeBook-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/books/:bookId/like --> Qingyu_backend/api/v1/reader.(*LikeAPI).UnlikeBook-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/books/:bookId/like/info --> Qingyu_backend/api/v1/reader.(*LikeAPI).GetBookLikeInfo-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters   --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetBookChapters-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/:id --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetChapterByID-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/:id/content --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetChapterContent-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/:id/navigation --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetNavigationChapters-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/book/:bookId --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetBookChapters-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/book/:bookId/first --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetFirstChapter-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/book/:bookId/last --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetLastChapter-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/:bookId --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetReadingProgress-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/progress   --> Qingyu_backend/api/v1/reader.(*ProgressAPI).SaveReadingProgress-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/progress/time --> Qingyu_backend/api/v1/reader.(*ProgressAPI).UpdateReadingTime-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/recent --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetRecentReading-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/history --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetReadingHistory-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/stats --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetReadingStats-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/unfinished --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetUnfinishedBooks-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/finished --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetFinishedBooks-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/annotations --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).CreateAnnotation-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/annotations/:id --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).UpdateAnnotation-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/annotations/:id --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).DeleteAnnotation-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/annotations/batch --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).BatchCreateAnnotations-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/annotations/batch --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).BatchUpdateAnnotations-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/annotations/batch --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).BatchDeleteAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/notes --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetNotes-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/bookmarks --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetBookmarks-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/highlights --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetHighlights-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/book/:bookId --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetAnnotationsByBook-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/chapter/:chapterId --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetAnnotationsByChapter-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/recent --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetRecentAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/public --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetPublicAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/search --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).SearchNotes-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/stats --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetAnnotationStats-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/annotations/sync --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).SyncAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/export --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).ExportAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/bookmark/latest --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetLatestBookmark-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/settings   --> Qingyu_backend/api/v1/reader.(*SettingAPI).GetReadingSettings-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/settings   --> Qingyu_backend/api/v1/reader.(*SettingAPI).SaveReadingSettings-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/settings   --> Qingyu_backend/api/v1/reader.(*SettingAPI).UpdateReadingSettings-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/comments   --> Qingyu_backend/api/v1/reader.(*CommentAPI).CreateComment-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/comments   --> Qingyu_backend/api/v1/reader.(*CommentAPI).GetCommentList-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/comments/:id --> Qingyu_backend/api/v1/reader.(*CommentAPI).GetCommentDetail-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/comments/:id --> Qingyu_backend/api/v1/reader.(*CommentAPI).UpdateComment-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/comments/:id --> Qingyu_backend/api/v1/reader.(*CommentAPI).DeleteComment-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/comments/:id/reply --> Qingyu_backend/api/v1/reader.(*CommentAPI).ReplyComment-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/comments/:id/like --> Qingyu_backend/api/v1/reader.(*CommentAPI).LikeComment-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/comments/:id/like --> Qingyu_backend/api/v1/reader.(*CommentAPI).UnlikeComment-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/likes/books --> Qingyu_backend/api/v1/reader.(*LikeAPI).GetUserLikedBooks-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/likes/stats --> Qingyu_backend/api/v1/reader.(*LikeAPI).GetUserLikeStats-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/collections --> Qingyu_backend/api/v1/reader.(*CollectionAPI).AddCollection-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetCollections-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/collections/:id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).UpdateCollection-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/collections/:id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).DeleteCollection-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections/check/:book_id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).CheckCollected-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections/tags/:tag --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetCollectionsByTag-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections/stats --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetCollectionStats-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/collections/:id/share --> Qingyu_backend/api/v1/reader.(*CollectionAPI).ShareCollection-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/collections/:id/share --> Qingyu_backend/api/v1/reader.(*CollectionAPI).UnshareCollection-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/collections/folders --> Qingyu_backend/api/v1/reader.(*CollectionAPI).CreateFolder-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections/folders --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetFolders-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/collections/folders/:id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).UpdateFolder-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/collections/folders/:id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).DeleteFolder-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/reading-history --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).RecordReading-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/reading-history --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).GetReadingHistories-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/reading-history/stats --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).GetReadingStats-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/reading-history/:id --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).DeleteHistory-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/reading-history --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).ClearHistories-fm (5 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:136","msg":"鉁?闃呰鍣ㄨ矾鐢卞凡娉ㄥ唽鍒? /api/v1/reader/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:137","msg":"  - /api/v1/reader/books/* (涔︽灦绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:138","msg":"  - /api/v1/reader/chapters/* (绔犺妭鍐呭)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:139","msg":"  - /api/v1/reader/progress/* (闃呰杩涘害)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:140","msg":"  - /api/v1/reader/annotations/* (鏍囨敞绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:141","msg":"  - /api/v1/reader/settings/* (闃呰璁剧疆)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:143","msg":"  - /api/v1/reader/comments/* (璇勮绯荤粺)"}
{"level":"\u001b[33mWARN\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:150","msg":"鑾峰彇鎺ㄨ崘鏈嶅姟澶辫触","error":"RecommendationService鏈垵濮嬪寲"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:151","msg":"鎺ㄨ崘绯荤粺璺敱鏈敞鍐?}
[GIN-debug] POST   /api/v1/register          --> Qingyu_backend/api/v1/user.(*UserAPI).Register-fm (4 handlers)
[GIN-debug] POST   /api/v1/login             --> Qingyu_backend/api/v1/user.(*UserAPI).Login-fm (4 handlers)
[GIN-debug] GET    /api/v1/users/profile     --> Qingyu_backend/api/v1/user.(*UserAPI).GetProfile-fm (5 handlers)
[GIN-debug] PUT    /api/v1/users/profile     --> Qingyu_backend/api/v1/user.(*UserAPI).UpdateProfile-fm (5 handlers)
[GIN-debug] PUT    /api/v1/users/password    --> Qingyu_backend/api/v1/user.(*UserAPI).ChangePassword-fm (5 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:174","msg":"鉁?鐢ㄦ埛璺敱宸叉敞鍐屽埌: /api/v1/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:175","msg":"  - /api/v1/register (鐢ㄦ埛娉ㄥ唽)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:176","msg":"  - /api/v1/login (鐢ㄦ埛鐧诲綍)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:177","msg":"  - /api/v1/users/profile (涓汉淇℃伅)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:178","msg":"  - /api/v1/users/password (淇敼瀵嗙爜)"}
[GIN-debug] POST   /api/v1/projects          --> Qingyu_backend/api/v1/writer.(*ProjectApi).CreateProject-fm (5 handlers)
[GIN-debug] GET    /api/v1/projects          --> Qingyu_backend/api/v1/writer.(*ProjectApi).ListProjects-fm (5 handlers)
[GIN-debug] GET    /api/v1/projects/:id      --> Qingyu_backend/api/v1/writer.(*ProjectApi).GetProject-fm (5 handlers)
[GIN-debug] PUT    /api/v1/projects/:id      --> Qingyu_backend/api/v1/writer.(*ProjectApi).UpdateProject-fm (5 handlers)
[GIN-debug] DELETE /api/v1/projects/:id      --> Qingyu_backend/api/v1/writer.(*ProjectApi).DeleteProject-fm (5 handlers)
[GIN-debug] PUT    /api/v1/projects/:id/statistics --> Qingyu_backend/api/v1/writer.(*ProjectApi).UpdateProjectStatistics-fm (5 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:182","msg":"鉁?鏂囨。璺敱宸叉敞鍐屽埌: /api/v1/projects/"}
[GIN-debug] GET    /api/v1/ai/health         --> Qingyu_backend/api/v1/ai.(*SystemApi).HealthCheck-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/providers      --> Qingyu_backend/api/v1/ai.(*SystemApi).GetProviders-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/models         --> Qingyu_backend/api/v1/ai.(*SystemApi).GetModels-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/quota          --> Qingyu_backend/api/v1/ai.(*QuotaApi).GetQuotaInfo-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/quota/all      --> Qingyu_backend/api/v1/ai.(*QuotaApi).GetAllQuotas-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/quota/statistics --> Qingyu_backend/api/v1/ai.(*QuotaApi).GetQuotaStatistics-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/quota/transactions --> Qingyu_backend/api/v1/ai.(*QuotaApi).GetTransactionHistory-fm (5 handlers)
[GIN-debug] POST   /api/v1/ai/writing/continue --> Qingyu_backend/api/v1/ai.(*WritingApi).ContinueWriting-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/writing/continue/stream --> Qingyu_backend/api/v1/ai.(*WritingApi).ContinueWritingStream-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/writing/rewrite --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteText-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/writing/rewrite/stream --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteTextStream-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/chat           --> Qingyu_backend/api/v1/ai.(*ChatApi).Chat-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/chat/stream    --> Qingyu_backend/api/v1/ai.(*ChatApi).ChatStream-fm (6 handlers)
[GIN-debug] GET    /api/v1/ai/chat/sessions  --> Qingyu_backend/api/v1/ai.(*ChatApi).GetChatSessions-fm (6 handlers)
[GIN-debug] GET    /api/v1/ai/chat/sessions/:sessionId --> Qingyu_backend/api/v1/ai.(*ChatApi).GetChatHistory-fm (6 handlers)
[GIN-debug] DELETE /api/v1/ai/chat/sessions/:sessionId --> Qingyu_backend/api/v1/ai.(*ChatApi).DeleteChatSession-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/generate       --> Qingyu_backend/api/v1/ai.(*WritingApi).ContinueWriting-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/rewrite        --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteText-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/expand         --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteText-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/polish         --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteText-fm (6 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:204","msg":"鉁?AI鏈嶅姟璺敱宸叉敞鍐屽埌: /api/v1/ai/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:205","msg":"  - /api/v1/ai/writing/* (缁啓銆佹敼鍐?"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:206","msg":"  - /api/v1/ai/chat/* (鑱婂ぉ)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:207","msg":"  - /api/v1/ai/quota/* (閰嶉绠＄悊)"}
{"level":"\u001b[33mWARN\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:217","msg":"鈿?AdminService鏈厤缃?,"error":"AdminService鏈垵濮嬪寲"}
[GIN-debug] GET    /api/v1/admin/users       --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).ListUsers-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/users/:id   --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).GetUser-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/users/:id   --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).UpdateUser-fm (6 handlers)
[GIN-debug] DELETE /api/v1/admin/users/:id   --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).DeleteUser-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/users/:id/ban --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).BanUser-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/users/:id/unban --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).UnbanUser-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/users/:id/statistics --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetUserStatistics-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/quota/:userId --> Qingyu_backend/api/v1/admin.(*QuotaAdminAPI).GetUserQuotaDetails-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/quota/:userId --> Qingyu_backend/api/v1/admin.(*QuotaAdminAPI).UpdateUserQuota-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/quota/:userId/suspend --> Qingyu_backend/api/v1/admin.(*QuotaAdminAPI).SuspendUserQuota-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/quota/:userId/activate --> Qingyu_backend/api/v1/admin.(*QuotaAdminAPI).ActivateUserQuota-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/audit/pending --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).GetPendingAudits-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/audit/high-risk --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).GetHighRiskAudits-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/audit/statistics --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).GetAuditStatistics-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/audit/:id/review --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).ReviewAudit-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/audit/:id/appeal/review --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).ReviewAppeal-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/stats       --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetSystemStats-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/operation-logs --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetOperationLogs-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/config      --> Qingyu_backend/api/v1/admin.(*ConfigAPI).GetAllConfigs-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/config/:key --> Qingyu_backend/api/v1/admin.(*ConfigAPI).GetConfigByKey-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/config      --> Qingyu_backend/api/v1/admin.(*ConfigAPI).UpdateConfig-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/config/batch --> Qingyu_backend/api/v1/admin.(*ConfigAPI).BatchUpdateConfig-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/config/validate --> Qingyu_backend/api/v1/admin.(*ConfigAPI).ValidateConfig-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/config/backups --> Qingyu_backend/api/v1/admin.(*ConfigAPI).GetConfigBackups-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/config/restore --> Qingyu_backend/api/v1/admin.(*ConfigAPI).RestoreConfigBackup-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/config-legacy --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetSystemConfig-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/config-legacy --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).UpdateSystemConfig-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/withdraw/review --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).ReviewWithdraw-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/announcements --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetAnnouncements-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/announcements --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).CreateAnnouncement-fm (6 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:232","msg":"鉁?绠＄悊鍛樿矾鐢卞凡娉ㄥ唽鍒? /api/v1/admin/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:233","msg":"  - /api/v1/admin/users/* (鐢ㄦ埛绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:234","msg":"  - /api/v1/admin/quota/* (AI閰嶉绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:235","msg":"  - /api/v1/admin/audit/* (瀹℃牳绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:236","msg":"  - /api/v1/admin/stats (绯荤粺缁熻)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.749+0800","caller":"router/enter.go:237","msg":"  - /api/v1/admin/config/* (閰嶇疆绠＄悊)"}
[GIN-debug] GET    /api/v1/system/health     --> Qingyu_backend/api/v1/system.(*HealthAPI).SystemHealth-fm (4 handlers)
[GIN-debug] GET    /api/v1/system/health/:service --> Qingyu_backend/api/v1/system.(*HealthAPI).ServiceHealth-fm (4 handlers)
[GIN-debug] GET    /api/v1/system/metrics    --> Qingyu_backend/api/v1/system.(*HealthAPI).AllMetrics-fm (4 handlers)
[GIN-debug] GET    /api/v1/system/metrics/:service --> Qingyu_backend/api/v1/system.(*HealthAPI).ServiceMetrics-fm (4 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:241","msg":"鉁?绯荤粺鐩戞帶璺敱宸叉敞鍐屽埌: /api/v1/system/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:242","msg":"  - /api/v1/system/health (绯荤粺鍋ュ悍妫€鏌?"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:243","msg":"  - /api/v1/system/health/:service (鏈嶅姟鍋ュ悍妫€鏌?"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:244","msg":"  - /api/v1/system/metrics (鎵€鏈夋湇鍔℃寚鏍?"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:245","msg":"  - /api/v1/system/metrics/:service (鐗瑰畾鏈嶅姟鎸囨爣)"}
[GIN-debug] GET    /metrics                  --> Qingyu_backend/router.RegisterRoutes.WrapH.func2 (4 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:249","msg":"鉁?Prometheus metrics绔偣宸叉敞鍐? /metrics"}
[GIN-debug] GET    /ping                     --> Qingyu_backend/router.RegisterRoutes.func1 (4 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:258","msg":"\n========================================"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:259","msg":"鉁?鎵€鏈夎矾鐢辨敞鍐屽畬鎴?"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.750+0800","caller":"router/enter.go:260","msg":"=========================================="}
[GIN-debug] GET    /swagger/*any             --> github.com/swaggo/gin-swagger.CustomWrapHandler.func1 (4 handlers)
{"level":"info","timestamp":"2025-10-30T20:49:11.750+0800","caller":"middleware/logger.go:118","msg":"Request started","request_id":"1761828551750628200-5613774666313821486","method":"POST","path":"/api/v1/login","client_ip":"192.0.2.1","user_agent":"","user_id":""}
{"level":"warn","timestamp":"2025-10-30T20:49:11.752+0800","caller":"middleware/logger.go:175","msg":"Request completed slowly","request_id":"1761828551750628200-5613774666313821486","method":"POST","path":"/api/v1/login","client_ip":"192.0.2.1","status_code":401,"duration":0.0016226,"req_body_size":0,"resp_body_size":0}
{"level":"info","timestamp":"2025-10-30T20:49:11.752+0800","caller":"middleware/logger.go:118","msg":"Request started","request_id":"1761828551752250800-870786310179482079","method":"POST","path":"/api/v1/login","client_ip":"192.0.2.1","user_agent":"","user_id":""}
{"level":"warn","timestamp":"2025-10-30T20:49:11.753+0800","caller":"middleware/logger.go:175","msg":"Request completed slowly","request_id":"1761828551752250800-870786310179482079","method":"POST","path":"/api/v1/login","client_ip":"192.0.2.1","status_code":401,"duration":0.0010627,"req_body_size":0,"resp_body_size":0}
[Config] Using test config: ../../config/config.test.yaml
InitDB: MongoDB鍒濆鍖栧凡杩佺Щ鍒癝erviceContainer
璀﹀憡: Redis瀹㈡埛绔垵濮嬪寲澶辫触: 鍒涘缓Redis瀹㈡埛绔け璐? redis: connection failed: dial tcp :0: connectex: The requested address is not valid in its context.
璀﹀憡: Redis瀹㈡埛绔湭鍒濆鍖栵紝璺宠繃AuthService鍒涘缓
璀﹀憡: Redis瀹㈡埛绔湭鍒濆鍖栵紝璺宠繃RecommendationService鍒涘缓
鍒濆鍖?StorageService...
  鉁?StorageService 宸叉敞鍐?  鉁?StorageService瀹屾暣鍒濆鍖栧畬鎴愶紙LocalBackend锛?鎻愮ず: AdminService銆丮essagingService灏嗗湪Phase2鍚庣画浠诲姟涓畬鏁村疄鐜板苟娉ㄥ唽
Successfully initialized all services
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:41","msg":"鉁?鏈嶅姟瀹瑰櫒宸插垵濮嬪寲锛屽紑濮嬫敞鍐岃矾鐢?.."}
{"level":"\u001b[33mWARN\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:62","msg":"鈿?鍏变韩鏈嶅姟璺敱鏈敞鍐岋紙鏈嶅姟鏈厤缃級"}
{"level":"\u001b[33mWARN\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:64","msg":"  - AuthService","error":"AuthService鏈垵濮嬪寲"}
[GIN-debug] GET    /api/v1/bookstore/homepage --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetHomepage-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/books/search --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).SearchBooks-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/books/recommended --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetRecommendedBooks-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/books/featured --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetFeaturedBooks-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/books/:id --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetBookByID-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/categories/tree --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetCategoryTree-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/categories/:id/books --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetBooksByCategory-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/categories/:id --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetCategoryByID-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/banners --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetActiveBanners-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/realtime --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetRealtimeRanking-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/weekly --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetWeeklyRanking-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/monthly --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetMonthlyRanking-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/newbie --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetNewbieRanking-fm (4 handlers)
[GIN-debug] GET    /api/v1/bookstore/rankings/:type --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).GetRankingByType-fm (4 handlers)
[GIN-debug] POST   /api/v1/bookstore/books/:id/view --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).IncrementBookView-fm (5 handlers)
[GIN-debug] POST   /api/v1/bookstore/banners/:id/click --> Qingyu_backend/api/v1/bookstore.(*BookstoreAPI).IncrementBannerClick-fm (5 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:93","msg":"鉁?涔﹀簵璺敱宸叉敞鍐屽埌: /api/v1/bookstore/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:94","msg":"  - /api/v1/bookstore/homepage (涔﹀煄棣栭〉)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:95","msg":"  - /api/v1/bookstore/books/* (涔︾睄鍒楄〃銆佹悳绱€佽鎯?"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:96","msg":"  - /api/v1/bookstore/categories/* (鍒嗙被)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:97","msg":"  - /api/v1/bookstore/rankings/* (鎺掕姒?"}
[GIN-debug] GET    /api/v1/reader/collections/public --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetPublicCollections-fm (4 handlers)
[GIN-debug] GET    /api/v1/reader/books      --> Qingyu_backend/api/v1/reader.(*BooksAPI).GetBookshelf-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/books/recent --> Qingyu_backend/api/v1/reader.(*BooksAPI).GetRecentReading-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/books/unfinished --> Qingyu_backend/api/v1/reader.(*BooksAPI).GetUnfinishedBooks-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/books/finished --> Qingyu_backend/api/v1/reader.(*BooksAPI).GetFinishedBooks-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/books/:bookId --> Qingyu_backend/api/v1/reader.(*BooksAPI).AddToBookshelf-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/books/:bookId --> Qingyu_backend/api/v1/reader.(*BooksAPI).RemoveFromBookshelf-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/books/:bookId/like --> Qingyu_backend/api/v1/reader.(*LikeAPI).LikeBook-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/books/:bookId/like --> Qingyu_backend/api/v1/reader.(*LikeAPI).UnlikeBook-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/books/:bookId/like/info --> Qingyu_backend/api/v1/reader.(*LikeAPI).GetBookLikeInfo-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters   --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetBookChapters-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/:id --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetChapterByID-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/:id/content --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetChapterContent-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/:id/navigation --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetNavigationChapters-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/book/:bookId --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetBookChapters-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/book/:bookId/first --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetFirstChapter-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/chapters/book/:bookId/last --> Qingyu_backend/api/v1/reader.(*ChaptersAPI).GetLastChapter-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/:bookId --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetReadingProgress-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/progress   --> Qingyu_backend/api/v1/reader.(*ProgressAPI).SaveReadingProgress-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/progress/time --> Qingyu_backend/api/v1/reader.(*ProgressAPI).UpdateReadingTime-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/recent --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetRecentReading-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/history --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetReadingHistory-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/stats --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetReadingStats-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/unfinished --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetUnfinishedBooks-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/progress/finished --> Qingyu_backend/api/v1/reader.(*ProgressAPI).GetFinishedBooks-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/annotations --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).CreateAnnotation-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/annotations/:id --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).UpdateAnnotation-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/annotations/:id --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).DeleteAnnotation-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/annotations/batch --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).BatchCreateAnnotations-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/annotations/batch --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).BatchUpdateAnnotations-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/annotations/batch --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).BatchDeleteAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/notes --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetNotes-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/bookmarks --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetBookmarks-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/highlights --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetHighlights-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/book/:bookId --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetAnnotationsByBook-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/chapter/:chapterId --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetAnnotationsByChapter-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/recent --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetRecentAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/public --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetPublicAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/search --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).SearchNotes-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/stats --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetAnnotationStats-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/annotations/sync --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).SyncAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/export --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).ExportAnnotations-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/annotations/bookmark/latest --> Qingyu_backend/api/v1/reader.(*AnnotationsAPI).GetLatestBookmark-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/settings   --> Qingyu_backend/api/v1/reader.(*SettingAPI).GetReadingSettings-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/settings   --> Qingyu_backend/api/v1/reader.(*SettingAPI).SaveReadingSettings-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/settings   --> Qingyu_backend/api/v1/reader.(*SettingAPI).UpdateReadingSettings-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/comments   --> Qingyu_backend/api/v1/reader.(*CommentAPI).CreateComment-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/comments   --> Qingyu_backend/api/v1/reader.(*CommentAPI).GetCommentList-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/comments/:id --> Qingyu_backend/api/v1/reader.(*CommentAPI).GetCommentDetail-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/comments/:id --> Qingyu_backend/api/v1/reader.(*CommentAPI).UpdateComment-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/comments/:id --> Qingyu_backend/api/v1/reader.(*CommentAPI).DeleteComment-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/comments/:id/reply --> Qingyu_backend/api/v1/reader.(*CommentAPI).ReplyComment-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/comments/:id/like --> Qingyu_backend/api/v1/reader.(*CommentAPI).LikeComment-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/comments/:id/like --> Qingyu_backend/api/v1/reader.(*CommentAPI).UnlikeComment-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/likes/books --> Qingyu_backend/api/v1/reader.(*LikeAPI).GetUserLikedBooks-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/likes/stats --> Qingyu_backend/api/v1/reader.(*LikeAPI).GetUserLikeStats-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/collections --> Qingyu_backend/api/v1/reader.(*CollectionAPI).AddCollection-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetCollections-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/collections/:id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).UpdateCollection-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/collections/:id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).DeleteCollection-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections/check/:book_id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).CheckCollected-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections/tags/:tag --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetCollectionsByTag-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections/stats --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetCollectionStats-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/collections/:id/share --> Qingyu_backend/api/v1/reader.(*CollectionAPI).ShareCollection-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/collections/:id/share --> Qingyu_backend/api/v1/reader.(*CollectionAPI).UnshareCollection-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/collections/folders --> Qingyu_backend/api/v1/reader.(*CollectionAPI).CreateFolder-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/collections/folders --> Qingyu_backend/api/v1/reader.(*CollectionAPI).GetFolders-fm (5 handlers)
[GIN-debug] PUT    /api/v1/reader/collections/folders/:id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).UpdateFolder-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/collections/folders/:id --> Qingyu_backend/api/v1/reader.(*CollectionAPI).DeleteFolder-fm (5 handlers)
[GIN-debug] POST   /api/v1/reader/reading-history --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).RecordReading-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/reading-history --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).GetReadingHistories-fm (5 handlers)
[GIN-debug] GET    /api/v1/reader/reading-history/stats --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).GetReadingStats-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/reading-history/:id --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).DeleteHistory-fm (5 handlers)
[GIN-debug] DELETE /api/v1/reader/reading-history --> Qingyu_backend/api/v1/reader.(*ReadingHistoryAPI).ClearHistories-fm (5 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.845+0800","caller":"router/enter.go:136","msg":"鉁?闃呰鍣ㄨ矾鐢卞凡娉ㄥ唽鍒? /api/v1/reader/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:137","msg":"  - /api/v1/reader/books/* (涔︽灦绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:138","msg":"  - /api/v1/reader/chapters/* (绔犺妭鍐呭)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:139","msg":"  - /api/v1/reader/progress/* (闃呰杩涘害)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:140","msg":"  - /api/v1/reader/annotations/* (鏍囨敞绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:141","msg":"  - /api/v1/reader/settings/* (闃呰璁剧疆)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:143","msg":"  - /api/v1/reader/comments/* (璇勮绯荤粺)"}
{"level":"\u001b[33mWARN\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:150","msg":"鑾峰彇鎺ㄨ崘鏈嶅姟澶辫触","error":"RecommendationService鏈垵濮嬪寲"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:151","msg":"鎺ㄨ崘绯荤粺璺敱鏈敞鍐?}
[GIN-debug] POST   /api/v1/register          --> Qingyu_backend/api/v1/user.(*UserAPI).Register-fm (4 handlers)
[GIN-debug] POST   /api/v1/login             --> Qingyu_backend/api/v1/user.(*UserAPI).Login-fm (4 handlers)
[GIN-debug] GET    /api/v1/users/profile     --> Qingyu_backend/api/v1/user.(*UserAPI).GetProfile-fm (5 handlers)
[GIN-debug] PUT    /api/v1/users/profile     --> Qingyu_backend/api/v1/user.(*UserAPI).UpdateProfile-fm (5 handlers)
[GIN-debug] PUT    /api/v1/users/password    --> Qingyu_backend/api/v1/user.(*UserAPI).ChangePassword-fm (5 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:174","msg":"鉁?鐢ㄦ埛璺敱宸叉敞鍐屽埌: /api/v1/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:175","msg":"  - /api/v1/register (鐢ㄦ埛娉ㄥ唽)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:176","msg":"  - /api/v1/login (鐢ㄦ埛鐧诲綍)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:177","msg":"  - /api/v1/users/profile (涓汉淇℃伅)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:178","msg":"  - /api/v1/users/password (淇敼瀵嗙爜)"}
[GIN-debug] POST   /api/v1/projects          --> Qingyu_backend/api/v1/writer.(*ProjectApi).CreateProject-fm (5 handlers)
[GIN-debug] GET    /api/v1/projects          --> Qingyu_backend/api/v1/writer.(*ProjectApi).ListProjects-fm (5 handlers)
[GIN-debug] GET    /api/v1/projects/:id      --> Qingyu_backend/api/v1/writer.(*ProjectApi).GetProject-fm (5 handlers)
[GIN-debug] PUT    /api/v1/projects/:id      --> Qingyu_backend/api/v1/writer.(*ProjectApi).UpdateProject-fm (5 handlers)
[GIN-debug] DELETE /api/v1/projects/:id      --> Qingyu_backend/api/v1/writer.(*ProjectApi).DeleteProject-fm (5 handlers)
[GIN-debug] PUT    /api/v1/projects/:id/statistics --> Qingyu_backend/api/v1/writer.(*ProjectApi).UpdateProjectStatistics-fm (5 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:182","msg":"鉁?鏂囨。璺敱宸叉敞鍐屽埌: /api/v1/projects/"}
[GIN-debug] GET    /api/v1/ai/health         --> Qingyu_backend/api/v1/ai.(*SystemApi).HealthCheck-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/providers      --> Qingyu_backend/api/v1/ai.(*SystemApi).GetProviders-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/models         --> Qingyu_backend/api/v1/ai.(*SystemApi).GetModels-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/quota          --> Qingyu_backend/api/v1/ai.(*QuotaApi).GetQuotaInfo-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/quota/all      --> Qingyu_backend/api/v1/ai.(*QuotaApi).GetAllQuotas-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/quota/statistics --> Qingyu_backend/api/v1/ai.(*QuotaApi).GetQuotaStatistics-fm (5 handlers)
[GIN-debug] GET    /api/v1/ai/quota/transactions --> Qingyu_backend/api/v1/ai.(*QuotaApi).GetTransactionHistory-fm (5 handlers)
[GIN-debug] POST   /api/v1/ai/writing/continue --> Qingyu_backend/api/v1/ai.(*WritingApi).ContinueWriting-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/writing/continue/stream --> Qingyu_backend/api/v1/ai.(*WritingApi).ContinueWritingStream-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/writing/rewrite --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteText-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/writing/rewrite/stream --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteTextStream-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/chat           --> Qingyu_backend/api/v1/ai.(*ChatApi).Chat-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/chat/stream    --> Qingyu_backend/api/v1/ai.(*ChatApi).ChatStream-fm (6 handlers)
[GIN-debug] GET    /api/v1/ai/chat/sessions  --> Qingyu_backend/api/v1/ai.(*ChatApi).GetChatSessions-fm (6 handlers)
[GIN-debug] GET    /api/v1/ai/chat/sessions/:sessionId --> Qingyu_backend/api/v1/ai.(*ChatApi).GetChatHistory-fm (6 handlers)
[GIN-debug] DELETE /api/v1/ai/chat/sessions/:sessionId --> Qingyu_backend/api/v1/ai.(*ChatApi).DeleteChatSession-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/generate       --> Qingyu_backend/api/v1/ai.(*WritingApi).ContinueWriting-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/rewrite        --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteText-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/expand         --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteText-fm (6 handlers)
[GIN-debug] POST   /api/v1/ai/polish         --> Qingyu_backend/api/v1/ai.(*WritingApi).RewriteText-fm (6 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:204","msg":"鉁?AI鏈嶅姟璺敱宸叉敞鍐屽埌: /api/v1/ai/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:205","msg":"  - /api/v1/ai/writing/* (缁啓銆佹敼鍐?"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:206","msg":"  - /api/v1/ai/chat/* (鑱婂ぉ)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:207","msg":"  - /api/v1/ai/quota/* (閰嶉绠＄悊)"}
{"level":"\u001b[33mWARN\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:217","msg":"鈿?AdminService鏈厤缃?,"error":"AdminService鏈垵濮嬪寲"}
[GIN-debug] GET    /api/v1/admin/users       --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).ListUsers-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/users/:id   --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).GetUser-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/users/:id   --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).UpdateUser-fm (6 handlers)
[GIN-debug] DELETE /api/v1/admin/users/:id   --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).DeleteUser-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/users/:id/ban --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).BanUser-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/users/:id/unban --> Qingyu_backend/api/v1/admin.(*UserAdminAPI).UnbanUser-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/users/:id/statistics --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetUserStatistics-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/quota/:userId --> Qingyu_backend/api/v1/admin.(*QuotaAdminAPI).GetUserQuotaDetails-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/quota/:userId --> Qingyu_backend/api/v1/admin.(*QuotaAdminAPI).UpdateUserQuota-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/quota/:userId/suspend --> Qingyu_backend/api/v1/admin.(*QuotaAdminAPI).SuspendUserQuota-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/quota/:userId/activate --> Qingyu_backend/api/v1/admin.(*QuotaAdminAPI).ActivateUserQuota-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/audit/pending --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).GetPendingAudits-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/audit/high-risk --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).GetHighRiskAudits-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/audit/statistics --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).GetAuditStatistics-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/audit/:id/review --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).ReviewAudit-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/audit/:id/appeal/review --> Qingyu_backend/api/v1/admin.(*AuditAdminAPI).ReviewAppeal-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/stats       --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetSystemStats-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/operation-logs --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetOperationLogs-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/config      --> Qingyu_backend/api/v1/admin.(*ConfigAPI).GetAllConfigs-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/config/:key --> Qingyu_backend/api/v1/admin.(*ConfigAPI).GetConfigByKey-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/config      --> Qingyu_backend/api/v1/admin.(*ConfigAPI).UpdateConfig-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/config/batch --> Qingyu_backend/api/v1/admin.(*ConfigAPI).BatchUpdateConfig-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/config/validate --> Qingyu_backend/api/v1/admin.(*ConfigAPI).ValidateConfig-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/config/backups --> Qingyu_backend/api/v1/admin.(*ConfigAPI).GetConfigBackups-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/config/restore --> Qingyu_backend/api/v1/admin.(*ConfigAPI).RestoreConfigBackup-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/config-legacy --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetSystemConfig-fm (6 handlers)
[GIN-debug] PUT    /api/v1/admin/config-legacy --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).UpdateSystemConfig-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/withdraw/review --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).ReviewWithdraw-fm (6 handlers)
[GIN-debug] GET    /api/v1/admin/announcements --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).GetAnnouncements-fm (6 handlers)
[GIN-debug] POST   /api/v1/admin/announcements --> Qingyu_backend/api/v1/admin.(*SystemAdminAPI).CreateAnnouncement-fm (6 handlers)
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:232","msg":"鉁?绠＄悊鍛樿矾鐢卞凡娉ㄥ唽鍒? /api/v1/admin/"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:233","msg":"  - /api/v1/admin/users/* (鐢ㄦ埛绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:234","msg":"  - /api/v1/admin/quota/* (AI閰嶉绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:235","msg":"  - /api/v1/admin/audit/* (瀹℃牳绠＄悊)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:236","msg":"  - /api/v1/admin/stats (绯荤粺缁熻)"}
{"level":"\u001b[34mINFO\u001b[0m","timestamp":"2025-10-30T20:49:11.846+0800","caller":"router/enter.go:237","msg":"  - /api/v1/admin/config/* (閰嶇疆绠＄悊)"}
--- FAIL: TestAIServiceHealth (0.09s)
panic: duplicate metrics collector registration attempted [recovered, repanicked]

goroutine 2668 [running]:
testing.tRunner.func1.2({0x7ff77b29f180, 0xc005fa7020})
	C:/Program Files/Go/src/testing/testing.go:1872 +0x239
testing.tRunner.func1()
	C:/Program Files/Go/src/testing/testing.go:1875 +0x35b
panic({0x7ff77b29f180?, 0xc005fa7020?})
	C:/Program Files/Go/src/runtime/panic.go:783 +0x132
github.com/prometheus/client_golang/prometheus.(*Registry).MustRegister(0x7ff77cc1f9c0, {0xc00742d670?, 0x0?, 0x0?})
	C:/Users/yukin/go/pkg/mod/github.com/prometheus/client_golang@v1.23.2/prometheus/registry.go:406 +0x65
github.com/prometheus/client_golang/prometheus/promauto.Factory.NewCounterVec({{0x7ff77b6ffe80?, 0x7ff77cc1f9c0?}}, {{0x0, 0x0}, {0x0, 0x0}, {0x7ff77b410681, 0x13}, {0x7ff77b40a26a, 0x10}, ...}, ...)
	C:/Users/yukin/go/pkg/mod/github.com/prometheus/client_golang@v1.23.2/prometheus/promauto/auto.go:276 +0x163
github.com/prometheus/client_golang/prometheus/promauto.NewCounterVec(...)
	C:/Users/yukin/go/pkg/mod/github.com/prometheus/client_golang@v1.23.2/prometheus/promauto/auto.go:176
Qingyu_backend/pkg/metrics.InitPrometheusMetrics()
	E:/Github/Qingyu/Qingyu_backend/pkg/metrics/prometheus.go:65 +0x109
Qingyu_backend/router/system.InitSystemRoutes(0xc005f8d380)
	E:/Github/Qingyu/Qingyu_backend/router/system/system_router.go:13 +0x1c
Qingyu_backend/router.RegisterRoutes(0xc005fd6d00)
	E:/Github/Qingyu/Qingyu_backend/router/enter.go:240 +0x1fe5
Qingyu_backend/core.InitServer()
	E:/Github/Qingyu/Qingyu_backend/core/server.go:39 +0x125
Qingyu_backend/test/integration.setupTestEnvironment(0xc007ada000)
	E:/Github/Qingyu/Qingyu_backend/test/integration/helpers.go:576 +0xbb
Qingyu_backend/test/integration.TestAIServiceHealth(0xc007ada000)
	E:/Github/Qingyu/Qingyu_backend/test/integration/scenario_ai_generation_test.go:199 +0x85
testing.tRunner(0xc007ada000, 0x7ff77b480458)
	C:/Program Files/Go/src/testing/testing.go:1934 +0xc3
created by testing.(*T).Run in goroutine 1
	C:/Program Files/Go/src/testing/testing.go:1997 +0x44b
FAIL	Qingyu_backend/test/integration	10.866s
ok  	Qingyu_backend/test/performance	(cached)
--- FAIL: TestCollectionFolderRepository (0.49s)
    test_helper.go:40: 鉁?娴嬭瘯鏁版嵁搴撳凡鍒涘缓: qingyu_test_1761828543
    --- FAIL: TestCollectionFolderRepository/DecrementFolderBookCount_Success (0.01s)
        collection_repository_test.go:356: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/collection_repository_test.go:356
            	Error:      	Not equal: 
            	            	expected: 4
            	            	actual  : -1
            	Test:       	TestCollectionFolderRepository/DecrementFolderBookCount_Success
        collection_repository_test.go:358: 鉁?鍑忓皯鏀惰棌澶逛功绫嶈鏁版垚鍔?    test_helper.go:54: 鉁?娴嬭瘯鏁版嵁搴撳凡娓呯悊: qingyu_test_1761828543
--- FAIL: TestCommentRepositoryBoundary (0.29s)
    test_helper.go:40: 鉁?娴嬭瘯鏁版嵁搴撳凡鍒涘缓: qingyu_test_1761828545
    --- FAIL: TestCommentRepositoryBoundary/Pagination_WithLargePageSize (0.01s)
        comment_repository_comprehensive_test.go:377: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/comment_repository_comprehensive_test.go:377
            	Error:      	Expected value not to be nil.
            	Test:       	TestCommentRepositoryBoundary/Pagination_WithLargePageSize
        comment_repository_comprehensive_test.go:378: 鉁?澶ч〉闈㈠ぇ灏忕殑鍒嗛〉鏌ヨ姝ｅ父澶勭悊
    test_helper.go:54: 鉁?娴嬭瘯鏁版嵁搴撳凡娓呯悊: qingyu_test_1761828545
--- FAIL: TestLikeRepositoryBoundary (0.12s)
    test_helper.go:40: 鉁?娴嬭瘯鏁版嵁搴撳凡鍒涘缓: qingyu_test_1761828546
    --- FAIL: TestLikeRepositoryBoundary/Pagination_WithLargeNumbers (0.01s)
        like_repository_comprehensive_test.go:291: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/like_repository_comprehensive_test.go:291
            	Error:      	Expected value not to be nil.
            	Test:       	TestLikeRepositoryBoundary/Pagination_WithLargeNumbers
        like_repository_comprehensive_test.go:293: 鉁?澶у垎椤靛弬鏁版甯稿鐞?    test_helper.go:54: 鉁?娴嬭瘯鏁版嵁搴撳凡娓呯悊: qingyu_test_1761828546
--- FAIL: TestStorageRepository_List (0.03s)
    storage_repository_test.go:112: 
        	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/storage_repository_test.go:112
        	Error:      	"[0xc0001e20e0 0xc0001e21c0 0xc0001e22a0 0xc0001e2380 0xc0001e2460 0xc0001e2540 0xc0001e2620 0xc0001e2700 0xc0001e27e0 0xc0001e28c0]" should have 5 item(s), but has 10
        	Test:       	TestStorageRepository_List
    storage_repository_test.go:113: 
        	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/storage_repository_test.go:113
        	Error:      	Not equal: 
        	            	expected: 5
        	            	actual  : 47
        	Test:       	TestStorageRepository_List
FAIL
FAIL	Qingyu_backend/test/repository	7.497s
--- FAIL: TestRankingRepository_Create (0.23s)
panic: runtime error: invalid memory address or nil pointer dereference [recovered, repanicked]
[signal 0xc0000005 code=0x0 addr=0x40 pc=0x7ff6377664eb]

goroutine 19 [running]:
testing.tRunner.func1.2({0x7ff63839ad20, 0x7ff63923d230})
	C:/Program Files/Go/src/testing/testing.go:1872 +0x239
testing.tRunner.func1()
	C:/Program Files/Go/src/testing/testing.go:1875 +0x35b
panic({0x7ff63839ad20?, 0x7ff63923d230?})
	C:/Program Files/Go/src/runtime/panic.go:783 +0x132
go.mongodb.org/mongo-driver/mongo.newDatabase(0x0, {0x7ff63854d199, 0x6}, {0x0?, 0x7ff6392c0c00?, 0x0?})
	C:/Users/yukin/go/pkg/mod/go.mongodb.org/mongo-driver@v1.17.4/mongo/database.go:49 +0xcb
go.mongodb.org/mongo-driver/mongo.(*Client).Database(...)
	C:/Users/yukin/go/pkg/mod/go.mongodb.org/mongo-driver@v1.17.4/mongo/client.go:659
Qingyu_backend/repository/mongodb/bookstore.NewMongoRankingRepository(0x0, {0x7ff63854d199, 0x6})
	E:/Github/Qingyu/Qingyu_backend/repository/mongodb/bookstore/ranking_repository_mongo.go:29 +0x2d
Qingyu_backend/test/repository/bookstore.TestRankingRepository_Create(0xc000286c40)
	E:/Github/Qingyu/Qingyu_backend/test/repository/bookstore/ranking_repository_test.go:61 +0x4d
testing.tRunner(0xc000286c40, 0x7ff6385b3a40)
	C:/Program Files/Go/src/testing/testing.go:1934 +0xc3
created by testing.(*T).Run in goroutine 1
	C:/Program Files/Go/src/testing/testing.go:1997 +0x44b
FAIL	Qingyu_backend/test/repository/bookstore	1.116s
--- FAIL: TestAnnotationRepository_CountByUser (0.30s)
    annotation_repository_test.go:398: 
        	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/reading/annotation_repository_test.go:398
        	Error:      	Not equal: 
        	            	expected: 2
        	            	actual  : 0
        	Test:       	TestAnnotationRepository_CountByUser
--- FAIL: TestAnnotationRepository_SyncAnnotations (0.12s)
    annotation_repository_test.go:581: 
        	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/reading/annotation_repository_test.go:581
        	Error:      	Received unexpected error:
        	            	鏍囨敞涓嶅瓨鍦?        	Test:       	TestAnnotationRepository_SyncAnnotations
--- FAIL: TestChapterRepository_GetByBookIDWithPagination (0.12s)
    --- FAIL: TestChapterRepository_GetByBookIDWithPagination/鍒嗛〉鑾峰彇绔犺妭 (0.10s)
        chapter_repository_test.go:229: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/reading/chapter_repository_test.go:229
            	Error:      	Not equal: 
            	            	expected: 1
            	            	actual  : 5
            	Test:       	TestChapterRepository_GetByBookIDWithPagination/鍒嗛〉鑾峰彇绔犺妭
        chapter_repository_test.go:230: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/reading/chapter_repository_test.go:230
            	Error:      	Not equal: 
            	            	expected: 5
            	            	actual  : 9
            	Test:       	TestChapterRepository_GetByBookIDWithPagination/鍒嗛〉鑾峰彇绔犺妭
        chapter_repository_test.go:235: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/reading/chapter_repository_test.go:235
            	Error:      	"[0xc0004431e0]" should have 5 item(s), but has 1
            	Test:       	TestChapterRepository_GetByBookIDWithPagination/鍒嗛〉鑾峰彇绔犺妭
        chapter_repository_test.go:236: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/reading/chapter_repository_test.go:236
            	Error:      	Not equal: 
            	            	expected: 6
            	            	actual  : 10
            	Test:       	TestChapterRepository_GetByBookIDWithPagination/鍒嗛〉鑾峰彇绔犺妭
panic: runtime error: index out of range [4] with length 1 [recovered, repanicked]

goroutine 2641 [running]:
testing.tRunner.func1.2({0x7ff66ee41bc0, 0xc0001b0900})
	C:/Program Files/Go/src/testing/testing.go:1872 +0x239
testing.tRunner.func1()
	C:/Program Files/Go/src/testing/testing.go:1875 +0x35b
panic({0x7ff66ee41bc0?, 0xc0001b0900?})
	C:/Program Files/Go/src/runtime/panic.go:783 +0x132
Qingyu_backend/test/repository/reading.TestChapterRepository_GetByBookIDWithPagination.func1(0xc0007edc00)
	E:/Github/Qingyu/Qingyu_backend/test/repository/reading/chapter_repository_test.go:237 +0x309
testing.tRunner(0xc0007edc00, 0xc000402980)
	C:/Program Files/Go/src/testing/testing.go:1934 +0xc3
created by testing.(*T).Run in goroutine 2617
	C:/Program Files/Go/src/testing/testing.go:1997 +0x44b
FAIL	Qingyu_backend/test/repository/reading	5.473s
--- FAIL: TestHotRecommendationRepository_GetNewPopularBooks (0.21s)
    recommendation_hot_test.go:281: 
        	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/recommendation/recommendation_hot_test.go:281
        	Error:      	"[]" should have 2 item(s), but has 0
        	Test:       	TestHotRecommendationRepository_GetNewPopularBooks
FAIL
FAIL	Qingyu_backend/test/repository/recommendation	5.984s
ok  	Qingyu_backend/test/repository/shared	(cached)
ok  	Qingyu_backend/test/repository/user	4.825s
--- FAIL: TestProjectRepository_GetListByOwnerID (0.21s)
    project_repository_test.go:222: 
        	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/repository/writing/project_repository_test.go:222
        	Error:      	"[0xc0007143c0 0xc000714500]" should have 3 item(s), but has 2
        	Test:       	TestProjectRepository_GetListByOwnerID
FAIL
FAIL	Qingyu_backend/test/repository/writing	6.374s
2025/10/30 20:49:02 [UserActivityLog] 鐢ㄦ埛娲诲姩: user.registered - 鐢ㄦ埛: testuser, 鍔ㄤ綔: registered, 鏃堕棿: 2025-10-30 20:49:02
2025/10/30 20:49:02 [UserActivityLog] 鐢ㄦ埛娲诲姩: user.registered - 鐢ㄦ埛: testuser, 鍔ㄤ綔: registered, 鏃堕棿: 2025-10-30 20:49:02
2025/10/30 20:49:02 [WelcomeEmailHandler] 鍙戦€佹杩庨偖浠剁粰鐢ㄦ埛: testuser (test@example.com)
2025/10/30 20:49:02 [UserActivityLog] 鐢ㄦ埛娲诲姩: user.registered - 鐢ㄦ埛: testuser, 鍔ㄤ綔: registered, 鏃堕棿: 2025-10-30 20:49:02
2025/10/30 20:49:02 [UserStatistics] 鏂扮敤鎴锋敞鍐? testuser, 鏇存柊鎬荤敤鎴锋暟
2025/10/30 20:49:02 [UserActivityLog] 鐢ㄦ埛娲诲姩: user.registered - 鐢ㄦ埛: testuser, 鍔ㄤ綔: registered, 鏃堕棿: 2025-10-30 20:49:02
2025/10/30 20:49:02 [UserActivityLog] 鐢ㄦ埛娲诲姩: user.logged_in - 鐢ㄦ埛: testuser, 鍔ㄤ綔: logged_in, 鏃堕棿: 2025-10-30 20:49:02
2025/10/30 20:49:02 [ReadingStatistics] 鐢ㄦ埛 user123 闃呰浜嗙珷鑺?chapter789
2025/10/30 20:49:02 [RecommendationUpdate] 鍩轰簬鐢ㄦ埛 user123 鐨勯槄璇昏涓烘洿鏂版帹鑽愬垪琛?2025/10/30 20:49:02 [ReadingStatistics] 鐢ㄦ埛 user123 鐨勯槄璇昏繘搴︽洿鏂颁负 75%
--- FAIL: TestEmailService_ErrorHandling (0.00s)
    --- FAIL: TestEmailService_ErrorHandling/SMTP閰嶇疆閿欒搴旇繑鍥為敊璇?(0.00s)
        messaging_service_integration_test.go:239: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/service/messaging_service_integration_test.go:239
            	Error:      	An error is expected but got nil.
            	Test:       	TestEmailService_ErrorHandling/SMTP閰嶇疆閿欒搴旇繑鍥為敊璇?FAIL
FAIL	Qingyu_backend/test/service	3.407s
ok  	Qingyu_backend/test/service/ai	(cached)
ok  	Qingyu_backend/test/service/audit	(cached)
ok  	Qingyu_backend/test/service/bookstore	(cached)
ok  	Qingyu_backend/test/service/collection	(cached)
--- FAIL: TestCommentServiceBusinessRules (0.02s)
    --- FAIL: TestCommentServiceBusinessRules/ContentLength_Maximum (0.00s)
        comment_service_comprehensive_test.go:55: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:55
            	Error:      	Received unexpected error:
            	            	璇勮鍐呭闀垮害蹇呴』鍦?0-500瀛椾箣闂?            	Test:       	TestCommentServiceBusinessRules/ContentLength_Maximum
        comment_service_comprehensive_test.go:56: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:56
            	Error:      	Expected value not to be nil.
            	Test:       	TestCommentServiceBusinessRules/ContentLength_Maximum
        comment_service_comprehensive_test.go:58: FAIL:	Create(context.backgroundCtx,mock.anythingOfTypeArgument)
            		at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:52]
        comment_service_comprehensive_test.go:58: FAIL: 1 out of 2 expectation(s) were met.
            	The code you are testing needs to make 1 more call(s).
            	at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:58]
        comment_service_comprehensive_test.go:59: FAIL:	GetEnabledWords(context.backgroundCtx)
            		at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:51]
        comment_service_comprehensive_test.go:59: FAIL: 1 out of 2 expectation(s) were met.
            	The code you are testing needs to make 1 more call(s).
            	at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:59]
        comment_service_comprehensive_test.go:61: 鉁?鏈€澶ч暱搴﹀唴瀹归獙璇侀€氳繃
    --- FAIL: TestCommentServiceBusinessRules/Rating_BoundaryValues (0.00s)
        comment_service_comprehensive_test.go:105: FAIL:	Create(context.backgroundCtx,mock.anythingOfTypeArgument)
            		at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:92]
        comment_service_comprehensive_test.go:105: FAIL: 3 out of 4 expectation(s) were met.
            	The code you are testing needs to make 1 more call(s).
            	at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:105]
        comment_service_comprehensive_test.go:106: FAIL:	GetEnabledWords(context.backgroundCtx)
            		at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:91]
        comment_service_comprehensive_test.go:106: FAIL: 3 out of 4 expectation(s) were met.
            	The code you are testing needs to make 1 more call(s).
            	at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:106]
        comment_service_comprehensive_test.go:108: 鉁?璇勫垎杈圭晫鍊奸獙璇侀€氳繃
--- FAIL: TestCommentServiceReplyChain (0.00s)
    --- FAIL: TestCommentServiceReplyChain/Reply_ToRootComment (0.00s)
        comment_service_comprehensive_test.go:216: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:216
            	Error:      	Not equal: 
            	            	expected: "69035ec23c32adc85d14c2fd"
            	            	actual  : "69035ec23c32adc85d14c2ff"
            	            	
            	            	Diff:
            	            	--- Expected
            	            	+++ Actual
            	            	@@ -1 +1 @@
            	            	-69035ec23c32adc85d14c2fd
            	            	+69035ec23c32adc85d14c2ff
            	Test:       	TestCommentServiceReplyChain/Reply_ToRootComment
        comment_service_comprehensive_test.go:221: 鉁?鍥炲鏍硅瘎璁烘垚鍔?--- FAIL: TestCommentServiceStatistics (0.00s)
    --- FAIL: TestCommentServiceStatistics/GetBookCommentStats_Success (0.00s)
panic: 
	assert: mock: I don't know what to return because the method call was unexpected.
		Either do Mock.On("GetCommentCount").Return(...) first, or remove the GetCommentCount() call.
		This method was unexpected:
			GetCommentCount(context.backgroundCtx,string)
			0: context.backgroundCtx{emptyCtx:context.emptyCtx{}}
			1: "69035ec23c32adc85d14c306"
		at: [E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_test.go:143 E:/Github/Qingyu/Qingyu_backend/service/reading/comment_service.go:390 E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:301] [recovered, repanicked]

goroutine 35 [running]:
testing.tRunner.func1.2({0x7ff78bf44620, 0xc000246e40})
	C:/Program Files/Go/src/testing/testing.go:1872 +0x239
testing.tRunner.func1()
	C:/Program Files/Go/src/testing/testing.go:1875 +0x35b
panic({0x7ff78bf44620?, 0xc000246e40?})
	C:/Program Files/Go/src/runtime/panic.go:783 +0x132
github.com/stretchr/testify/mock.(*Mock).fail(0xc0001995e0, {0x7ff78bfeaed0?, 0x4?}, {0xc000119b40?, 0x2?, 0x2?})
	C:/Users/yukin/go/pkg/mod/github.com/stretchr/testify@v1.11.1/mock/mock.go:359 +0x125
github.com/stretchr/testify/mock.(*Mock).MethodCalled(0xc0001995e0, {0x7ff78c0c053c, 0xf}, {0xc000250020, 0x2, 0x2})
	C:/Users/yukin/go/pkg/mod/github.com/stretchr/testify@v1.11.1/mock/mock.go:527 +0x77b
github.com/stretchr/testify/mock.(*Mock).Called(0xc0001995e0, {0xc000250020, 0x2, 0x2})
	C:/Users/yukin/go/pkg/mod/github.com/stretchr/testify@v1.11.1/mock/mock.go:491 +0x125
Qingyu_backend/test/service/comment.(*MockCommentRepository).GetCommentCount(0xc0001995e0, {0x7ff78c05d828, 0x7ff78c32cc60}, {0xc0002441e0, 0x18})
	E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_test.go:143 +0xcf
Qingyu_backend/service/reading.(*CommentService).GetBookCommentStats(0xc000199680, {0x7ff78c05d828, 0x7ff78c32cc60}, {0xc0002441e0, 0x18})
	E:/Github/Qingyu/Qingyu_backend/service/reading/comment_service.go:390 +0xd2
Qingyu_backend/test/service/comment.TestCommentServiceStatistics.func1(0xc0001f5880)
	E:/Github/Qingyu/Qingyu_backend/test/service/comment/comment_service_comprehensive_test.go:301 +0x231
testing.tRunner(0xc0001f5880, 0xc000119a80)
	C:/Program Files/Go/src/testing/testing.go:1934 +0xc3
created by testing.(*T).Run in goroutine 34
	C:/Program Files/Go/src/testing/testing.go:1997 +0x44b
FAIL	Qingyu_backend/test/service/comment	2.862s
ok  	Qingyu_backend/test/service/container	0.542s
--- FAIL: TestDocumentService_DeleteDocument_Success (0.00s)
panic: runtime error: invalid memory address or nil pointer dereference [recovered, repanicked]
[signal 0xc0000005 code=0x0 addr=0x90 pc=0x7ff6724291f3]

goroutine 25 [running]:
testing.tRunner.func1.2({0x7ff6724e8c00, 0x7ff672b85f40})
	C:/Program Files/Go/src/testing/testing.go:1872 +0x239
testing.tRunner.func1()
	C:/Program Files/Go/src/testing/testing.go:1875 +0x35b
panic({0x7ff6724e8c00?, 0x7ff672b85f40?})
	C:/Program Files/Go/src/runtime/panic.go:783 +0x132
Qingyu_backend/test/service/document_test.(*MockDocumentRepository).SoftDelete(0xc000262c90?, {0x7ff6726f7e50?, 0xc000262c90?}, {0xc000215758?, 0x18?}, {0xc000215770?, 0x7ff672559de0?})
	<autogenerated>:1 +0x33
Qingyu_backend/service/document.(*DocumentService).DeleteDocument(0xc000256e40, {0x7ff6726f7e50, 0xc000262c90}, {0xc000215758, 0x18})
	E:/Github/Qingyu/Qingyu_backend/service/document/document_service.go:304 +0x5b8
Qingyu_backend/test/service/document_test.TestDocumentService_DeleteDocument_Success(0xc000207a40)
	E:/Github/Qingyu/Qingyu_backend/test/service/document/document_service_test.go:489 +0x98b
testing.tRunner(0xc000207a40, 0x7ff6725c7218)
	C:/Program Files/Go/src/testing/testing.go:1934 +0xc3
created by testing.(*T).Run in goroutine 1
	C:/Program Files/Go/src/testing/testing.go:1997 +0x44b
FAIL	Qingyu_backend/test/service/document	0.665s
Warning: Failed to increment comment like count: increment failed
--- FAIL: TestLikeServiceBatchOperations (0.00s)
    --- FAIL: TestLikeServiceBatchOperations/BatchOperations_EmptyArray (0.00s)
        like_service_comprehensive_test.go:204: FAIL:	GetLikesCountBatch(context.backgroundCtx,string,[]string)
            		at: [E:/Github/Qingyu/Qingyu_backend/test/service/like/like_service_comprehensive_test.go:197]
        like_service_comprehensive_test.go:204: FAIL: 2 out of 3 expectation(s) were met.
            	The code you are testing needs to make 1 more call(s).
            	at: [E:/Github/Qingyu/Qingyu_backend/test/service/like/like_service_comprehensive_test.go:204]
        like_service_comprehensive_test.go:206: 鉁?鎵归噺鎿嶄綔绌烘暟缁勫鐞嗘纭?--- FAIL: TestLikeServiceError (0.00s)
    --- FAIL: TestLikeServiceError/RepositoryError_RemoveLike (0.00s)
        like_service_comprehensive_test.go:288: 
            	Error Trace:	E:/Github/Qingyu/Qingyu_backend/test/service/like/like_service_comprehensive_test.go:288
            	Error:      	"鍙栨秷鐐硅禐涔︾睄澶辫触: database error" does not contain "鍙栨秷鐐硅禐澶辫触"
            	Test:       	TestLikeServiceError/RepositoryError_RemoveLike
        like_service_comprehensive_test.go:293: 鉁?绉婚櫎鐐硅禐澶辫触澶勭悊姝ｇ‘
FAIL
FAIL	Qingyu_backend/test/service/like	2.768s
ok  	Qingyu_backend/test/service/project	(cached)
ok  	Qingyu_backend/test/service/reading	(cached)
ok  	Qingyu_backend/test/service/recommendation_test	(cached)
ok  	Qingyu_backend/test/service/shared	(cached)
ok  	Qingyu_backend/test/service/shared/auth	(cached)
ok  	Qingyu_backend/test/service/shared/stats	(cached)
?   	Qingyu_backend/test/testutil	[no test files]
FAIL
