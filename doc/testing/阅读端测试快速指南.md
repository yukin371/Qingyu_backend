# é˜…è¯»ç«¯åŠŸèƒ½æµ‹è¯•å¿«é€ŸæŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ææ¡ä»¶
âœ… å·²å¯¼å…¥ 100 æœ¬å°è¯´æ•°æ®  
âœ… MongoDB æ­£åœ¨è¿è¡Œ  
âœ… æœåŠ¡å™¨å·²å¯åŠ¨ï¼ˆ`go run cmd/server/main.go`ï¼‰

---

## ğŸ“‹ ä¸€é”®æµ‹è¯•

### Windows ç”¨æˆ·
```bash
# è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
scripts\test_reading_features.bat
```

### Linux/Mac ç”¨æˆ·
```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/test_reading_features.sh

# è¿è¡Œæµ‹è¯•
./scripts/test_reading_features.sh
```

**æµ‹è¯•å†…å®¹**:
- âœ… ä¹¦åŸæµè§ˆï¼ˆåˆ—è¡¨ã€åˆ†é¡µã€æ’åºï¼‰
- âœ… ä¹¦ç±æœç´¢
- âœ… æ¦œå•åŠŸèƒ½ï¼ˆçƒ­é—¨æ¦œã€æ–°ä¹¦æ¦œã€åˆ†ç±»æ¦œï¼‰
- âœ… ä¹¦ç±è¯¦æƒ…å’Œç« èŠ‚
- âœ… è¯„åˆ†ç³»ç»Ÿ
- âœ… æ¨èç³»ç»Ÿ

**æµ‹è¯•ç»“æœ**:
- è‡ªåŠ¨ä¿å­˜åœ¨ `test_results/` ç›®å½•
- ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
- æ˜¾ç¤ºé€šè¿‡ç‡

---

## ğŸ¯ é‡ç‚¹æµ‹è¯•åŠŸèƒ½

### 1. æ¦œå•åŠŸèƒ½æµ‹è¯•

#### çƒ­é—¨æ¦œï¼ˆæŒ‰å­—æ•°ï¼‰
```bash
curl "http://localhost:8080/api/v1/bookstore/books?sortBy=word_count&sortOrder=desc&limit=20"
```

#### çƒ­é—¨æ¦œï¼ˆæŒ‰ç« èŠ‚æ•°ï¼‰
```bash
curl "http://localhost:8080/api/v1/bookstore/books?sortBy=chapter_count&sortOrder=desc&limit=20"
```

#### æ–°ä¹¦æ¦œ
```bash
curl "http://localhost:8080/api/v1/bookstore/books?sortBy=created_at&sortOrder=desc&limit=20"
```

#### æ¨èæ¦œ
```bash
curl "http://localhost:8080/api/v1/bookstore/books?is_recommended=true&limit=20"
```

#### ç„å¹»çƒ­é—¨æ¦œ
```bash
curl "http://localhost:8080/api/v1/bookstore/books?category=ç„å¹»&sortBy=word_count&sortOrder=desc&limit=20"
```

### 2. ä¹¦åŸæµè§ˆæµ‹è¯•

#### è·å–ä¹¦ç±åˆ—è¡¨
```bash
curl "http://localhost:8080/api/v1/bookstore/books?page=1&pageSize=10"
```

#### æœç´¢ä¹¦ç±
```bash
curl "http://localhost:8080/api/v1/bookstore/books/search?keyword=ä¹¦å"
```

#### æŒ‰åˆ†ç±»ç­›é€‰
```bash
curl "http://localhost:8080/api/v1/bookstore/books?category=ç„å¹»&page=1&pageSize=10"
```

### 3. ä¹¦ç±å’Œç« èŠ‚æµ‹è¯•

#### è·å–ä¹¦ç±è¯¦æƒ…
```bash
# å…ˆä»åˆ—è¡¨ä¸­è·å–ä¸€ä¸ªä¹¦ç± ID
curl "http://localhost:8080/api/v1/bookstore/books/{book_id}"
```

#### è·å–ç« èŠ‚åˆ—è¡¨
```bash
curl "http://localhost:8080/api/v1/bookstore/books/{book_id}/chapters?page=1&pageSize=50"
```

#### è·å–ç« èŠ‚å†…å®¹
```bash
curl "http://localhost:8080/api/v1/bookstore/chapters/{chapter_id}"
```

---

## ğŸ“Š æŸ¥çœ‹æµ‹è¯•æ•°æ®

### æ–¹æ³• 1: ä½¿ç”¨æµè§ˆå™¨
ç›´æ¥åœ¨æµè§ˆå™¨è®¿é—® API ç«¯ç‚¹ï¼ŒæŸ¥çœ‹ JSON å“åº”

### æ–¹æ³• 2: ä½¿ç”¨ Postman
å¯¼å…¥ API ç«¯ç‚¹åˆ° Postman è¿›è¡Œæµ‹è¯•

### æ–¹æ³• 3: ä½¿ç”¨ MongoDB Compass
ç›´æ¥æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ•°æ®

---

## ğŸ§ª æµ‹è¯•åœºæ™¯ç¤ºä¾‹

### åœºæ™¯ 1: ç”¨æˆ·æµè§ˆæ¦œå•
```bash
# 1. æŸ¥çœ‹çƒ­é—¨æ¦œï¼ˆå‰20æœ¬å­—æ•°æœ€å¤šçš„ä¹¦ï¼‰
curl "http://localhost:8080/api/v1/bookstore/books?sortBy=word_count&sortOrder=desc&limit=20" | json_pp

# 2. æŸ¥çœ‹ç„å¹»çƒ­é—¨æ¦œ
curl "http://localhost:8080/api/v1/bookstore/books?category=ç„å¹»&sortBy=word_count&sortOrder=desc&limit=20" | json_pp

# 3. æŸ¥çœ‹æ–°ä¹¦æ¦œ
curl "http://localhost:8080/api/v1/bookstore/books?sortBy=created_at&sortOrder=desc&limit=20" | json_pp
```

### åœºæ™¯ 2: ç”¨æˆ·æœç´¢å’Œé˜…è¯»
```bash
# 1. æœç´¢ä¹¦ç±
curl "http://localhost:8080/api/v1/bookstore/books/search?keyword=ä»™" | json_pp

# 2. ä»ç»“æœä¸­é€‰æ‹©ä¸€æœ¬ä¹¦ï¼ŒæŸ¥çœ‹è¯¦æƒ…
# å‡è®¾å¾—åˆ° book_id = "67159ac8e08b43d4a0a5e401"
curl "http://localhost:8080/api/v1/bookstore/books/67159ac8e08b43d4a0a5e401" | json_pp

# 3. è·å–ç« èŠ‚åˆ—è¡¨
curl "http://localhost:8080/api/v1/bookstore/books/67159ac8e08b43d4a0a5e401/chapters?page=1&pageSize=10" | json_pp

# 4. é˜…è¯»ç¬¬ä¸€ç« 
# å‡è®¾å¾—åˆ° chapter_id = "67159ac8e08b43d4a0a5e402"
curl "http://localhost:8080/api/v1/bookstore/chapters/67159ac8e08b43d4a0a5e402" | json_pp
```

### åœºæ™¯ 3: æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
```bash
# 1. æŸ¥çœ‹ä¹¦ç±è¯„åˆ†
curl "http://localhost:8080/api/v1/reading/books/{book_id}/average-rating" | json_pp

# 2. æŸ¥çœ‹è¯„åˆ†åˆ†å¸ƒ
curl "http://localhost:8080/api/v1/reading/books/{book_id}/rating-distribution" | json_pp

# 3. æŸ¥çœ‹æ¨èä¹¦ç±
curl "http://localhost:8080/api/v1/recommendation/books?limit=10" | json_pp
```

---

## ğŸ¨ ä½¿ç”¨ jq ç¾åŒ–è¾“å‡º

å®‰è£… jq:
```bash
# Windows (ä½¿ç”¨ Chocolatey)
choco install jq

# Linux
sudo apt-get install jq

# Mac
brew install jq
```

ä½¿ç”¨ç¤ºä¾‹:
```bash
# ç¾åŒ– JSON è¾“å‡º
curl "http://localhost:8080/api/v1/bookstore/books?limit=5" | jq '.'

# åªæ˜¾ç¤ºä¹¦åå’Œä½œè€…
curl "http://localhost:8080/api/v1/bookstore/books?limit=5" | jq '.data[].title, .data[].author'

# ç»Ÿè®¡è¿”å›çš„ä¹¦ç±æ•°é‡
curl "http://localhost:8080/api/v1/bookstore/books" | jq '.data | length'
```

---

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

### ä½¿ç”¨ Apache Bench

#### æµ‹è¯•ä¹¦ç±åˆ—è¡¨æ€§èƒ½
```bash
ab -n 1000 -c 10 "http://localhost:8080/api/v1/bookstore/books?limit=10"
```

#### æµ‹è¯•æ¦œå•æ€§èƒ½
```bash
ab -n 500 -c 5 "http://localhost:8080/api/v1/bookstore/books?sortBy=word_count&sortOrder=desc&limit=20"
```

**å‚æ•°è¯´æ˜**:
- `-n 1000`: æ€»è¯·æ±‚æ•° 1000
- `-c 10`: å¹¶å‘æ•° 10

**å…³æ³¨æŒ‡æ ‡**:
- Requests per secondï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰
- Time per requestï¼ˆå•ä¸ªè¯·æ±‚æ—¶é—´ï¼‰
- Failed requestsï¼ˆå¤±è´¥è¯·æ±‚æ•°ï¼Œåº”ä¸º 0ï¼‰

---

## ğŸ“ æµ‹è¯•æ£€æŸ¥æ¸…å•

### æ¦œå•åŠŸèƒ½
- [ ] çƒ­é—¨æ¦œï¼ˆæŒ‰å­—æ•°ï¼‰è¿”å›æ­£ç¡®
- [ ] çƒ­é—¨æ¦œï¼ˆæŒ‰ç« èŠ‚æ•°ï¼‰è¿”å›æ­£ç¡®
- [ ] æ–°ä¹¦æ¦œæŒ‰æ—¶é—´æ’åºæ­£ç¡®
- [ ] æ¨èæ¦œåªè¿”å› is_recommended=true çš„ä¹¦
- [ ] ç²¾é€‰æ¦œåªè¿”å› is_featured=true çš„ä¹¦
- [ ] åˆ†ç±»æ¦œæ­£ç¡®ç­›é€‰åˆ†ç±»
- [ ] æ¦œå•æ•°æ®æŒ‰è¦æ±‚æ’åº
- [ ] æ¦œå•é™åˆ¶æ•°é‡ï¼ˆlimitï¼‰ç”Ÿæ•ˆ

### ä¹¦åŸåŠŸèƒ½
- [ ] ä¹¦ç±åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [ ] åˆ†é¡µåŠŸèƒ½æ­£å¸¸
- [ ] æœç´¢è¿”å›æ­£ç¡®ç»“æœ
- [ ] åˆ†ç±»ç­›é€‰æ­£ç¡®
- [ ] æ’åºåŠŸèƒ½æ­£å¸¸
- [ ] ä¹¦ç±è¯¦æƒ…å®Œæ•´

### ç« èŠ‚åŠŸèƒ½
- [ ] ç« èŠ‚åˆ—è¡¨æ­£ç¡®
- [ ] ç« èŠ‚é¡ºåºæ­£ç¡®
- [ ] ç« èŠ‚å†…å®¹å®Œæ•´
- [ ] å­—æ•°ç»Ÿè®¡å‡†ç¡®

### æ€§èƒ½æŒ‡æ ‡
- [ ] ä¹¦ç±åˆ—è¡¨ < 100ms
- [ ] æœç´¢å“åº” < 200ms
- [ ] æ¦œå•æŸ¥è¯¢ < 150ms
- [ ] ç« èŠ‚å†…å®¹ < 150ms
- [ ] å¹¶å‘æµ‹è¯•é€šè¿‡ï¼ˆ50-100 ç”¨æˆ·ï¼‰

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æµ‹è¯•è„šæœ¬æç¤ºè¿æ¥å¤±è´¥
**A**: ç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼š
```bash
go run cmd/server/main.go
```

### Q2: æ¦œå•è¿”å›ç©ºæ•°æ®
**A**: æ£€æŸ¥ç­›é€‰æ¡ä»¶ï¼š
- ç¡®è®¤æ•°æ®åº“ä¸­æœ‰ç¬¦åˆæ¡ä»¶çš„ä¹¦ç±
- æ£€æŸ¥åˆ†ç±»åç§°æ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
- å°è¯•å»æ‰éƒ¨åˆ†ç­›é€‰æ¡ä»¶

### Q3: æœç´¢åŠŸèƒ½æ— ç»“æœ
**A**: ç¡®è®¤æ–‡æœ¬ç´¢å¼•å·²åˆ›å»ºï¼š
```javascript
// åœ¨ MongoDB ä¸­æ£€æŸ¥
db.books.getIndexes()
```

### Q4: ç« èŠ‚åŠ è½½æ…¢
**A**: 
- æ£€æŸ¥ç« èŠ‚å†…å®¹å¤§å°
- ç¡®è®¤ç´¢å¼•å·²åˆ›å»º
- è€ƒè™‘æ·»åŠ ç¼“å­˜

---

## ğŸ“Š é¢„æœŸç»“æœ

### çƒ­é—¨æ¦œï¼ˆæŒ‰å­—æ•°ï¼‰å‰5å
åº”è¯¥çœ‹åˆ°å­—æ•°ä»é«˜åˆ°ä½æ’åˆ—çš„ä¹¦ç±ï¼Œä¾‹å¦‚ï¼š
1. ä¹¦A - 500,000 å­—
2. ä¹¦B - 450,000 å­—
3. ä¹¦C - 400,000 å­—
...

### åˆ†ç±»ç»Ÿè®¡
- ç„å¹»ç±»: XX æœ¬
- ä»™ä¾ ç±»: XX æœ¬
- éƒ½å¸‚ç±»: XX æœ¬
- å…¶ä»–ç±»: XX æœ¬
- æ€»è®¡: 100 æœ¬

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [è¯¦ç»†æµ‹è¯•è®¾è®¡](./é˜…è¯»ç«¯åŠŸèƒ½æµ‹è¯•è®¾è®¡.md)
- [æ•°æ®å¯¼å…¥æŒ‡å—](../../migration/seeds/README_å°è¯´å¯¼å…¥æŒ‡å—.md)
- [å¿«é€Ÿå¼€å§‹](./CNNovel125Kå¿«é€Ÿå¼€å§‹.md)
- [API æ–‡æ¡£](../api/)

---

## ğŸ’¡ æç¤º

1. **è‡ªåŠ¨åŒ–æµ‹è¯•**: ä¼˜å…ˆä½¿ç”¨æä¾›çš„æµ‹è¯•è„šæœ¬
2. **æ‰‹åŠ¨æµ‹è¯•**: ä½¿ç”¨ Postman æˆ–æµè§ˆå™¨è¿›è¡Œæ·±å…¥æµ‹è¯•
3. **æ€§èƒ½æµ‹è¯•**: ä½¿ç”¨ Apache Bench è¿›è¡Œå‹åŠ›æµ‹è¯•
4. **æ•°æ®éªŒè¯**: ä½¿ç”¨ MongoDB Compass ç›´æ¥æŸ¥çœ‹æ•°æ®åº“

---

**åˆ›å»ºæ—¶é—´**: 2025-10-20  
**ç»´æŠ¤è€…**: é’ç¾½æµ‹è¯•å›¢é˜Ÿ

ç¥æµ‹è¯•é¡ºåˆ©ï¼ ğŸ‰

