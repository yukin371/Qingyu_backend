# 软件需求规格说明书 (SRS)

本文档在《需求分析文档》的基础上，按照软件工程规范对需求进行结构化与可验证化的定义，并建立需求到设计/实现/测试的可追踪性。

## 1. 引言
- 目的：明确系统的功能性与非功能性需求，作为设计、开发与测试的基准。
- 范围：Qingyu Backend（AI 辅助写作平台后端）。
- 参考文档：
  - 《需求分析文档》./需求分析文档.md
  - 《项目开发规则》./项目开发规则.md
  - 《JWT身份认证设计》./功能设计/JWT身份认证设计.md
  - 《API导入设计》./ai设计/01.api导入设计.md

## 2. 总体描述
- 用户角色：游客、注册用户、项目所有者、（预留）协作者/管理员
- 运行环境：Go + Gin + MongoDB，容器化部署
- 约束与假设：遵循分层架构 Router→API→Service→Model；使用 JWT 做无状态认证

## 3. 功能性需求
3.1 用户管理
- 注册、登录、退出
- 获取与更新个人资料
- JWT 令牌签发与刷新

3.2 项目管理
- 创建/查询/更新/删除（软删除）项目
- 项目状态：public/private
- 项目成员与权限（预留）

3.3 文档与节点管理
- 树形节点：folder/file；路径与排序
- 文档内容的创建、读取、更新、版本推进

3.4 版本控制
- 版本快照（FileRevision）
- 补丁（Patch）的创建、审批、应用
- 差异与回滚（预研）

3.5 AI 集成
- 文本生成与优化
- 图像生成
- 多提供商/多模型配置管理

3.6 角色/大纲扩展
- 角色卡与关系图
- 大纲、时间线、空间地图

## 4. 非功能性需求
- 性能：P95 接口 < 200ms；并发 1000+
- 安全：JWT、速率限制、输入校验、敏感信息保护
- 可用性：SLA 99.9%；备份与恢复
- 可扩展性：模块化、可插拔 Provider

## 5. 外部接口
- HTTP REST API（详见《API接口总览》./API接口总览.md）
- 数据库接口：MongoDB 集合与索引（见《数据库设计说明书》./数据库设计说明书.md）

## 6. 数据需求（摘要）
- 用户、项目、节点、文档、版本与补丁、AI Provider/Model

## 7. 验收与度量
- 功能用例通过率 ≥ 95%
- 单元测试覆盖率 ≥ 80%
- 性能与安全测试通过既定阈值

## 8. 追踪性
- 追踪矩阵：见《需求追踪矩阵》./需求追踪矩阵.md

## 9. 关联文档
- 架构设计说明书 ./架构设计说明书.md
- 数据库设计说明书 ./数据库设计说明书.md
- API 接口总览 ./API接口总览.md
- 测试计划与用例 ./测试计划与用例.md
- 部署与运维指南 ./部署与运维指南.md
- 安全设计与威胁建模 ./安全设计与威胁建模.md
- 日志与监控 ./日志与监控.md