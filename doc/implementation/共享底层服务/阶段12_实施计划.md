# é˜¶æ®µ12ï¼šé›†æˆæµ‹è¯•ä¸æ–‡æ¡£å®Œå–„ - è¯¦ç»†å®æ–½è®¡åˆ’

> **å¼€å§‹æ—¶é—´**: 2025-10-04  
> **é¢„è®¡å®Œæˆ**: 2025-10-06  
> **çŠ¶æ€**: ğŸš§ è¿›è¡Œä¸­  
> **æ€»å·¥ä½œé‡**: 8-10å°æ—¶

---

## ğŸ“‹ æ€»ä½“è§„åˆ’

### å››å¤§ä»»åŠ¡æ¨¡å—

```
é˜¶æ®µ12
â”œâ”€â”€ ä»»åŠ¡1: é›†æˆæµ‹è¯•ç¼–å†™ (3-4h)
â”‚   â”œâ”€â”€ 1.1 æœåŠ¡å®¹å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ 1.2 è·¨æœåŠ¡è°ƒç”¨æµ‹è¯•
â”‚   â”œâ”€â”€ 1.3 ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ 1.4 æ€§èƒ½åŸºå‡†æµ‹è¯•
â”‚
â”œâ”€â”€ ä»»åŠ¡2: APIå±‚å®ç° (3-4h)
â”‚   â”œâ”€â”€ 2.1 åˆ›å»ºAPI Handler
â”‚   â”œâ”€â”€ 2.2 è¯·æ±‚éªŒè¯å®ç°
â”‚   â”œâ”€â”€ 2.3 å“åº”æ ¼å¼åŒ–
â”‚   â””â”€â”€ 2.4 ä¸­é—´ä»¶é›†æˆ
â”‚
â”œâ”€â”€ ä»»åŠ¡3: æ–‡æ¡£å®Œå–„ (1-2h)
â”‚   â”œâ”€â”€ 3.1 APIä½¿ç”¨æ–‡æ¡£
â”‚   â”œâ”€â”€ 3.2 éƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ 3.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®
â”‚
â””â”€â”€ ä»»åŠ¡4: ç”Ÿäº§å‡†å¤‡ (å¯é€‰)
    â”œâ”€â”€ 4.1 é…ç½®ç®¡ç†
    â”œâ”€â”€ 4.2 ç›‘æ§é›†æˆ
    â”œâ”€â”€ 4.3 æ—¥å¿—è§„èŒƒ
    â””â”€â”€ 4.4 Dockeré…ç½®
```

---

## ğŸ¯ ä»»åŠ¡1ï¼šé›†æˆæµ‹è¯•ç¼–å†™ï¼ˆ3-4å°æ—¶ï¼‰

### 1.1 æœåŠ¡å®¹å™¨é›†æˆæµ‹è¯•ï¼ˆ1å°æ—¶ï¼‰

#### æ­¥éª¤1.1.1ï¼šåˆ›å»ºå®¹å™¨æµ‹è¯•æ–‡ä»¶
**æ–‡ä»¶**: `service/shared/container/shared_service_container_test.go`

**æµ‹è¯•å†…å®¹**:
- [ ] å®¹å™¨åˆ›å»ºæµ‹è¯•
- [ ] æœåŠ¡æ³¨å†Œæµ‹è¯•
- [ ] æœåŠ¡è·å–æµ‹è¯•
- [ ] åˆå§‹åŒ–æµç¨‹æµ‹è¯•
- [ ] å¥åº·æ£€æŸ¥æµ‹è¯•
- [ ] æœåŠ¡çŠ¶æ€æŸ¥è¯¢æµ‹è¯•

**ç¤ºä¾‹ä»£ç æ¡†æ¶**:
```go
func TestSharedServiceContainer_Creation(t *testing.T)
func TestSharedServiceContainer_ServiceRegistration(t *testing.T)
func TestSharedServiceContainer_Initialize(t *testing.T)
func TestSharedServiceContainer_Health(t *testing.T)
func TestSharedServiceContainer_GetServiceStatus(t *testing.T)
```

#### æ­¥éª¤1.1.2ï¼šåˆ›å»ºå·¥å‚æµ‹è¯•æ–‡ä»¶
**æ–‡ä»¶**: `service/shared/container/shared_service_factory_test.go`

**æµ‹è¯•å†…å®¹**:
- [ ] å·¥å‚åˆ›å»ºæµ‹è¯•
- [ ] å•ä¸ªæœåŠ¡åˆ›å»ºæµ‹è¯•
- [ ] æ‰¹é‡æœåŠ¡åˆ›å»ºæµ‹è¯•
- [ ] ä¾èµ–æ³¨å…¥æµ‹è¯•

---

### 1.2 è·¨æœåŠ¡è°ƒç”¨æµ‹è¯•ï¼ˆ1.5å°æ—¶ï¼‰

#### æ­¥éª¤1.2.1ï¼šAuth + Wallet é›†æˆæµ‹è¯•
**æ–‡ä»¶**: `test/integration/auth_wallet_integration_test.go`

**æµ‹è¯•åœºæ™¯**:
1. **ç”¨æˆ·æ³¨å†Œååˆ›å»ºé’±åŒ…**
   - æ³¨å†Œç”¨æˆ·
   - è‡ªåŠ¨åˆ›å»ºé’±åŒ…
   - éªŒè¯é’±åŒ…åˆå§‹çŠ¶æ€

2. **è®¤è¯åçš„é’±åŒ…æ“ä½œ**
   - ç”¨æˆ·ç™»å½•è·å–Token
   - ä½¿ç”¨Tokenè®¿é—®é’±åŒ…API
   - æ‰§è¡Œå……å€¼æ“ä½œ
   - éªŒè¯ä½™é¢å˜åŒ–

3. **æƒé™æ§åˆ¶**
   - æ— Tokenè®¿é—®é’±åŒ…å¤±è´¥
   - æ— æ•ˆTokenè®¿é—®å¤±è´¥
   - è®¿é—®ä»–äººé’±åŒ…å¤±è´¥

**å®ç°æ­¥éª¤**:
```
1. åˆ›å»ºæµ‹è¯•æ•°æ®åº“
2. åˆå§‹åŒ–AuthæœåŠ¡
3. åˆå§‹åŒ–WalletæœåŠ¡
4. æ‰§è¡Œæµ‹è¯•åœºæ™¯
5. æ¸…ç†æµ‹è¯•æ•°æ®
```

#### æ­¥éª¤1.2.2ï¼šAdmin + Wallet é›†æˆæµ‹è¯•
**æ–‡ä»¶**: `test/integration/admin_wallet_integration_test.go`

**æµ‹è¯•åœºæ™¯**:
1. **ç®¡ç†å‘˜å®¡æ ¸æç°**
   - ç”¨æˆ·ç”³è¯·æç°
   - ç®¡ç†å‘˜æ‰¹å‡†æç°
   - éªŒè¯é’±åŒ…ä½™é¢
   - éªŒè¯æç°çŠ¶æ€

2. **ç®¡ç†å‘˜å†»ç»“é’±åŒ…**
   - ç®¡ç†å‘˜å†»ç»“ç”¨æˆ·é’±åŒ…
   - ç”¨æˆ·æ— æ³•è¿›è¡Œé’±åŒ…æ“ä½œ
   - ç®¡ç†å‘˜è§£å†»é’±åŒ…
   - ç”¨æˆ·æ¢å¤æ­£å¸¸æ“ä½œ

#### æ­¥éª¤1.2.3ï¼šStorage + Auth é›†æˆæµ‹è¯•
**æ–‡ä»¶**: `test/integration/storage_auth_integration_test.go`

**æµ‹è¯•åœºæ™¯**:
1. **æ–‡ä»¶ä¸Šä¼ æƒé™éªŒè¯**
   - è®¤è¯ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
   - æœªè®¤è¯ç”¨æˆ·ä¸Šä¼ å¤±è´¥
   - éªŒè¯æ–‡ä»¶æ‰€æœ‰è€…

2. **æ–‡ä»¶è®¿é—®æƒé™**
   - æ‰€æœ‰è€…å¯ä»¥è®¿é—®ç§æœ‰æ–‡ä»¶
   - å…¶ä»–ç”¨æˆ·æ— æ³•è®¿é—®ç§æœ‰æ–‡ä»¶
   - æ‰€æœ‰äººå¯è®¿é—®å…¬å¼€æ–‡ä»¶

---

### 1.3 ç«¯åˆ°ç«¯æµ‹è¯•åœºæ™¯ï¼ˆ1å°æ—¶ï¼‰

#### æ­¥éª¤1.3.1ï¼šå®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
**æ–‡ä»¶**: `test/e2e/user_journey_test.go`

**æµ‹è¯•åœºæ™¯ï¼šæ–°ç”¨æˆ·å®Œæ•´æµç¨‹**
1. ç”¨æˆ·æ³¨å†Œ (Auth)
2. ç”¨æˆ·ç™»å½•è·å–Token (Auth)
3. è‡ªåŠ¨åˆ›å»ºé’±åŒ… (Wallet)
4. å……å€¼åˆ°é’±åŒ… (Wallet)
5. ä¸Šä¼ å¤´åƒæ–‡ä»¶ (Storage)
6. å‘å¸ƒå†…å®¹ (Content - å‡è®¾)
7. æ¥æ”¶ç³»ç»Ÿé€šçŸ¥ (Messaging)
8. ç”³è¯·æç° (Wallet)
9. ç®¡ç†å‘˜å®¡æ ¸ (Admin)

**å®ç°æ­¥éª¤**:
```go
func TestCompleteUserJourney(t *testing.T) {
    // Setup: åˆå§‹åŒ–æ‰€æœ‰æœåŠ¡
    // Step 1: æ³¨å†Œç”¨æˆ·
    // Step 2: ç™»å½•è·å–Token
    // Step 3: éªŒè¯é’±åŒ…åˆ›å»º
    // Step 4: å……å€¼æ“ä½œ
    // Step 5: ä¸Šä¼ æ–‡ä»¶
    // Step 6: ç”³è¯·æç°
    // Step 7: ç®¡ç†å‘˜å®¡æ ¸
    // Cleanup: æ¸…ç†æµ‹è¯•æ•°æ®
}
```

---

### 1.4 æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼ˆ0.5å°æ—¶ï¼‰

#### æ­¥éª¤1.4.1ï¼šåˆ›å»ºåŸºå‡†æµ‹è¯•
**æ–‡ä»¶**: `test/benchmark/service_benchmark_test.go`

**æµ‹è¯•å†…å®¹**:
```go
// AuthæœåŠ¡æ€§èƒ½
func BenchmarkAuthService_Login(b *testing.B)
func BenchmarkAuthService_ValidateToken(b *testing.B)
func BenchmarkAuthService_CheckPermission(b *testing.B)

// WalletæœåŠ¡æ€§èƒ½
func BenchmarkWalletService_GetBalance(b *testing.B)
func BenchmarkWalletService_CreateTransaction(b *testing.B)

// å¹¶å‘æµ‹è¯•
func BenchmarkConcurrent_WalletOperations(b *testing.B)
```

**æ€§èƒ½ç›®æ ‡**:
- TokenéªŒè¯: < 1ms
- æƒé™æ£€æŸ¥: < 2ms (æœ‰ç¼“å­˜)
- ä½™é¢æŸ¥è¯¢: < 5ms
- äº¤æ˜“åˆ›å»º: < 20ms
- å¹¶å‘æ”¯æŒ: 1000+ req/s

---

## ğŸ¯ ä»»åŠ¡2ï¼šAPIå±‚å®ç°ï¼ˆ3-4å°æ—¶ï¼‰

### 2.1 åˆ›å»ºAPI Handlerï¼ˆ1.5å°æ—¶ï¼‰

#### æ­¥éª¤2.1.1ï¼šåˆ›å»ºAuth API Handler
**æ–‡ä»¶**: `api/v1/shared/auth_handler.go`

**APIç«¯ç‚¹**:
```go
// è®¤è¯ç›¸å…³
POST   /api/v1/auth/register      // ç”¨æˆ·æ³¨å†Œ
POST   /api/v1/auth/login         // ç”¨æˆ·ç™»å½•
POST   /api/v1/auth/logout        // ç”¨æˆ·ç™»å‡º
POST   /api/v1/auth/refresh       // åˆ·æ–°Token
GET    /api/v1/auth/profile       // è·å–ä¸ªäººä¿¡æ¯

// è§’è‰²ç›¸å…³
GET    /api/v1/auth/roles         // è·å–è§’è‰²åˆ—è¡¨
POST   /api/v1/auth/roles         // åˆ›å»ºè§’è‰²
PUT    /api/v1/auth/roles/:id     // æ›´æ–°è§’è‰²
DELETE /api/v1/auth/roles/:id     // åˆ é™¤è§’è‰²

// æƒé™ç›¸å…³
POST   /api/v1/auth/check-permission  // æ£€æŸ¥æƒé™
```

**å®ç°æ¡†æ¶**:
```go
type AuthHandler struct {
    authService auth.AuthService
    logger      *zap.Logger
}

func (h *AuthHandler) Register(c *gin.Context) {
    // 1. å‚æ•°ç»‘å®š
    // 2. å‚æ•°éªŒè¯
    // 3. è°ƒç”¨Service
    // 4. æ„å»ºå“åº”
}
```

#### æ­¥éª¤2.1.2ï¼šåˆ›å»ºWallet API Handler
**æ–‡ä»¶**: `api/v1/shared/wallet_handler.go`

**APIç«¯ç‚¹**:
```go
GET    /api/v1/wallet/balance         // æŸ¥è¯¢ä½™é¢
POST   /api/v1/wallet/recharge        // å……å€¼
POST   /api/v1/wallet/consume         // æ¶ˆè´¹
POST   /api/v1/wallet/transfer        // è½¬è´¦
POST   /api/v1/wallet/withdraw        // ç”³è¯·æç°
GET    /api/v1/wallet/transactions    // äº¤æ˜“è®°å½•
GET    /api/v1/wallet/withdrawals     // æç°è®°å½•
```

#### æ­¥éª¤2.1.3ï¼šåˆ›å»ºå…¶ä»–æœåŠ¡çš„Handler
**æ–‡ä»¶**: 
- `api/v1/shared/storage_handler.go`
- `api/v1/shared/messaging_handler.go`
- `api/v1/shared/recommendation_handler.go`
- `api/v1/shared/admin_handler.go`

---

### 2.2 è¯·æ±‚éªŒè¯å®ç°ï¼ˆ0.5å°æ—¶ï¼‰

#### æ­¥éª¤2.2.1ï¼šåˆ›å»ºè¯·æ±‚ç»“æ„ä½“
**æ–‡ä»¶**: `api/v1/shared/requests.go`

**å†…å®¹**:
```go
// Authè¯·æ±‚
type RegisterRequest struct {
    Username string `json:"username" binding:"required,min=3,max=20"`
    Email    string `json:"email" binding:"required,email"`
    Password string `json:"password" binding:"required,min=8"`
}

type LoginRequest struct {
    Username string `json:"username" binding:"required"`
    Password string `json:"password" binding:"required"`
}

// Walletè¯·æ±‚
type RechargeRequest struct {
    Amount float64 `json:"amount" binding:"required,gt=0"`
    Method string  `json:"method" binding:"required,oneof=alipay wechat bank"`
}

type TransferRequest struct {
    ToUserID string  `json:"to_user_id" binding:"required"`
    Amount   float64 `json:"amount" binding:"required,gt=0"`
    Reason   string  `json:"reason" binding:"required"`
}
```

#### æ­¥éª¤2.2.2ï¼šåˆ›å»ºè‡ªå®šä¹‰éªŒè¯å™¨
**æ–‡ä»¶**: `api/v1/shared/validators.go`

**å†…å®¹**:
```go
// æ³¨å†Œè‡ªå®šä¹‰éªŒè¯å™¨
func RegisterCustomValidators() {
    if v, ok := binding.Validator.Engine().(*validator.Validate); ok {
        v.RegisterValidation("username", ValidateUsername)
        v.RegisterValidation("strongpassword", ValidateStrongPassword)
    }
}
```

---

### 2.3 å“åº”æ ¼å¼åŒ–ï¼ˆ0.5å°æ—¶ï¼‰

#### æ­¥éª¤2.3.1ï¼šåˆ›å»ºç»Ÿä¸€å“åº”ç»“æ„
**æ–‡ä»¶**: `api/v1/shared/responses.go`

**å†…å®¹**:
```go
// ç»Ÿä¸€å“åº”ç»“æ„
type Response struct {
    Code      int         `json:"code"`
    Message   string      `json:"message"`
    Data      interface{} `json:"data,omitempty"`
    Error     string      `json:"error,omitempty"`
    Timestamp int64       `json:"timestamp"`
}

// æˆåŠŸå“åº”
func SuccessResponse(c *gin.Context, data interface{}) {
    c.JSON(200, Response{
        Code:      200,
        Message:   "success",
        Data:      data,
        Timestamp: time.Now().Unix(),
    })
}

// é”™è¯¯å“åº”
func ErrorResponse(c *gin.Context, code int, message string, err error) {
    response := Response{
        Code:      code,
        Message:   message,
        Timestamp: time.Now().Unix(),
    }
    if err != nil {
        response.Error = err.Error()
    }
    c.JSON(code, response)
}

// åˆ†é¡µå“åº”
type PaginatedResponse struct {
    Code      int         `json:"code"`
    Message   string      `json:"message"`
    Data      interface{} `json:"data"`
    Page      int         `json:"page"`
    PageSize  int         `json:"page_size"`
    Total     int64       `json:"total"`
    Timestamp int64       `json:"timestamp"`
}
```

---

### 2.4 ä¸­é—´ä»¶é›†æˆï¼ˆ0.5å°æ—¶ï¼‰

#### æ­¥éª¤2.4.1ï¼šåˆ›å»ºä¸­é—´ä»¶é“¾
**æ–‡ä»¶**: `api/v1/shared/middleware_setup.go`

**å†…å®¹**:
```go
func SetupMiddlewares(r *gin.Engine, container *container.SharedServiceContainer) {
    // å…¨å±€ä¸­é—´ä»¶
    r.Use(gin.Recovery())
    r.Use(CORSMiddleware())
    r.Use(LoggerMiddleware())
    r.Use(RateLimitMiddleware())
    
    // è®¤è¯ä¸­é—´ä»¶
    authMiddleware := NewAuthMiddleware(container.AuthService())
    
    // æƒé™ä¸­é—´ä»¶
    permissionMiddleware := NewPermissionMiddleware(container.AuthService())
    
    return authMiddleware, permissionMiddleware
}
```

#### æ­¥éª¤2.4.2ï¼šåˆ›å»ºè·¯ç”±ç»„
**æ–‡ä»¶**: `router/shared/shared_router.go`

**å†…å®¹**:
```go
func SetupSharedRoutes(r *gin.Engine, container *container.SharedServiceContainer) {
    // åˆ›å»ºhandlers
    authHandler := NewAuthHandler(container.AuthService())
    walletHandler := NewWalletHandler(container.WalletService())
    
    // API v1
    v1 := r.Group("/api/v1")
    {
        // å…¬å¼€è·¯ç”±
        auth := v1.Group("/auth")
        {
            auth.POST("/register", authHandler.Register)
            auth.POST("/login", authHandler.Login)
        }
        
        // éœ€è¦è®¤è¯çš„è·¯ç”±
        authenticated := v1.Group("")
        authenticated.Use(authMiddleware.RequireAuth())
        {
            // é’±åŒ…ç›¸å…³
            wallet := authenticated.Group("/wallet")
            {
                wallet.GET("/balance", walletHandler.GetBalance)
                wallet.POST("/recharge", walletHandler.Recharge)
                wallet.POST("/consume", walletHandler.Consume)
            }
            
            // éœ€è¦ç®¡ç†å‘˜æƒé™
            admin := authenticated.Group("/admin")
            admin.Use(permissionMiddleware.RequireRole("admin"))
            {
                admin.POST("/withdraw/approve", walletHandler.ApproveWithdraw)
                admin.POST("/user/ban", adminHandler.BanUser)
            }
        }
    }
}
```

---

## ğŸ¯ ä»»åŠ¡3ï¼šæ–‡æ¡£å®Œå–„ï¼ˆ1-2å°æ—¶ï¼‰

### 3.1 APIä½¿ç”¨æ–‡æ¡£ï¼ˆ0.5å°æ—¶ï¼‰

#### æ­¥éª¤3.1.1ï¼šåˆ›å»ºAPIæ–‡æ¡£
**æ–‡ä»¶**: `doc/api/å…±äº«æœåŠ¡APIæ–‡æ¡£.md`

**å†…å®¹ç»“æ„**:
```markdown
# å…±äº«æœåŠ¡APIæ–‡æ¡£

## åŸºç¡€ä¿¡æ¯
- Base URL: http://localhost:8080/api/v1
- è®¤è¯æ–¹å¼: Bearer Token
- å“åº”æ ¼å¼: JSON

## è®¤è¯æ¥å£
### ç”¨æˆ·æ³¨å†Œ
POST /auth/register
### ç”¨æˆ·ç™»å½•
POST /auth/login

## é’±åŒ…æ¥å£
### æŸ¥è¯¢ä½™é¢
GET /wallet/balance
### å……å€¼
POST /wallet/recharge

## é”™è¯¯ç è¯´æ˜
...
```

---

### 3.2 éƒ¨ç½²æŒ‡å—ï¼ˆ0.5å°æ—¶ï¼‰

#### æ­¥éª¤3.2.1ï¼šåˆ›å»ºéƒ¨ç½²æ–‡æ¡£
**æ–‡ä»¶**: `doc/deployment/éƒ¨ç½²æŒ‡å—.md`

**å†…å®¹**:
1. ç¯å¢ƒè¦æ±‚
2. ä¾èµ–æœåŠ¡éƒ¨ç½²ï¼ˆMongoDB, Redisï¼‰
3. åº”ç”¨éƒ¨ç½²
4. Dockeréƒ¨ç½²
5. ç¯å¢ƒå˜é‡é…ç½®
6. å¥åº·æ£€æŸ¥
7. å¸¸è§é—®é¢˜

---

### 3.3 æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼ˆ0.5å°æ—¶ï¼‰

#### æ­¥éª¤3.3.1ï¼šåˆ›å»ºä¼˜åŒ–æ–‡æ¡£
**æ–‡ä»¶**: `doc/optimization/æ€§èƒ½ä¼˜åŒ–æŒ‡å—.md`

**å†…å®¹**:
1. æ•°æ®åº“ä¼˜åŒ–
2. ç¼“å­˜ç­–ç•¥
3. å¹¶å‘æ§åˆ¶
4. è¿æ¥æ± é…ç½®
5. æŸ¥è¯¢ä¼˜åŒ–
6. ç›‘æ§æŒ‡æ ‡

---

## ğŸ¯ ä»»åŠ¡4ï¼šç”Ÿäº§å‡†å¤‡ï¼ˆå¯é€‰ï¼Œ2-3å°æ—¶ï¼‰

### 4.1 é…ç½®ç®¡ç†ä¼˜åŒ–

#### æ­¥éª¤4.1.1ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶
**æ–‡ä»¶**: `config/config.yaml`

**å†…å®¹**:
```yaml
server:
  port: 8080
  mode: release
  
database:
  mongodb:
    uri: ${MONGODB_URI}
    database: qingyu
  redis:
    host: ${REDIS_HOST}
    port: ${REDIS_PORT}
    password: ${REDIS_PASSWORD}

jwt:
  secret: ${JWT_SECRET}
  expire: 24h
  refresh_expire: 168h

services:
  auth:
    session_expire: 24h
  wallet:
    min_withdraw: 10
  storage:
    base_path: /data/uploads
    max_file_size: 10485760
```

---

### 4.2 ç›‘æ§æŒ‡æ ‡é›†æˆ

#### æ­¥éª¤4.2.1ï¼šæ·»åŠ PrometheusæŒ‡æ ‡
**æ–‡ä»¶**: `middleware/prometheus.go`

**æŒ‡æ ‡**:
- http_requests_total
- http_request_duration_seconds
- service_health_status
- database_connections
- cache_hit_rate

---

### 4.3 æ—¥å¿—è§„èŒƒåŒ–

#### æ­¥éª¤4.3.1ï¼šåˆ›å»ºæ—¥å¿—ä¸­é—´ä»¶
**æ–‡ä»¶**: `middleware/logger.go`

**æ—¥å¿—æ ¼å¼**:
```json
{
  "timestamp": "2025-10-04T10:00:00Z",
  "level": "info",
  "method": "POST",
  "path": "/api/v1/wallet/recharge",
  "status": 200,
  "latency": "15ms",
  "user_id": "user123",
  "request_id": "req-abc-123"
}
```

---

### 4.4 Dockeréƒ¨ç½²é…ç½®

#### æ­¥éª¤4.4.1ï¼šæ›´æ–°Dockerfile
**æ–‡ä»¶**: `Dockerfile`

#### æ­¥éª¤4.4.2ï¼šæ›´æ–°docker-compose.yml
**æ–‡ä»¶**: `docker-compose.yml`

**æœåŠ¡**:
- app (åº”ç”¨æœåŠ¡)
- mongodb (æ•°æ®åº“)
- redis (ç¼“å­˜)
- prometheus (ç›‘æ§)
- grafana (å¯è§†åŒ–)

---

## ğŸ“… å®æ–½æ—¶é—´è¡¨

### Day 1 (2025-10-04)
- [x] åˆ¶å®šè¯¦ç»†å®æ–½è®¡åˆ’
- [ ] ä»»åŠ¡1.1: æœåŠ¡å®¹å™¨é›†æˆæµ‹è¯•
- [ ] ä»»åŠ¡1.2: è·¨æœåŠ¡è°ƒç”¨æµ‹è¯•
- [ ] ä»»åŠ¡2.1: åˆ›å»ºAPI Handler (éƒ¨åˆ†)

### Day 2 (2025-10-05)
- [ ] ä»»åŠ¡2.1: å®ŒæˆAPI Handler
- [ ] ä»»åŠ¡2.2: è¯·æ±‚éªŒè¯å®ç°
- [ ] ä»»åŠ¡2.3: å“åº”æ ¼å¼åŒ–
- [ ] ä»»åŠ¡2.4: ä¸­é—´ä»¶é›†æˆ
- [ ] ä»»åŠ¡1.3: ç«¯åˆ°ç«¯æµ‹è¯•

### Day 3 (2025-10-06)
- [ ] ä»»åŠ¡1.4: æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] ä»»åŠ¡3: æ–‡æ¡£å®Œå–„
- [ ] ä»»åŠ¡4: ç”Ÿäº§å‡†å¤‡ (å¯é€‰)
- [ ] æ€»ç»“ä¸éªŒæ”¶

---

## âœ… éªŒæ”¶æ ‡å‡†

### é›†æˆæµ‹è¯•
- [ ] æœåŠ¡å®¹å™¨æµ‹è¯•é€šè¿‡ç‡ 100%
- [ ] è·¨æœåŠ¡è°ƒç”¨æµ‹è¯•è¦†ç›– 3+ åœºæ™¯
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½åŸºå‡†è¾¾æ ‡

### APIå±‚
- [ ] è‡³å°‘å®ç° 15+ APIç«¯ç‚¹
- [ ] æ‰€æœ‰APIæœ‰è¯·æ±‚éªŒè¯
- [ ] ç»Ÿä¸€å“åº”æ ¼å¼
- [ ] ä¸­é—´ä»¶æ­£ç¡®é›†æˆ

### æ–‡æ¡£
- [ ] APIæ–‡æ¡£å®Œæ•´
- [ ] éƒ¨ç½²æŒ‡å—æ¸…æ™°
- [ ] ä¼˜åŒ–å»ºè®®å®ç”¨

### ä»£ç è´¨é‡
- [ ] æ— linteré”™è¯¯
- [ ] æµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
- [ ] ä»£ç æ³¨é‡Šå®Œå–„

---

## ğŸ“Š è¿›åº¦è·Ÿè¸ª

| ä»»åŠ¡ | é¢„è®¡å·¥æ—¶ | å®é™…å·¥æ—¶ | çŠ¶æ€ | å®Œæˆåº¦ |
|------|----------|----------|------|--------|
| ä»»åŠ¡1: é›†æˆæµ‹è¯• | 3-4h | - | â¸ï¸ | 0% |
| ä»»åŠ¡2: APIå±‚ | 3-4h | - | â¸ï¸ | 0% |
| ä»»åŠ¡3: æ–‡æ¡£ | 1-2h | - | â¸ï¸ | 0% |
| ä»»åŠ¡4: ç”Ÿäº§å‡†å¤‡ | 2-3h | - | â¸ï¸ | 0% |
| **æ€»è®¡** | **9-13h** | **0h** | - | **0%** |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³å¼€å§‹**: ä»»åŠ¡1.1 - æœåŠ¡å®¹å™¨é›†æˆæµ‹è¯•

**å‘½ä»¤**:
```bash
# 1. åˆ›å»ºæµ‹è¯•æ–‡ä»¶
touch service/shared/container/shared_service_container_test.go

# 2. å¼€å§‹ç¼–å†™æµ‹è¯•
code service/shared/container/shared_service_container_test.go
```

---

**åˆ›å»ºæ—¶é—´**: 2025-10-04  
**è®¡åˆ’åˆ¶å®šè€…**: é’ç¾½é¡¹ç›®ç»„  
**çŠ¶æ€**: ğŸ“‹ è®¡åˆ’å®Œæˆï¼Œå¾…æ‰§è¡Œ
