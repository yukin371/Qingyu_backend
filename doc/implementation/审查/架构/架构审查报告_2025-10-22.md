# é’ç¾½å¹³å°æ¶æ„å®¡æŸ¥æŠ¥å‘Š

> **å®¡æŸ¥æ—¥æœŸ**: 2025-10-22  
> **å®¡æŸ¥èŒƒå›´**: å…¨å±‚çº§æ¶æ„ç»„ç»‡ç»“æ„  
> **å®¡æŸ¥ç›®æ ‡**: æ£€æŸ¥æ¨¡å—åˆ’åˆ†æ¸…æ™°åº¦ï¼Œè¯†åˆ«é—®é¢˜ï¼Œæä¾›é‡æ„å»ºè®®

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

### æ€»ä½“è¯„ä¼°

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **æ¨¡å—åˆ’åˆ†æ¸…æ™°åº¦** | â­â­â­â˜†â˜† (3/5) | éƒ¨åˆ†æ¨¡å—åˆ’åˆ†æ¸…æ™°ï¼Œä½†å­˜åœ¨ä¸ä¸€è‡´å’Œå†—ä½™ |
| **å‘½åä¸€è‡´æ€§** | â­â­â­â˜†â˜† (3/5) | éƒ¨åˆ†å‘½åä¸ç»Ÿä¸€ï¼Œéœ€è¦è§„èŒƒåŒ– |
| **å±‚çº§å¯¹é½åº¦** | â­â­â­â­â˜† (4/5) | å¤§éƒ¨åˆ†å±‚çº§å¯¹é½è‰¯å¥½ï¼Œå°‘æ•°ç¼ºå¤± |
| **ä»£ç ç»„ç»‡** | â­â­â­â­â˜† (4/5) | æ•´ä½“ç»„ç»‡åˆç†ï¼Œéœ€æ¸…ç†ç©ºç›®å½• |
| **å¯ç»´æŠ¤æ€§** | â­â­â­â˜†â˜† (3/5) | éƒ¨åˆ†æ¨¡å—è¾¹ç•Œæ¨¡ç³Šï¼Œå½±å“ç»´æŠ¤ |

### å…³é”®å‘ç°

âœ… **ä¼˜åŠ¿**:
- æ ¸å¿ƒæ¨¡å—ï¼ˆAIã€Bookstoreã€Readerï¼‰æ¶æ„æ¸…æ™°ï¼Œæœ€è¿‘å®Œæˆé‡æ„
- Repositoryæ¨¡å¼å®æ–½å®Œæ•´ï¼Œæ¥å£å®šä¹‰è§„èŒƒ
- Serviceå±‚ä¾èµ–æ³¨å…¥å®æ–½è‰¯å¥½
- æ–°å¢æ¨¡å—ï¼ˆbookstore/readeråˆ†ç¦»ï¼‰è®¾è®¡ä¼˜ç§€

âš ï¸ **é—®é¢˜**:
- **å‘½åä¸ä¸€è‡´**: APIå±‚`system`å’Œ`writer`ç¼ºå°‘Serviceå±‚å¯¹åº”
- **ç©ºç›®å½•æ±¡æŸ“**: å¤šä¸ªç©ºç›®å½•å½±å“é¡¹ç›®ç»“æ„æ¸…æ™°åº¦
- **æ¨¡å—è¾¹ç•Œæ¨¡ç³Š**: `document` vs `project`ã€`reading` vs `reader` vs `bookstore`
- **é‡å¤å®šä¹‰**: æŸäº›åŠŸèƒ½åœ¨å¤šä¸ªå±‚çº§é‡å¤
- **DTOä½ç½®æ··ä¹±**: æœ‰çš„åœ¨serviceå†…ï¼Œæœ‰çš„åœ¨APIå†…

---

## ğŸ” è¯¦ç»†å®¡æŸ¥ç»“æœ

### 1. APIå±‚ (`api/v1/`)

#### 1.1 æ¨¡å—åˆ†å¸ƒ

| æ¨¡å—ç›®å½• | æ–‡ä»¶æ•° | çŠ¶æ€ | å¯¹åº”Service | é—®é¢˜ |
|---------|--------|------|------------|------|
| `ai/` | 5 | âœ… è‰¯å¥½ | `service/ai/` | æ—  |
| `bookstore/` | 7 | âœ… ä¼˜ç§€ | `service/bookstore/` | æ— ï¼Œæœ€è¿‘é‡æ„ |
| `reader/` | 7 | âœ… ä¼˜ç§€ | `service/reading/` | å‘½åä¸å¯¹åº” |
| `recommendation/` | 3 | âœ… è‰¯å¥½ | `service/recommendation/` | æ—  |
| `shared/` | 7 | âœ… è‰¯å¥½ | `service/shared/` | æ—  |
| **`system/`** | 2 | âš ï¸ é—®é¢˜ | âŒ æ— å¯¹åº” | **ç¼ºå°‘Serviceå±‚** |
| **`writer/`** | 7 | âš ï¸ é—®é¢˜ | âŒ æ— å¯¹åº” | **ç¼ºå°‘Serviceå±‚** |

#### 1.2 å‘ç°çš„é—®é¢˜

**é—®é¢˜1: `api/v1/system/` æ¨¡å—å®šä½ä¸æ¸…**
- **ç°çŠ¶**: åŒ…å«`sys_user.go`å’Œ`user_dto.go`
- **é—®é¢˜**: ä¸`api/v1/shared/auth_api.go`åŠŸèƒ½é‡å 
- **å½±å“**: ç”¨æˆ·ç®¡ç†APIåˆ†æ•£åœ¨ä¸¤å¤„ï¼Œç»´æŠ¤å›°éš¾

**é—®é¢˜2: `api/v1/writer/` ç¼ºå°‘Serviceå±‚æ”¯æŒ**
- **ç°çŠ¶**: åŒ…å«7ä¸ªAPIæ–‡ä»¶ï¼ˆauditã€documentã€editorã€projectã€statsã€versionï¼‰
- **é—®é¢˜**: å¯¹åº”çš„Serviceåˆ†æ•£åœ¨`service/audit/`ã€`service/document/`ã€`service/project/`
- **å½±å“**: APIå±‚å’ŒServiceå±‚å‘½åä¸å¯¹åº”ï¼Œé™ä½ä»£ç å¯è¯»æ€§

**é—®é¢˜3: `api/v1/reader/` vs `service/reading/`å‘½åä¸ä¸€è‡´**
- **APIå±‚**: `reader/`
- **Serviceå±‚**: `reading/`
- **å»ºè®®**: ç»Ÿä¸€ä¸º`reader`

#### 1.3 é‡æ„å»ºè®®

```
å»ºè®®1: åˆå¹¶ç”¨æˆ·ç®¡ç†API
- åˆ é™¤ api/v1/system/ ç›®å½•
- å°† sys_user.go è¿ç§»åˆ° api/v1/shared/user_api.go
- å°† user_dto.go è¿ç§»åˆ° service/user/ æˆ–åˆ›å»ºç»Ÿä¸€çš„ dto/ ç›®å½•

å»ºè®®2: é‡ç»„å†™ä½œç«¯API
- ä¿ç•™ api/v1/writer/ ä½œä¸ºç»Ÿä¸€å…¥å£
- åœ¨ service/ ä¸‹åˆ›å»º service/writer/ ç›®å½•
- å°† document_service, project_service, audit_service ç­‰è¿ç§»åˆ° service/writer/

å»ºè®®3: ç»Ÿä¸€readerå‘½å
- å°† service/reading/ é‡å‘½åä¸º service/reader/
- æˆ–å°† api/v1/reader/ é‡å‘½åä¸º api/v1/reading/
- æ¨èå‰è€…ï¼ˆreaderæ›´ç¬¦åˆä¸šåŠ¡è¯­ä¹‰ï¼‰
```

---

### 2. Serviceå±‚ (`service/`)

#### 2.1 æ¨¡å—åˆ†å¸ƒ

| æ¨¡å—ç›®å½• | çŠ¶æ€ | å¯¹åº”API | é—®é¢˜ |
|---------|------|---------|------|
| `ai/` | âœ… ä¼˜ç§€ | `api/v1/ai/` | æ—  |
| `audit/` | âš ï¸ å­¤ç«‹ | `api/v1/writer/audit_api.go` | åº”å½’å…¥writer |
| `bookstore/` | âœ… ä¼˜ç§€ | `api/v1/bookstore/` | æ—  |
| `document/` | âš ï¸ å­¤ç«‹ | `api/v1/writer/document_api.go` | åº”å½’å…¥writer |
| `project/` | âš ï¸ å­¤ç«‹ | `api/v1/writer/project_api.go` | åº”å½’å…¥writer |
| `reading/` | âš ï¸ å‘½å | `api/v1/reader/` | å‘½åä¸ä¸€è‡´ |
| `recommendation/` | âœ… è‰¯å¥½ | `api/v1/recommendation/` | æ—  |
| `shared/` | âœ… è‰¯å¥½ | `api/v1/shared/` | æ—  |
| **`social/`** | âŒ ç©ºç›®å½• | âŒ æ—  | **åˆ é™¤æˆ–å®ç°** |
| `stats/` | âš ï¸ å­¤ç«‹ | `api/v1/writer/stats_api.go` | åº”å½’å…¥writer |
| **`task/`** | âŒ ç©ºç›®å½• | âŒ æ—  | **åˆ é™¤æˆ–å®ç°** |
| `user/` | âœ… è‰¯å¥½ | `api/v1/shared/auth_api.go` | æ—  |

#### 2.2 å‘ç°çš„é—®é¢˜

**é—®é¢˜1: å†™ä½œç«¯æœåŠ¡åˆ†æ•£**
- **ç°çŠ¶**: `audit/`ã€`document/`ã€`project/`ã€`stats/` åˆ†æ•£åœ¨é¡¶å±‚
- **é—®é¢˜**: ç¼ºå°‘ç»Ÿä¸€çš„`writer`æœåŠ¡å…¥å£
- **å½±å“**: éš¾ä»¥ç†è§£å†™ä½œç«¯çš„å®Œæ•´ä¸šåŠ¡æµç¨‹

**é—®é¢˜2: ç©ºç›®å½•æ±¡æŸ“**
- `service/social/` - ç©ºç›®å½•
- `service/task/` - ç©ºç›®å½•
- **å½±å“**: è¯¯å¯¼å¼€å‘è€…ï¼Œé™ä½é¡¹ç›®ç»“æ„æ¸…æ™°åº¦

**é—®é¢˜3: `document` vs `project` è¾¹ç•Œæ¨¡ç³Š**
- `service/document/` - æ–‡æ¡£å†…å®¹ç®¡ç†
- `service/project/` - é¡¹ç›®å’Œæ–‡æ¡£æ ‘ç®¡ç†
- **é—®é¢˜**: ä¸¤è€…èŒè´£é‡å ï¼Œåº”è¯¥åˆå¹¶æˆ–æ˜ç¡®è¾¹ç•Œ

#### 2.3 é‡æ„å»ºè®®

```
å»ºè®®1: åˆ›å»ºç»Ÿä¸€çš„Writer Service
service/
â”œâ”€â”€ writer/
â”‚   â”œâ”€â”€ audit_service.go        # ä» service/audit/ è¿ç§»
â”‚   â”œâ”€â”€ document_service.go     # ä» service/document/ è¿ç§»
â”‚   â”œâ”€â”€ project_service.go      # ä» service/project/ è¿ç§»
â”‚   â”œâ”€â”€ stats_service.go        # ä» service/stats/ è¿ç§»
â”‚   â”œâ”€â”€ version_service.go      # ä» service/project/ è¿ç§»
â”‚   â””â”€â”€ editor_service.go       # æ–°å¢
â””â”€â”€ reader/                     # ä» service/reading/ é‡å‘½å
    â”œâ”€â”€ reader_service.go
    â”œâ”€â”€ annotation_cache_service.go
    â”œâ”€â”€ setting_service.go
    â””â”€â”€ vip_permission_service.go

å»ºè®®2: æ¸…ç†ç©ºç›®å½•
- åˆ é™¤ service/social/
- åˆ é™¤ service/task/
- æˆ–è€…ä¸ºPhase 3è§„åˆ’æ·»åŠ  .gitkeep æ–‡ä»¶

å»ºè®®3: åˆå¹¶documentå’Œproject
- å°†document_serviceåˆå¹¶åˆ°project_service
- æˆ–æ˜ç¡®èŒè´£ï¼šprojectç®¡ç†é¡¹ç›®å…ƒæ•°æ®ï¼Œdocumentç®¡ç†å†…å®¹
```

---

### 3. Repositoryå±‚ (`repository/`)

#### 3.1 MongoDBå®ç°åˆ†å¸ƒ

| æ¨¡å—ç›®å½• | çŠ¶æ€ | å¯¹åº”Service | æ¥å£å®šä¹‰ |
|---------|------|------------|---------|
| `bookstore/` | âœ… ä¼˜ç§€ | `service/bookstore/` | `interfaces/bookstore/` âœ… |
| `reading/` | âœ… è‰¯å¥½ | `service/reading/` | `interfaces/reading/` âœ… |
| `recommendation/` | âœ… è‰¯å¥½ | `service/recommendation/` | `interfaces/recommendation/` âœ… |
| `shared/` | âœ… è‰¯å¥½ | `service/shared/` | `interfaces/shared/` âœ… |
| `stats/` | âš ï¸ å­¤ç«‹ | `service/stats/` | `interfaces/stats/` âœ… |
| `user/` | âœ… è‰¯å¥½ | `service/user/` | `interfaces/user/` âœ… |
| `writing/` | âœ… è‰¯å¥½ | `service/project/`, `service/document/` | `interfaces/writing/` âœ… |
| `quota_repository.go` | âš ï¸ å•æ–‡ä»¶ | `service/ai/quota_service.go` | âŒ åº”ç§»å…¥å­ç›®å½• |

#### 3.2 æ¥å£å®šä¹‰åˆ†å¸ƒ

| æ¥å£ç›®å½• | çŠ¶æ€ | MongoDBå®ç° | é—®é¢˜ |
|---------|------|------------|------|
| `audit/` | âœ… å®Œæ•´ | âŒ ç¼ºå¤± | **æœªå®ç°MongoDB Repository** |
| `bookstore/` | âœ… å®Œæ•´ | âœ… å®Œæ•´ | æ—  |
| `infrastructure/` | âœ… ä¼˜ç§€ | N/A | æ—  |
| `reading/` | âœ… å®Œæ•´ | âœ… å®Œæ•´ | æ—  |
| `recommendation/` | âœ… å®Œæ•´ | âœ… å®Œæ•´ | æ—  |
| `shared/` | âœ… å®Œæ•´ | âœ… å®Œæ•´ | æ—  |
| `stats/` | âœ… å®Œæ•´ | âœ… å®Œæ•´ | æ—  |
| `user/` | âœ… å®Œæ•´ | âœ… å®Œæ•´ | æ—  |
| `writing/` | âœ… å®Œæ•´ | âœ… å®Œæ•´ | æ—  |
| `QuotaRepo_interface.go` | âš ï¸ å•æ–‡ä»¶ | âœ… å®ç° | **åº”ç§»å…¥aiå­ç›®å½•** |

#### 3.3 å‘ç°çš„é—®é¢˜

**é—®é¢˜1: Audit Repositoryç¼ºå¤±**
- **æ¥å£**: `repository/interfaces/audit/` å·²å®šä¹‰å®Œæ•´
- **å®ç°**: âŒ ç¼ºå°‘MongoDBå®ç°
- **å½±å“**: å®¡æ ¸æœåŠ¡æ— æ³•æŒä¹…åŒ–æ•°æ®

**é—®é¢˜2: Quota Repositoryä½ç½®ä¸å½“**
- **ç°çŠ¶**: å•æ–‡ä»¶åœ¨é¡¶å±‚
- **å»ºè®®**: ç§»å…¥`repository/mongodb/ai/`å­ç›®å½•

**é—®é¢˜3: Writing vs Document/Projectå‘½åæ··ä¹±**
- **Repository**: `writing/`
- **Service**: `document/` + `project/`
- **API**: `writer/`
- **å»ºè®®**: ç»Ÿä¸€ä¸º`writer`

#### 3.4 é‡æ„å»ºè®®

```
å»ºè®®1: å®ç°Audit Repository
repository/mongodb/
â””â”€â”€ audit/
    â”œâ”€â”€ audit_record_repository_mongo.go
    â”œâ”€â”€ sensitive_word_repository_mongo.go
    â””â”€â”€ violation_record_repository_mongo.go

å»ºè®®2: é‡ç»„Quota Repository
repository/mongodb/
â””â”€â”€ ai/
    â””â”€â”€ quota_repository_mongo.go  # ä»é¡¶å±‚ç§»å…¥

å»ºè®®3: ç»Ÿä¸€å‘½å
- å°† repository/mongodb/writing/ é‡å‘½åä¸º writer/
- å°† repository/interfaces/writing/ é‡å‘½åä¸º writer/
```

---

### 4. Modelå±‚ (`models/`)

#### 4.1 æ¨¡å—åˆ†å¸ƒ

| æ¨¡å—ç›®å½• | æ–‡ä»¶æ•° | çŠ¶æ€ | é—®é¢˜ |
|---------|--------|------|------|
| `ai/` | 7 | âœ… è‰¯å¥½ | æ—  |
| `audit/` | 3 | âœ… è‰¯å¥½ | æ—  |
| `document/` | 9 | âœ… è‰¯å¥½ | æ—  |
| `reading/bookstore/` | 8 | âœ… ä¼˜ç§€ | æ—  |
| `reading/reader/` | 4 | âœ… ä¼˜ç§€ | æ—  |
| **`reading/recommendation/`** | âŒ ç©º | âŒ ç©ºç›®å½• | **åˆ é™¤** |
| **`reading/social/`** | âŒ ç©º | âŒ ç©ºç›®å½• | **åˆ é™¤** |
| **`reading/task/`** | âŒ ç©º | âŒ ç©ºç›®å½• | **åˆ é™¤** |
| `recommendation/reco/` | 3 | âœ… è‰¯å¥½ | è·¯å¾„å†—ä½™ |
| `shared/` | å¤šä¸ªå­ç›®å½• | âœ… è‰¯å¥½ | æ—  |
| `stats/` | 3 | âœ… è‰¯å¥½ | æ—  |
| `users/` | 3 | âœ… è‰¯å¥½ | ä¸user/é‡å¤ï¼Ÿ |
| **`writer/`** | âŒ ç©º | âŒ ç©ºç›®å½• | **åˆ é™¤æˆ–å¡«å……** |

#### 4.2 å‘ç°çš„é—®é¢˜

**é—®é¢˜1: ç©ºç›®å½•è¿‡å¤š**
- `models/reading/recommendation/` - ç©º
- `models/reading/social/` - ç©º
- `models/reading/task/` - ç©º
- `models/writer/` - ç©º
- **å½±å“**: è¯¯å¯¼å¼€å‘è€…ï¼Œé™ä½é¡¹ç›®ç»“æ„æ¸…æ™°åº¦

**é—®é¢˜2: `reading/`ä¸‹ç›®å½•ç»“æ„å¤æ‚**
```
models/reading/
â”œâ”€â”€ bookstore/    # 8ä¸ªæ–‡ä»¶ - åˆç†
â”œâ”€â”€ reader/       # 4ä¸ªæ–‡ä»¶ - åˆç†
â”œâ”€â”€ recommendation/ # ç©º - åˆ é™¤
â”œâ”€â”€ social/       # ç©º - åˆ é™¤
â””â”€â”€ task/         # ç©º - åˆ é™¤
```

**é—®é¢˜3: `recommendation/reco/`è·¯å¾„å†—ä½™**
- **ç°çŠ¶**: `models/recommendation/reco/`
- **å»ºè®®**: ç®€åŒ–ä¸º`models/recommendation/`

**é—®é¢˜4: `users/` vs `user/` å‘½åä¸ä¸€è‡´**
- **æ¨¡å‹**: `models/users/`
- **æœåŠ¡**: `service/user/`
- **Repository**: `repository/.../user/`
- **å»ºè®®**: ç»Ÿä¸€ä¸º`user`

#### 4.3 é‡æ„å»ºè®®

```
å»ºè®®1: æ¸…ç†ç©ºç›®å½•
- åˆ é™¤ models/reading/recommendation/
- åˆ é™¤ models/reading/social/
- åˆ é™¤ models/reading/task/
- åˆ é™¤ models/writer/ï¼ˆæˆ–å¡«å……å†™ä½œç«¯æ¨¡å‹ï¼‰

å»ºè®®2: ç®€åŒ–recommendationè·¯å¾„
models/
â””â”€â”€ recommendation/
    â”œâ”€â”€ behavior.go      # ä» reco/ ç§»å‡º
    â”œâ”€â”€ item.go         # ä» reco/ ç§»å‡º
    â””â”€â”€ profile.go      # ä» reco/ ç§»å‡º

å»ºè®®3: ç»Ÿä¸€ç”¨æˆ·æ¨¡å‹å‘½å
- å°† models/users/ é‡å‘½åä¸º models/user/
```

---

### 5. Routerå±‚ (`router/`)

#### 5.1 æ¨¡å—åˆ†å¸ƒ

| æ¨¡å—ç›®å½• | æ–‡ä»¶æ•° | çŠ¶æ€ | å¯¹åº”API | é—®é¢˜ |
|---------|--------|------|---------|------|
| `ai/` | 1 | âœ… è‰¯å¥½ | `api/v1/ai/` | æ—  |
| `bookstore/` | 1 | âœ… ä¼˜ç§€ | `api/v1/bookstore/` | æ—  |
| `reader/` | 1 | âœ… ä¼˜ç§€ | `api/v1/reader/` | æ—  |
| `project/` | 2 | âš ï¸ å‘½å | `api/v1/writer/` | å‘½åä¸ä¸€è‡´ |
| **`reading/`** | âŒ ç©º | âŒ ç©ºç›®å½• | âŒ æ—  | **åˆ é™¤** |
| `recommendation/` | 1 | âœ… è‰¯å¥½ | `api/v1/recommendation/` | æ—  |
| `shared/` | 1 | âœ… è‰¯å¥½ | `api/v1/shared/` | æ—  |
| `users/` | 1 | âœ… è‰¯å¥½ | `api/v1/system/`? | å‘½åä¸æ¸… |
| `writer/` | 3 | âœ… è‰¯å¥½ | `api/v1/writer/` | æ—  |

#### 5.2 å‘ç°çš„é—®é¢˜

**é—®é¢˜1: ç©ºç›®å½•**
- `router/reading/` - ç©ºç›®å½•
- **å»ºè®®**: åˆ é™¤

**é—®é¢˜2: `router/project/` vs `api/v1/writer/`ä¸å¯¹åº”**
- **Router**: `project/` (2ä¸ªæ–‡ä»¶)
- **API**: `writer/` (åŒ…å«projectç›¸å…³)
- **å»ºè®®**: åˆå¹¶åˆ°`router/writer/`

**é—®é¢˜3: `router/users/` vs `api/v1/system/`å‘½åæ··ä¹±**
- **Router**: `users/sys_user.go`
- **API**: `system/sys_user.go`
- **å»ºè®®**: ç»Ÿä¸€å‘½å

#### 5.3 é‡æ„å»ºè®®

```
å»ºè®®1: æ¸…ç†ç©ºç›®å½•
- åˆ é™¤ router/reading/

å»ºè®®2: é‡ç»„Writer Router
router/
â””â”€â”€ writer/
    â”œâ”€â”€ writer.go          # ä¿ç•™
    â”œâ”€â”€ audit.go           # ä¿ç•™
    â”œâ”€â”€ stats.go           # ä¿ç•™
    â”œâ”€â”€ project.go         # ä» project/ ç§»å…¥
    â””â”€â”€ project_document.go # ä» project/ ç§»å…¥

å»ºè®®3: ç»Ÿä¸€ç”¨æˆ·è·¯ç”±å‘½å
- å°† router/users/ é‡å‘½åä¸º router/user/
- æˆ–åˆå¹¶åˆ° router/shared/
```

---

## ğŸ¯ ç»¼åˆé‡æ„è®¡åˆ’

### Phase 1: ç´§æ€¥ä¿®å¤ï¼ˆ1-2å¤©ï¼‰

#### ä»»åŠ¡1.1: æ¸…ç†ç©ºç›®å½•
```bash
# åˆ é™¤ä»¥ä¸‹ç©ºç›®å½•
rm -rf service/social/
rm -rf service/task/
rm -rf models/reading/recommendation/
rm -rf models/reading/social/
rm -rf models/reading/task/
rm -rf models/writer/
rm -rf router/reading/
```

**ä¼˜å…ˆçº§**: ğŸ”¥ é«˜  
**å½±å“èŒƒå›´**: ä½  
**é£é™©**: æ— 

#### ä»»åŠ¡1.2: ç§»åŠ¨å­¤ç«‹æ–‡ä»¶
```bash
# ç§»åŠ¨é¡¶å±‚Repositoryæ–‡ä»¶
mkdir -p repository/mongodb/ai/
mv repository/mongodb/quota_repository.go repository/mongodb/ai/

# ç§»åŠ¨é¡¶å±‚æ¥å£æ–‡ä»¶
mkdir -p repository/interfaces/ai/
mv repository/interfaces/QuotaRepo_interface.go repository/interfaces/ai/
```

**ä¼˜å…ˆçº§**: ğŸ”¥ é«˜  
**å½±å“èŒƒå›´**: ä¸­  
**é£é™©**: ä½ï¼ˆéœ€è¦æ›´æ–°importï¼‰

---

### Phase 2: å‘½åç»Ÿä¸€ï¼ˆ3-5å¤©ï¼‰

#### ä»»åŠ¡2.1: Reader/Readingå‘½åç»Ÿä¸€
```bash
# æ–¹æ¡ˆA: ç»Ÿä¸€ä¸ºreaderï¼ˆæ¨èï¼‰
mv service/reading/ service/reader/
mv repository/mongodb/reading/ repository/mongodb/reader/
mv repository/interfaces/reading/ repository/interfaces/reader/
mv models/reading/ models/reader/

# æ–¹æ¡ˆB: ç»Ÿä¸€ä¸ºreading
mv api/v1/reader/ api/v1/reading/
mv router/reader/ router/reading/
```

**æ¨è**: æ–¹æ¡ˆAï¼ˆreaderæ›´ç¬¦åˆä¸šåŠ¡è¯­ä¹‰ï¼‰  
**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­  
**å½±å“èŒƒå›´**: å¤§  
**é£é™©**: ä¸­ï¼ˆå¤§é‡importéœ€è¦æ›´æ–°ï¼‰

#### ä»»åŠ¡2.2: Writerç›¸å…³ç»Ÿä¸€
```bash
# ç»Ÿä¸€ä¸ºwriter
mv repository/mongodb/writing/ repository/mongodb/writer/
mv repository/interfaces/writing/ repository/interfaces/writer/

# åˆ›å»ºç»Ÿä¸€çš„writer serviceç›®å½•
mkdir -p service/writer/
mv service/audit/* service/writer/
mv service/document/* service/writer/
mv service/project/* service/writer/
mv service/stats/* service/writer/

# åˆå¹¶writer router
mv router/project/* router/writer/
rmdir router/project/
```

**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­  
**å½±å“èŒƒå›´**: å¤§  
**é£é™©**: ä¸­

#### ä»»åŠ¡2.3: Users/Userå‘½åç»Ÿä¸€
```bash
# ç»Ÿä¸€ä¸ºuser
mv models/users/ models/user/
mv router/users/ router/user/
```

**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½  
**å½±å“èŒƒå›´**: å°  
**é£é™©**: ä½

---

### Phase 3: æ¨¡å—é‡ç»„ï¼ˆ1-2å‘¨ï¼‰

#### ä»»åŠ¡3.1: åˆå¹¶Systemåˆ°Shared
```bash
# 1. è¿ç§»APIæ–‡ä»¶
mv api/v1/system/sys_user.go api/v1/shared/user_api.go

# 2. è¿ç§»DTO
mv api/v1/system/user_dto.go service/user/dto/

# 3. åˆ é™¤systemç›®å½•
rmdir api/v1/system/
```

**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­  
**å½±å“èŒƒå›´**: ä¸­  
**é£é™©**: ä¸­ï¼ˆéœ€è¦æ›´æ–°è·¯ç”±ï¼‰

#### ä»»åŠ¡3.2: åˆ›å»ºWriter Serviceå±‚
```bash
# æŒ‰ç…§è®¾è®¡åˆ›å»ºç»Ÿä¸€çš„Writer Service
# è¯¦è§ä¸Šæ–‡"ä»»åŠ¡2.2"
```

**ä¼˜å…ˆçº§**: ğŸŸ¡ ä¸­  
**å½±å“èŒƒå›´**: å¤§  
**é£é™©**: ä¸­

#### ä»»åŠ¡3.3: å®ç°Audit Repository
```bash
# åˆ›å»ºMongoDBå®ç°
mkdir -p repository/mongodb/audit/
# å®ç°ä¸‰ä¸ªRepositoryç±»
```

**ä¼˜å…ˆçº§**: ğŸŸ¢ ä½  
**å½±å“èŒƒå›´**: ä¸­  
**é£é™©**: ä½ï¼ˆæ–°å¢åŠŸèƒ½ï¼‰

---

### Phase 4: ä¼˜åŒ–å’Œå®Œå–„ï¼ˆæŒç»­ï¼‰

#### ä»»åŠ¡4.1: DTOç»Ÿä¸€ç®¡ç†
- åœ¨æ¯ä¸ªserviceä¸‹åˆ›å»º`dto/`å­ç›®å½•
- å°†APIå±‚çš„DTOè¿ç§»åˆ°Serviceå±‚
- ç»Ÿä¸€DTOå‘½åè§„èŒƒ

#### ä»»åŠ¡4.2: æ¥å£æ–‡æ¡£æ›´æ–°
- æ›´æ–°æ‰€æœ‰APIæ–‡æ¡£
- æ›´æ–°Swaggeræ³¨é‡Š
- æ›´æ–°README

#### ä»»åŠ¡4.3: æµ‹è¯•è¦†ç›–
- ä¸ºé‡æ„æ¨¡å—è¡¥å……å•å…ƒæµ‹è¯•
- æ·»åŠ é›†æˆæµ‹è¯•
- æ›´æ–°æµ‹è¯•æ–‡æ¡£

---

## ğŸ“‹ é‡æ„ä¼˜å…ˆçº§çŸ©é˜µ

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å¤æ‚åº¦ | å½±å“èŒƒå›´ | å»ºè®®æ—¶é—´ |
|------|--------|--------|----------|----------|
| æ¸…ç†ç©ºç›®å½• | ğŸ”¥ é«˜ | ä½ | ä½ | ç«‹å³ |
| ç§»åŠ¨å­¤ç«‹æ–‡ä»¶ | ğŸ”¥ é«˜ | ä½ | ä¸­ | 1å¤© |
| Reader/Readingç»Ÿä¸€ | ğŸŸ¡ ä¸­ | ä¸­ | å¤§ | 2-3å¤© |
| Writerç»Ÿä¸€ | ğŸŸ¡ ä¸­ | é«˜ | å¤§ | 3-5å¤© |
| Users/Userç»Ÿä¸€ | ğŸŸ¢ ä½ | ä½ | å° | 1å¤© |
| Systemåˆå¹¶ | ğŸŸ¡ ä¸­ | ä¸­ | ä¸­ | 2å¤© |
| Audit Repository | ğŸŸ¢ ä½ | ä¸­ | ä¸­ | 2-3å¤© |
| DTOç»Ÿä¸€ | ğŸŸ¢ ä½ | ä¸­ | ä¸­ | æŒç»­ |

---

## ğŸ¨ é‡æ„åçš„ç†æƒ³æ¶æ„

### ç›®å½•ç»“æ„å¯¹æ¯”

#### å½“å‰ç»“æ„ï¼ˆé—®é¢˜ï¼‰
```
api/v1/
â”œâ”€â”€ system/          âŒ ä¸sharedé‡å¤
â”œâ”€â”€ writer/          âš ï¸ Serviceå±‚åˆ†æ•£
â””â”€â”€ reader/          âš ï¸ Serviceå±‚å«reading

service/
â”œâ”€â”€ audit/           âš ï¸ åº”å½’å…¥writer
â”œâ”€â”€ document/        âš ï¸ åº”å½’å…¥writer
â”œâ”€â”€ project/         âš ï¸ åº”å½’å…¥writer
â”œâ”€â”€ reading/         âš ï¸ APIå±‚å«reader
â”œâ”€â”€ social/          âŒ ç©ºç›®å½•
â””â”€â”€ task/            âŒ ç©ºç›®å½•

models/
â”œâ”€â”€ users/           âš ï¸ å…¶ä»–å±‚å«user
â”œâ”€â”€ reading/
â”‚   â”œâ”€â”€ recommendation/ âŒ ç©º
â”‚   â”œâ”€â”€ social/        âŒ ç©º
â”‚   â””â”€â”€ task/          âŒ ç©º
â””â”€â”€ writer/          âŒ ç©ºç›®å½•
```

#### ç†æƒ³ç»“æ„ï¼ˆç›®æ ‡ï¼‰
```
api/v1/
â”œâ”€â”€ ai/              âœ… æ¸…æ™°
â”œâ”€â”€ bookstore/       âœ… æ¸…æ™°
â”œâ”€â”€ reader/          âœ… æ¸…æ™°
â”œâ”€â”€ writer/          âœ… æ¸…æ™°
â”œâ”€â”€ recommendation/  âœ… æ¸…æ™°
â””â”€â”€ shared/          âœ… æ¸…æ™°ï¼ˆåŒ…å«åŸsystemï¼‰

service/
â”œâ”€â”€ ai/              âœ… æ¸…æ™°
â”œâ”€â”€ bookstore/       âœ… æ¸…æ™°
â”œâ”€â”€ reader/          âœ… ç»Ÿä¸€ï¼ˆåŸreadingï¼‰
â”œâ”€â”€ writer/          âœ… ç»Ÿä¸€ï¼ˆæ•´åˆaudit/document/project/statsï¼‰
â”œâ”€â”€ recommendation/  âœ… æ¸…æ™°
â”œâ”€â”€ shared/          âœ… æ¸…æ™°
â””â”€â”€ user/            âœ… æ¸…æ™°

models/
â”œâ”€â”€ ai/              âœ… æ¸…æ™°
â”œâ”€â”€ reader/          âœ… ç»Ÿä¸€ï¼ˆåŸreadingï¼‰
â”‚   â”œâ”€â”€ bookstore/   âœ… æ¸…æ™°
â”‚   â””â”€â”€ reader/      âœ… æ¸…æ™°
â”œâ”€â”€ writer/          âœ… å¡«å……ï¼ˆdocument/projectç›¸å…³ï¼‰
â”œâ”€â”€ recommendation/  âœ… ç®€åŒ–ï¼ˆæ— recoå­ç›®å½•ï¼‰
â”œâ”€â”€ shared/          âœ… æ¸…æ™°
â”œâ”€â”€ stats/           âœ… æ¸…æ™°
â””â”€â”€ user/            âœ… ç»Ÿä¸€ï¼ˆåŸusersï¼‰

repository/
â”œâ”€â”€ interfaces/
â”‚   â”œâ”€â”€ ai/          âœ… æ–°å¢ï¼ˆåŸé¡¶å±‚æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ bookstore/   âœ… æ¸…æ™°
â”‚   â”œâ”€â”€ reader/      âœ… ç»Ÿä¸€ï¼ˆåŸreadingï¼‰
â”‚   â”œâ”€â”€ writer/      âœ… ç»Ÿä¸€ï¼ˆåŸwritingï¼‰
â”‚   â””â”€â”€ ...          âœ… å…¶ä»–ä¿æŒ
â””â”€â”€ mongodb/
    â”œâ”€â”€ ai/          âœ… æ–°å¢
    â”œâ”€â”€ audit/       âœ… æ–°å¢ï¼ˆå®ç°æ¥å£ï¼‰
    â”œâ”€â”€ bookstore/   âœ… æ¸…æ™°
    â”œâ”€â”€ reader/      âœ… ç»Ÿä¸€ï¼ˆåŸreadingï¼‰
    â”œâ”€â”€ writer/      âœ… ç»Ÿä¸€ï¼ˆåŸwritingï¼‰
    â””â”€â”€ ...          âœ… å…¶ä»–ä¿æŒ
```

---

## ğŸ“Š é‡æ„æ•ˆç›Šåˆ†æ

### é¢„æœŸæ”¶ç›Š

| æ”¶ç›Šé¡¹ | å½“å‰çŠ¶æ€ | é‡æ„å | æå‡ |
|--------|---------|--------|------|
| **æ¨¡å—æ¸…æ™°åº¦** | 60% | 95% | +35% |
| **å‘½åä¸€è‡´æ€§** | 65% | 95% | +30% |
| **ä»£ç å¯è¯»æ€§** | 70% | 90% | +20% |
| **ç»´æŠ¤æ•ˆç‡** | 65% | 85% | +20% |
| **æ–°äººä¸Šæ‰‹é€Ÿåº¦** | æ…¢ | å¿« | 50% |

### é£é™©æ§åˆ¶

**é«˜é£é™©é¡¹**:
- Reader/Readingå¤§è§„æ¨¡é‡å‘½å
- Writer Serviceé‡ç»„

**é£é™©ç¼“è§£æªæ–½**:
1. åˆ†é˜¶æ®µå®æ–½ï¼Œæ¯é˜¶æ®µå®Œæˆåå……åˆ†æµ‹è¯•
2. ä¿ç•™Gitå†å²ï¼Œä¾¿äºå›æ»š
3. æ›´æ–°æ‰€æœ‰æ–‡æ¡£å’Œæ³¨é‡Š
4. å›¢é˜Ÿcode review
5. æ¸è¿›å¼è¿ç§»ï¼Œä¿æŒç³»ç»Ÿå¯ç”¨

---

## âœ… å®æ–½æ£€æŸ¥æ¸…å•

### Phase 1: ç´§æ€¥ä¿®å¤
- [ ] åˆ é™¤æ‰€æœ‰ç©ºç›®å½•
- [ ] ç§»åŠ¨å­¤ç«‹çš„Repositoryæ–‡ä»¶
- [ ] éªŒè¯ç¼–è¯‘é€šè¿‡
- [ ] è¿è¡Œå•å…ƒæµ‹è¯•

### Phase 2: å‘½åç»Ÿä¸€
- [ ] Reader/Readingç»Ÿä¸€é‡å‘½å
- [ ] Writerç›¸å…³ç»Ÿä¸€é‡å‘½å
- [ ] Users/Userç»Ÿä¸€é‡å‘½å
- [ ] æ›´æ–°æ‰€æœ‰importè·¯å¾„
- [ ] éªŒè¯ç¼–è¯‘é€šè¿‡
- [ ] è¿è¡Œé›†æˆæµ‹è¯•

### Phase 3: æ¨¡å—é‡ç»„
- [ ] åˆå¹¶Systemåˆ°Shared
- [ ] åˆ›å»ºWriter Serviceå±‚
- [ ] å®ç°Audit Repository
- [ ] æ›´æ–°è·¯ç”±æ³¨å†Œ
- [ ] æ›´æ–°APIæ–‡æ¡£
- [ ] å®Œæ•´æµ‹è¯•

### Phase 4: ä¼˜åŒ–å®Œå–„
- [ ] DTOç»Ÿä¸€ç®¡ç†
- [ ] è¡¥å……å•å…ƒæµ‹è¯•
- [ ] æ›´æ–°æ‰€æœ‰æ–‡æ¡£
- [ ] Code Review
- [ ] æ€§èƒ½æµ‹è¯•

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [é’ç¾½é¡¹ç›®å¼€å‘è§„åˆ™ v2.0](../../.cursor/rules/qingyubackend.mdc)
- [æ¶æ„è®¾è®¡è§„èŒƒ](../architecture/æ¶æ„è®¾è®¡è§„èŒƒ.md)
- [Repositoryå±‚è®¾è®¡è§„èŒƒ](../architecture/repositoryå±‚è®¾è®¡è§„èŒƒ.md)
- [é’ç¾½å¹³å°æ¨¡å—åŒ–æ¶æ„è®¾è®¡ v2.2](../design/é’ç¾½å¹³å°æ¨¡å—åŒ–æ¶æ„è®¾è®¡v2.2.md)

---

**å®¡æŸ¥äºº**: AIæ¶æ„å¸ˆ  
**å®¡æŸ¥æ—¥æœŸ**: 2025-10-22  
**ä¸‹æ¬¡å®¡æŸ¥**: é‡æ„å®Œæˆå

