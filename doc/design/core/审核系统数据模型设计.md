# 审核系统数据模型设计

> **版本**: v1.0  
> **创建日期**: 2025-10-21  
> **最后更新**: 2025-10-21  
> **状态**: ✅ 已实现，补充设计文档

---

## 1. 为什么需要这个设计

### 1.1 业务背景

内容审核系统是青羽写作平台的核心安全保障系统，负责：
- 自动检测用户生成内容（UGC）的合规性
- 识别敏感词、违规内容
- 评估内容风险等级
- 支持人工复核和申诉流程
- 记录用户违规行为，支持处罚决策

### 1.2 实际实现情况

审核系统已完整实现，包含三个核心数据模型：
- **AuditRecord**: 审核记录，存储每次审核的详细信息
- **SensitiveWord**: 敏感词库，支持多级分类和风险等级
- **ViolationRecord**: 违规记录，追踪用户违规历史和处罚状态

**实现文件**：
- `models/audit/audit_record.go` - 审核记录模型
- `models/audit/sensitive_word.go` - 敏感词模型
- `models/audit/violation_record.go` - 违规记录模型
- `service/audit/content_audit_service.go` - 审核服务实现
- `service/audit/rule_engine.go` - 规则引擎实现
- `pkg/audit/dfa_filter.go` - DFA敏感词过滤器

---

## 2. 数据模型设计

### 2.1 AuditRecord（审核记录）

#### 2.1.1 数据结构

```go
type AuditRecord struct {
    ID           string                 `bson:"_id,omitempty" json:"id"`
    TargetType   string                 `bson:"targetType" json:"targetType" validate:"required"`     // 审核对象类型
    TargetID     string                 `bson:"targetId" json:"targetId" validate:"required"`         // 审核对象ID
    AuthorID     string                 `bson:"authorId" json:"authorId"`                             // 作者ID
    Content      string                 `bson:"content" json:"content"`                               // 审核内容
    Status       string                 `bson:"status" json:"status" validate:"required"`             // 审核状态
    Result       string                 `bson:"result" json:"result"`                                 // 审核结果
    RiskLevel    int                    `bson:"riskLevel" json:"riskLevel"`                           // 风险等级 1-5
    RiskScore    float64                `bson:"riskScore" json:"riskScore"`                           // 风险分数 0-100
    Violations   []ViolationDetail      `bson:"violations" json:"violations"`                         // 违规详情列表
    ReviewerID   string                 `bson:"reviewerId,omitempty" json:"reviewerId,omitempty"`     // 复核人ID
    ReviewNote   string                 `bson:"reviewNote,omitempty" json:"reviewNote,omitempty"`     // 复核说明
    AppealStatus string                 `bson:"appealStatus,omitempty" json:"appealStatus,omitempty"` // 申诉状态
    Metadata     map[string]interface{} `bson:"metadata,omitempty" json:"metadata,omitempty"`         // 额外元数据
    CreatedAt    time.Time              `bson:"createdAt" json:"createdAt"`
    UpdatedAt    time.Time              `bson:"updatedAt" json:"updatedAt"`
    ReviewedAt   *time.Time             `bson:"reviewedAt,omitempty" json:"reviewedAt,omitempty"`     // 复核时间
}
```

#### 2.1.2 字段说明

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| ID | string | 否 | 审核记录唯一标识 |
| TargetType | string | 是 | 审核对象类型（document/chapter/comment） |
| TargetID | string | 是 | 审核对象的ID |
| AuthorID | string | 否 | 作者用户ID |
| Content | string | 否 | 待审核的内容文本（可能很长，考虑存储优化） |
| Status | string | 是 | 审核状态（pending/reviewing/approved/rejected/warning） |
| Result | string | 否 | 审核结果（pass/warning/reject/manual） |
| RiskLevel | int | 否 | 风险等级（1-5，5最严重） |
| RiskScore | float64 | 否 | 风险分数（0-100） |
| Violations | []ViolationDetail | 否 | 违规详情列表 |
| ReviewerID | string | 否 | 人工复核员ID |
| ReviewNote | string | 否 | 复核说明/备注 |
| AppealStatus | string | 否 | 申诉状态（pending/approved/rejected） |
| Metadata | map | 否 | 扩展元数据 |
| CreatedAt | time.Time | 是 | 创建时间 |
| UpdatedAt | time.Time | 是 | 更新时间 |
| ReviewedAt | *time.Time | 否 | 复核时间 |

#### 2.1.3 审核状态（Status）

```go
const (
    StatusPending   = "pending"   // 待审核
    StatusReviewing = "reviewing" // 审核中
    StatusApproved  = "approved"  // 通过
    StatusRejected  = "rejected"  // 拒绝
    StatusWarning   = "warning"   // 警告（通过但有风险）
)
```

**状态流转**：
```
pending → reviewing → approved/rejected/warning
                   ↓
                 manual (需人工复核)
```

#### 2.1.4 审核结果（Result）

```go
const (
    ResultPass    = "pass"    // 通过
    ResultWarning = "warning" // 警告
    ResultReject  = "reject"  // 拒绝
    ResultManual  = "manual"  // 需人工复核
)
```

#### 2.1.5 审核对象类型（TargetType）

```go
const (
    TargetTypeDocument = "document" // 文档
    TargetTypeChapter  = "chapter"  // 章节
    TargetTypeComment  = "comment"  // 评论
)
```

#### 2.1.6 业务方法

```go
// IsApproved 是否通过审核
func (a *AuditRecord) IsApproved() bool {
    return a.Status == StatusApproved || a.Result == ResultPass
}

// IsRejected 是否被拒绝
func (a *AuditRecord) IsRejected() bool {
    return a.Status == StatusRejected || a.Result == ResultReject
}

// NeedsManualReview 是否需要人工复核
func (a *AuditRecord) NeedsManualReview() bool {
    return a.Result == ResultManual || a.RiskLevel >= 3
}

// CanAppeal 是否可以申诉
func (a *AuditRecord) CanAppeal() bool {
    return a.IsRejected() && (a.AppealStatus == "" || a.AppealStatus == AppealNone)
}

// AddViolation 添加违规详情
func (a *AuditRecord) AddViolation(violation ViolationDetail)

// CalculateRiskScore 计算风险分数
func (a *AuditRecord) CalculateRiskScore() float64
```

#### 2.1.7 索引策略

```javascript
// MongoDB索引
db.audit_records.createIndex({ "targetType": 1, "targetId": 1 })  // 查询特定对象的审核记录
db.audit_records.createIndex({ "authorId": 1, "createdAt": -1 })  // 查询用户的审核历史
db.audit_records.createIndex({ "status": 1, "riskLevel": -1 })    // 按状态和风险等级查询
db.audit_records.createIndex({ "result": 1, "createdAt": -1 })    // 按结果和时间查询
db.audit_records.createIndex({ "appealStatus": 1 })                // 查询申诉记录
```

### 2.2 ViolationDetail（违规详情）

#### 2.2.1 数据结构

```go
type ViolationDetail struct {
    Type        string   `bson:"type" json:"type"`               // 违规类型
    Category    string   `bson:"category" json:"category"`       // 违规分类
    Level       int      `bson:"level" json:"level"`             // 严重等级
    Description string   `bson:"description" json:"description"` // 违规描述
    Position    int      `bson:"position" json:"position"`       // 违规位置（字符索引）
    Context     string   `bson:"context" json:"context"`         // 违规上下文（前后文）
    Keywords    []string `bson:"keywords" json:"keywords"`       // 命中的关键词
}
```

#### 2.2.2 字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| Type | string | 违规类型（sensitive_word/regex_match/rule_violation） |
| Category | string | 违规分类（politics/porn/violence/gambling/drugs等） |
| Level | int | 严重等级（1-5） |
| Description | string | 违规描述 |
| Position | int | 违规在内容中的位置（字符索引） |
| Context | string | 违规上下文（前后各50个字符） |
| Keywords | []string | 命中的关键词列表 |

---

### 2.3 SensitiveWord（敏感词）

#### 2.3.1 数据结构

```go
type SensitiveWord struct {
    ID          string    `bson:"_id,omitempty" json:"id"`
    Word        string    `bson:"word" json:"word" validate:"required"`               // 敏感词
    Category    string    `bson:"category" json:"category" validate:"required"`       // 分类
    Level       int       `bson:"level" json:"level" validate:"required,min=1,max=5"` // 严重等级 1-5
    Replacement string    `bson:"replacement" json:"replacement"`                     // 替换词
    IsEnabled   bool      `bson:"isEnabled" json:"isEnabled"`                         // 是否启用
    Source      string    `bson:"source" json:"source"`                               // 来源
    Description string    `bson:"description" json:"description"`                     // 描述说明
    CreatedAt   time.Time `bson:"createdAt" json:"createdAt"`
    UpdatedAt   time.Time `bson:"updatedAt" json:"updatedAt"`
    CreatedBy   string    `bson:"createdBy" json:"createdBy"`                         // 创建人
}
```

#### 2.3.2 字段说明

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| ID | string | 否 | 敏感词唯一标识 |
| Word | string | 是 | 敏感词内容 |
| Category | string | 是 | 分类（politics/porn/violence/gambling/drugs/cult/insult/ad/other） |
| Level | int | 是 | 严重等级（1-5） |
| Replacement | string | 否 | 替换词（如：***） |
| IsEnabled | bool | 否 | 是否启用 |
| Source | string | 否 | 来源（system/user） |
| Description | string | 否 | 描述说明 |
| CreatedAt | time.Time | 是 | 创建时间 |
| UpdatedAt | time.Time | 是 | 更新时间 |
| CreatedBy | string | 否 | 创建人ID |

#### 2.3.3 敏感词分类（Category）

```go
const (
    CategoryPolitics = "politics" // 政治敏感
    CategoryPorn     = "porn"     // 色情内容
    CategoryViolence = "violence" // 暴力内容
    CategoryGambling = "gambling" // 赌博相关
    CategoryDrugs    = "drugs"    // 毒品相关
    CategoryCult     = "cult"     // 邪教相关
    CategoryInsult   = "insult"   // 侮辱谩骂
    CategoryAd       = "ad"       // 广告推广
    CategoryOther    = "other"    // 其他
)
```

#### 2.3.4 敏感词等级（Level）

```go
const (
    LevelLow      = 1 // 低风险（警告）
    LevelMedium   = 2 // 中风险（需要复核）
    LevelHigh     = 3 // 高风险（自动拒绝）
    LevelCritical = 4 // 严重（自动拒绝+封号警告）
    LevelBanned   = 5 // 禁用（自动封号）
)
```

#### 2.3.5 业务方法

```go
// IsHighRisk 是否高风险
func (s *SensitiveWord) IsHighRisk() bool {
    return s.Level >= LevelHigh
}

// ShouldBan 是否应该封号
func (s *SensitiveWord) ShouldBan() bool {
    return s.Level >= LevelBanned
}
```

#### 2.3.6 索引策略

```javascript
// MongoDB索引
db.sensitive_words.createIndex({ "word": 1 }, { unique: true })  // 敏感词唯一
db.sensitive_words.createIndex({ "category": 1, "level": -1 })   // 按分类和等级查询
db.sensitive_words.createIndex({ "isEnabled": 1 })                // 查询启用的敏感词
db.sensitive_words.createIndex({ "createdBy": 1 })                // 按创建人查询
```

---

### 2.4 ViolationRecord（违规记录）

#### 2.4.1 数据结构

```go
type ViolationRecord struct {
    ID              string     `bson:"_id,omitempty" json:"id"`
    UserID          string     `bson:"userId" json:"userId" validate:"required"`         // 用户ID
    AuditRecordID   string     `bson:"auditRecordId" json:"auditRecordId"`               // 关联的审核记录ID
    TargetType      string     `bson:"targetType" json:"targetType"`                     // 违规对象类型
    TargetID        string     `bson:"targetId" json:"targetId"`                         // 违规对象ID
    ViolationType   string     `bson:"violationType" json:"violationType"`               // 违规类型
    ViolationLevel  int        `bson:"violationLevel" json:"violationLevel"`             // 违规等级
    ViolationCount  int        `bson:"violationCount" json:"violationCount"`             // 违规次数（累计）
    PenaltyType     string     `bson:"penaltyType,omitempty" json:"penaltyType"`         // 处罚类型
    PenaltyDuration int        `bson:"penaltyDuration,omitempty" json:"penaltyDuration"` // 处罚时长（天）
    IsPenalized     bool       `bson:"isPenalized" json:"isPenalized"`                   // 是否已处罚
    PenalizedAt     *time.Time `bson:"penalizedAt,omitempty" json:"penalizedAt"`         // 处罚时间
    ExpiresAt       *time.Time `bson:"expiresAt,omitempty" json:"expiresAt"`             // 处罚到期时间
    Description     string     `bson:"description" json:"description"`                   // 违规描述
    CreatedAt       time.Time  `bson:"createdAt" json:"createdAt"`
    UpdatedAt       time.Time  `bson:"updatedAt" json:"updatedAt"`
}
```

#### 2.4.2 字段说明

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| ID | string | 否 | 违规记录唯一标识 |
| UserID | string | 是 | 用户ID |
| AuditRecordID | string | 否 | 关联的审核记录ID |
| TargetType | string | 否 | 违规对象类型 |
| TargetID | string | 否 | 违规对象ID |
| ViolationType | string | 否 | 违规类型 |
| ViolationLevel | int | 否 | 违规等级（1-5） |
| ViolationCount | int | 否 | 累计违规次数 |
| PenaltyType | string | 否 | 处罚类型 |
| PenaltyDuration | int | 否 | 处罚时长（天） |
| IsPenalized | bool | 否 | 是否已处罚 |
| PenalizedAt | *time.Time | 否 | 处罚时间 |
| ExpiresAt | *time.Time | 否 | 处罚到期时间 |
| Description | string | 否 | 违规描述 |
| CreatedAt | time.Time | 是 | 创建时间 |
| UpdatedAt | time.Time | 是 | 更新时间 |

#### 2.4.3 处罚类型（PenaltyType）

```go
const (
    PenaltyWarning       = "warning"        // 警告
    PenaltyContentHidden = "content_hidden" // 内容隐藏
    PenaltyAccountMuted  = "account_muted"  // 禁言
    PenaltyAccountBanned = "account_banned" // 封号
    PenaltyPermanentBan  = "permanent_ban"  // 永久封号
)
```

#### 2.4.4 业务方法

```go
// IsActive 处罚是否生效中
func (v *ViolationRecord) IsActive() bool {
    if !v.IsPenalized || v.ExpiresAt == nil {
        return false
    }
    return time.Now().Before(*v.ExpiresAt)
}

// IsPermanentBan 是否永久封号
func (v *ViolationRecord) IsPermanentBan() bool {
    return v.PenaltyType == PenaltyPermanentBan
}

// ShouldEscalatePenalty 是否应该升级处罚
func (v *ViolationRecord) ShouldEscalatePenalty() bool {
    return v.ViolationCount >= 3 || v.ViolationLevel >= LevelCritical
}
```

#### 2.4.5 索引策略

```javascript
// MongoDB索引
db.violation_records.createIndex({ "userId": 1, "createdAt": -1 })           // 查询用户违规记录
db.violation_records.createIndex({ "userId": 1, "isPenalized": 1 })          // 查询用户处罚状态
db.violation_records.createIndex({ "auditRecordId": 1 })                     // 关联审核记录
db.violation_records.createIndex({ "penaltyType": 1, "expiresAt": 1 })       // 处罚到期查询
db.violation_records.createIndex({ "violationLevel": -1, "createdAt": -1 })  // 按严重等级查询
```

---

### 2.5 UserViolationSummary（用户违规统计）

#### 2.5.1 数据结构

```go
type UserViolationSummary struct {
    UserID              string    `bson:"_id" json:"userId"`
    TotalViolations     int       `bson:"totalViolations" json:"totalViolations"`
    WarningCount        int       `bson:"warningCount" json:"warningCount"`
    RejectCount         int       `bson:"rejectCount" json:"rejectCount"`
    HighRiskCount       int       `bson:"highRiskCount" json:"highRiskCount"`
    LastViolationAt     time.Time `bson:"lastViolationAt" json:"lastViolationAt"`
    ActivePenalties     int       `bson:"activePenalties" json:"activePenalties"`
    IsBanned            bool      `bson:"isBanned" json:"isBanned"`
    IsPermanentlyBanned bool      `bson:"isPermanentlyBanned" json:"isPermanentlyBanned"`
}
```

#### 2.5.2 业务方法

```go
// IsHighRiskUser 是否高风险用户
func (s *UserViolationSummary) IsHighRiskUser() bool {
    return s.HighRiskCount >= 2 || s.TotalViolations >= 5
}

// ShouldBan 是否应该封号
func (s *UserViolationSummary) ShouldBan() bool {
    return s.HighRiskCount >= 3 || s.TotalViolations >= 10
}
```

---

## 3. 数据关系

### 3.1 关系图

```
User (用户)
  |
  ├─ 1:N ─> AuditRecord (审核记录)
  |           |
  |           └─ 1:N ─> ViolationDetail (违规详情)
  |
  └─ 1:N ─> ViolationRecord (违规记录)
              |
              └─ N:1 ─> AuditRecord (关联审核记录)

SensitiveWord (敏感词库) ─ 被引用 ─> ViolationDetail
```

### 3.2 关系说明

1. **User ↔ AuditRecord**
   - 一个用户可以有多条审核记录
   - 通过 `AuthorID` 关联

2. **AuditRecord ↔ ViolationDetail**
   - 一条审核记录可以包含多个违规详情
   - ViolationDetail 嵌套在 AuditRecord 中

3. **User ↔ ViolationRecord**
   - 一个用户可以有多条违规记录
   - 通过 `UserID` 关联

4. **AuditRecord ↔ ViolationRecord**
   - 一条审核记录可以产生一条违规记录
   - 通过 `AuditRecordID` 关联

5. **SensitiveWord ↔ ViolationDetail**
   - 敏感词库用于检测，命中后生成ViolationDetail
   - 通过 Keywords 字段记录命中的敏感词

---

## 4. 风险评分算法

### 4.1 风险分数计算

```go
func (a *AuditRecord) CalculateRiskScore() float64 {
    if len(a.Violations) == 0 {
        return 0
    }

    // 基础分数：违规数量 * 10
    baseScore := float64(len(a.Violations)) * 10

    // 严重度加权
    levelWeight := 0.0
    for _, v := range a.Violations {
        levelWeight += float64(v.Level) * 10
    }

    // 最终分数（0-100）
    score := baseScore + levelWeight
    if score > 100 {
        score = 100
    }

    a.RiskScore = score
    return score
}
```

### 4.2 风险等级判定

```go
// 根据风险分数确定风险等级
func DetermineRiskLevel(score float64) int {
    if score >= 80 {
        return 5  // 极高风险
    } else if score >= 60 {
        return 4  // 高风险
    } else if score >= 40 {
        return 3  // 中风险
    } else if score >= 20 {
        return 2  // 低风险
    } else {
        return 1  // 极低风险
    }
}
```

---

## 5. 与v2.1架构的关系

### 5.1 在整体架构中的位置

```
Platform Layer (平台层)
  └─ Audit Module (审核模块)
      ├─ Models (数据模型层)
      │   ├─ AuditRecord
      │   ├─ SensitiveWord
      │   └─ ViolationRecord
      ├─ Repository (数据访问层)
      │   ├─ AuditRecordRepository
      │   ├─ SensitiveWordRepository
      │   └─ ViolationRecordRepository
      ├─ Service (业务逻辑层)
      │   ├─ ContentAuditService
      │   └─ RuleEngine
      └─ API (接口层)
          └─ AuditApi
```

### 5.2 与其他模块的协作

**1. Writing Module（写作端）**
- 文档/章节发布前调用审核服务
- 审核结果影响发布状态

**2. Reading Module（阅读端）**
- 评论发布前调用审核服务
- 审核失败的内容不可见

**3. User Module（用户模块）**
- 违规记录关联用户
- 处罚影响用户权限

### 5.3 事件发布/订阅

**发布的事件**：
```go
// 审核完成事件
type AuditCompletedEvent struct {
    AuditRecordID string
    TargetType    string
    TargetID      string
    Result        string
    RiskLevel     int
}

// 违规记录创建事件
type ViolationCreatedEvent struct {
    ViolationRecordID string
    UserID            string
    ViolationLevel    int
    PenaltyType       string
}

// 处罚应用事件
type PenaltyAppliedEvent struct {
    UserID      string
    PenaltyType string
    Duration    int
    Reason      string
}
```

**订阅的事件**：
```go
// 内容创建/更新事件
type ContentCreatedEvent struct {
    ContentType string
    ContentID   string
    AuthorID    string
    Content     string
}
```

---

## 6. 存储优化

### 6.1 大文本内容存储

对于审核内容（Content字段）可能很长的情况：

**方案1：GridFS存储**
```go
// 当内容超过16MB时，使用GridFS
if len(content) > 16*1024*1024 {
    gridFSID := uploadToGridFS(content)
    auditRecord.Content = ""  // 清空Content字段
    auditRecord.Metadata["gridfs_id"] = gridFSID
}
```

**方案2：内容摘要**
```go
// 只存储内容摘要和违规上下文
type AuditRecord struct {
    // ... 其他字段
    ContentDigest string `bson:"contentDigest"` // 内容摘要（MD5/SHA256）
    ContentLength int    `bson:"contentLength"` // 内容长度
}
```

### 6.2 历史数据归档

```javascript
// 定期归档旧审核记录（> 6个月）
db.audit_records.aggregate([
    { $match: { createdAt: { $lt: new Date(Date.now() - 180*24*60*60*1000) } } },
    { $out: "audit_records_archive" }
])
```

---

## 7. 实现参考

### 7.1 代码文件路径

- **数据模型**：
  - `models/audit/audit_record.go`
  - `models/audit/sensitive_word.go`
  - `models/audit/violation_record.go`

- **Repository层**：
  - `repository/interfaces/audit/AuditRecordRepository_interface.go`
  - `repository/interfaces/audit/SensitiveWordRepository_interface.go`
  - `repository/interfaces/audit/ViolationRecordRepository_interface.go`
  - `repository/mongodb/audit/audit_record_mongo.go`
  - `repository/mongodb/audit/sensitive_word_mongo.go`
  - `repository/mongodb/audit/violation_record_mongo.go`

- **Service层**：
  - `service/audit/content_audit_service.go`
  - `service/audit/rule_engine.go`
  - `service/audit/audit_dto.go`

- **工具包**：
  - `pkg/audit/dfa_filter.go` - DFA敏感词过滤器

### 7.2 关键实现特性

1. ✅ **完整的依赖注入**：ContentAuditService 使用 Repository 接口注入
2. ✅ **DFA算法**：高效的敏感词检测算法
3. ✅ **规则引擎**：可扩展的规则系统
4. ✅ **事件驱动**：所有关键操作都发布事件
5. ✅ **风险评分**：多维度的风险评估算法
6. ✅ **申诉机制**：完整的申诉流程支持
7. ✅ **处罚升级**：基于违规次数和等级的处罚升级策略

---

## 8. 使用示例

### 8.1 创建审核记录

```go
auditRecord := &audit.AuditRecord{
    TargetType: audit.TargetTypeDocument,
    TargetID:   documentID,
    AuthorID:   userID,
    Content:    content,
    Status:     audit.StatusPending,
}

// 自动检测
result, err := contentAuditService.CheckContent(ctx, content)
if err != nil {
    return err
}

auditRecord.Status = audit.StatusReviewing
auditRecord.Result = result.Result
auditRecord.RiskLevel = result.RiskLevel
auditRecord.RiskScore = result.RiskScore
auditRecord.Violations = result.Violations

// 保存审核记录
err = auditRecordRepo.Create(ctx, auditRecord)
```

### 8.2 添加敏感词

```go
sensitiveWord := &audit.SensitiveWord{
    Word:        "禁用词",
    Category:    audit.CategoryPolitics,
    Level:       audit.LevelHigh,
    Replacement: "***",
    IsEnabled:   true,
    Source:      "system",
    CreatedBy:   adminID,
}

err := sensitiveWordRepo.Create(ctx, sensitiveWord)
```

### 8.3 查询用户违规统计

```go
summary, err := auditRecordRepo.GetUserViolationSummary(ctx, userID)
if err != nil {
    return err
}

if summary.IsHighRiskUser() {
    // 采取措施
}

if summary.ShouldBan() {
    // 封号处理
}
```

---

## 9. 未来扩展

### 9.1 机器学习模型集成

```go
type AuditRecord struct {
    // ... 现有字段
    MLModelID      string  `bson:"mlModelId,omitempty"`      // 使用的ML模型ID
    MLConfidence   float64 `bson:"mlConfidence,omitempty"`   // ML模型置信度
    MLPrediction   string  `bson:"mlPrediction,omitempty"`   // ML模型预测结果
}
```

### 9.2 多语言支持

```go
type SensitiveWord struct {
    // ... 现有字段
    Language string `bson:"language"`  // 语言代码（zh-CN/en-US等）
}
```

### 9.3 审核规则版本化

```go
type AuditRule struct {
    ID          string    `bson:"_id,omitempty"`
    Name        string    `bson:"name"`
    Version     int       `bson:"version"`
    IsActive    bool      `bson:"isActive"`
    RuleContent string    `bson:"ruleContent"`  // JSON格式的规则定义
    CreatedAt   time.Time `bson:"createdAt"`
}
```

---

**文档状态**: ✅ 已完成  
**最后审核**: 2025-10-21  
**下一次审核**: 随代码变更同步更新

