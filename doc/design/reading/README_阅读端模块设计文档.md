# 阅读端模块设计文档

## 概述

阅读端模块是青羽轻量级阅读写作平台的核心组成部分，为用户提供完整的阅读体验。本模块包含书城、个性化推荐、阅读器、社交互动等功能。

## 模块架构

```bash
reading/
 bookstore/          # 书城模块
 recommendation/     # 推荐系统
 reader/            # 阅读器
 social/            # 社交功能
 task/              # 阅读任务
 vocabulary/        # 生词本
```

## 核心功能模块

### 1. 书城模块 (bookstore)

- **书城首页**: 轮播Banner + 四类榜单（实时/周/月/新人）
- **书籍详情**: 封面/简介/标签/评分/章节目录
- **分类浏览**: 按类型、标签、作者等维度浏览

### 2. 推荐系统 (recommendation)

- **个性化推荐**: 协同过滤 + 内容标签
- **首页瀑布流**: 推荐20本书籍
- **实时更新**: 基于用户行为动态调整

### 3. 阅读器 (reader)

- **章节阅读**: 章节正文展示
- **阅读设置**: 字体/背景/翻页三大设置
- **阅读记录**: 划线注记、阅读进度

### 4. 社交功能 (social)

- **段评系统**: 按句ID发评，点赞排序，折叠展示
- **书圈功能**: 每本书一个话题圈，发帖+点赞

### 5. 阅读任务 (task)

- **每日打卡**: 30分钟阅读任务
- **代币奖励**: 完成任务获得代币
- **时长统计**: Redis Bitmap记录阅读时长

### 6. 生词本 (vocabulary)

- **划词功能**: 阅读时划词查询
- **词典集成**: 调用第三方词典API
- **导出功能**: 支持CSV格式导出

## 技术架构

### 数据层

- **MongoDB**: 存储书籍信息、用户阅读记录、社交数据
- **Redis**: 缓存热门书籍、用户会话、阅读时长统计
- **OSS**: 存储章节正文、封面图片

### 服务层

- **书城服务**: 处理书籍展示、搜索、分类
- **推荐服务**: 个性化推荐算法实现
- **阅读服务**: 阅读器功能、进度管理
- **社交服务**: 段评、书圈、互动功能

### 接口层

- **RESTful API**: 标准HTTP接口
- **WebSocket**: 实时消息推送
- **gRPC**: 内部服务通信

## 相关文档

- [书城系统设计](./书城系统设计.md)
- [推荐系统设计](./推荐系统设计.md)
- [阅读器设计](./阅读器设计.md)
- [社交功能设计](./设计功能设计.md)
- [阅读任务设计](./阅读任务设计.md)
- [生词本设计](./生词本设计.md)

## 开发优先级

### MVP阶段

1. 书城首页和书籍详情
2. 基础阅读器功能
3. 简单推荐算法
4. 阅读任务系统

### 后续迭代

1. 高级推荐算法
2. 社交功能完善
3. 生词本功能
4. 阅读数据分析
